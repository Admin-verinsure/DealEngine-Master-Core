!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],e):e(jQuery)}(function(Q){"use strict";var X={};Q.jgrid.extend({editGridRow:function(H,V){var e=Q.jgrid.getRegional(this[0],"edit"),t=this[0].p.styleUI,L=Q.jgrid.styleUI[t].formedit,W=Q.jgrid.styleUI[t].common;return V=Q.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:W.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},e,V||{}),X[Q(this)[0].p.id]=V,this.each(function(){function t(){var e,t,d={};for(e in Q(j).find(".FormElement").each(function(){var e,t=Q(".customelement",this);if(t.length){var i=t[0],a=Q(i).attr("name");Q.each(z.p.colModel,function(){if(this.name===a&&this.editoptions&&Q.isFunction(this.editoptions.custom_value)){try{if(g[a]=this.editoptions.custom_value.call(z,Q("#"+Q.jgrid.jqID(a),j),"get"),void 0===g[a])throw"e1"}catch(e){"e1"===e?Q.jgrid.info_dialog(D.errcap,"function 'custom_value' "+X[Q(this)[0]].p.msg.novalue,X[Q(this)[0]].p.bClose,{styleUI:X[Q(this)[0]].p.styleUI}):Q.jgrid.info_dialog(D.errcap,e.message,X[Q(this)[0]].p.bClose,{styleUI:X[Q(this)[0]].p.styleUI})}return!0}})}else{switch(Q(this).get(0).type){case"checkbox":Q(this).is(":checked")?g[this.name]=Q(this).val():(e=Q(this).attr("offval"),g[this.name]=e);break;case"select-one":g[this.name]=Q(this).val();break;case"select-multiple":g[this.name]=Q(this).val(),g[this.name]=g[this.name]?g[this.name].join(","):"";break;case"radio":if(d.hasOwnProperty(this.name))return!0;d[this.name]=void 0===Q(this).attr("offval")?"off":Q(this).attr("offval");break;default:g[this.name]=Q(this).val()}z.p.autoencode&&(g[this.name]=Q.jgrid.htmlEncode(g[this.name]))}}),d){d.hasOwnProperty(e)&&(t=Q('input[name="'+e+'"]:checked',j).val(),g[e]=void 0!==t?t:d[e],z.p.autoencode&&(g[e]=Q.jgrid.htmlEncode(g[e])))}return 1}function f(i,a,d){var r,o,e,t,n,l,s=0;(X[z.p.id].checkOnSubmit||X[z.p.id].checkOnUpdate)&&(z.p.savedData={},z.p.savedData[a.p.id+"_id"]=i);var c=a.p.colModel;if("_empty"===i)return Q(c).each(function(){r=this.name,t=Q.extend({},this.editoptions||{}),(e=Q("#"+Q.jgrid.jqID(r),d))&&e.length&&null!==e[0]&&(n="","custom"===this.edittype&&Q.isFunction(t.custom_value)?t.custom_value.call(z,Q("#"+r,d),"set",n):t.defaultValue?(n=Q.isFunction(t.defaultValue)?t.defaultValue.call(z):t.defaultValue,"checkbox"===e[0].type?(l=n.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=n):(e[0].checked=!1,e[0].defaultChecked=!1):e.val(n)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,n=Q(e).attr("offval")):e[0].type&&"select"===e[0].type.substr(0,6)?e[0].selectedIndex=0:e.val(n),!0!==X[z.p.id].checkOnSubmit&&!X[z.p.id].checkOnUpdate||(z.p.savedData[r]=n))}),void Q("#id_g",d).val(i);var p=Q(a).jqGrid("getInd",i,!0);p&&(Q('td[role="gridcell"]',p).each(function(t){if("cb"!==(r=c[t].name)&&"subgrid"!==r&&"rn"!==r&&!0===c[t].editable){if(r===a.p.ExpandColumn&&!0===a.p.treeGrid)o=Q(this).text();else try{o=Q.unformat.call(a,Q(this),{rowId:i,colModel:c[t]},t)}catch(e){o="textarea"===c[t].edittype?Q(this).text():Q(this).html()}switch(z.p.autoencode&&(o=Q.jgrid.htmlDecode(o)),!0!==X[z.p.id].checkOnSubmit&&!X[z.p.id].checkOnUpdate||(z.p.savedData[r]=o),r=Q.jgrid.jqID(r),c[t].edittype){case"select":var e=o.split(","),e=Q.map(e,function(e){return Q.trim(e)});Q("#"+r+" option",d).each(function(){!(c[t].editoptions.multiple||Q.trim(o)!==Q.trim(Q(this).text())&&e[0]!==Q.trim(Q(this).text())&&e[0]!==Q.trim(Q(this).val()))||c[t].editoptions.multiple&&(-1<Q.inArray(Q.trim(Q(this).text()),e)||-1<Q.inArray(Q.trim(Q(this).val()),e))?this.selected=!0:this.selected=!1}),!0!==X[z.p.id].checkOnSubmit&&!X[z.p.id].checkOnUpdate||(o=Q("#"+r,d).val(),c[t].editoptions.multiple&&(o=o.join(",")),z.p.savedData[r]=o);break;case"checkbox":o=String(o),c[t].editoptions&&c[t].editoptions.value?c[t].editoptions.value.split(":")[0]===o?Q("#"+r,d)[z.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):Q("#"+r,d)[z.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1}):(o=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?(Q("#"+r,d)[z.p.useProp?"prop":"attr"]("checked",!0),Q("#"+r,d)[z.p.useProp?"prop":"attr"]("defaultChecked",!0)):(Q("#"+r,d)[z.p.useProp?"prop":"attr"]("checked",!1),Q("#"+r,d)[z.p.useProp?"prop":"attr"]("defaultChecked",!1)),!0!==X[z.p.id].checkOnSubmit&&!X[z.p.id].checkOnUpdate||(o=Q("#"+r,d).is(":checked")?Q("#"+r,d).val():Q("#"+r,d).attr("offval"),z.p.savedData[r]=o);break;case"custom":try{if(!c[t].editoptions||!Q.isFunction(c[t].editoptions.custom_value))throw"e1";c[t].editoptions.custom_value.call(z,Q("#"+r,d),"set",o)}catch(e){"e1"===e?Q.jgrid.info_dialog(D.errcap,"function 'custom_value' "+X[Q(this)[0]].p.msg.nodefined,Q.rp_ge[Q(this)[0]].p.bClose,{styleUI:X[Q(this)[0]].p.styleUI}):Q.jgrid.info_dialog(D.errcap,e.message,Q.rp_ge[Q(this)[0]].p.bClose,{styleUI:X[Q(this)[0]].p.styleUI})}break;default:("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),Q("#"+r,d).val(o)}s++}}),0<s&&(Q("#id_g",j).val(i),!0!==X[z.p.id].checkOnSubmit&&!X[z.p.id].checkOnUpdate||(z.p.savedData[a.p.id+"_id"]=i)))}function e(){var a,d,r,e,o,t,i,n,l=[!0,"",""],s={},c=z.p.prmNames,p=Q(z).triggerHandler("jqGridAddEditBeforeCheckValues",[g,Q(U),v]);if(p&&"object"==typeof p&&(g=p),Q.isFunction(X[z.p.id].beforeCheckValues)&&(p=X[z.p.id].beforeCheckValues.call(z,g,Q(U),v))&&"object"==typeof p&&(g=p),!X[z.p.id].html5Check||Q.jgrid.validateForm(q[0])){for(e in g)if(g.hasOwnProperty(e)&&!1===(l=Q.jgrid.checkValues.call(z,g[e],e))[0])break;if(Q.each(z.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&g.hasOwnProperty(t.name)&&""===g[t.name]&&(g[t.name]="null")}),l[0]&&(void 0===(s=Q(z).triggerHandler("jqGridAddEditClickSubmit",[X[z.p.id],g,v]))&&Q.isFunction(X[z.p.id].onclickSubmit)&&(s=X[z.p.id].onclickSubmit.call(z,X[z.p.id],g,v)||{}),void 0===(l=Q(z).triggerHandler("jqGridAddEditBeforeSubmit",[g,Q(U),v]))&&(l=[!0,"",""]),l[0]&&Q.isFunction(X[z.p.id].beforeSubmit)&&(l=X[z.p.id].beforeSubmit.call(z,g,Q(U),v))),l[0]&&!X[z.p.id].processing){if(X[z.p.id].processing=!0,Q("#sData",j+"_2").addClass(W.active),i=X[z.p.id].url||Q(z).jqGrid("getGridParam","editurl"),r=c.oper,d="clientArray"===i?z.p.keyName:c.id,g[r]="_empty"===Q.trim(g[z.p.id+"_id"])?c.addoper:c.editoper,g[r]===c.addoper&&void 0!==g[d]||(g[d]=g[z.p.id+"_id"]),delete g[z.p.id+"_id"],g=Q.extend(g,X[z.p.id].editData,s),!0===z.p.treeGrid)for(t in g[r]===c.addoper&&(o=Q(z).jqGrid("getGridParam","selrow"),n="adjacency"===z.p.treeGridModel?z.p.treeReader.parent_id_field:"parent_id",g[n]=o),z.p.treeReader)if(z.p.treeReader.hasOwnProperty(t)){var u=z.p.treeReader[t];if(g.hasOwnProperty(u)){if(g[r]===c.addoper&&"parent_id_field"===t)continue;delete g[u]}}g[d]=Q.jgrid.stripPref(z.p.idPrefix,g[d]);var h,m=Q.extend({url:i,type:X[z.p.id].mtype,data:Q.isFunction(X[z.p.id].serializeEditData)?X[z.p.id].serializeEditData.call(z,g):g,complete:function(e,t){var i;if(Q("#sData",j+"_2").removeClass(W.active),g[d]=z.p.idPrefix+g[d],300<=e.status&&304!==e.status?(l[0]=!1,l[1]=Q(z).triggerHandler("jqGridAddEditErrorTextFormat",[e,v]),Q.isFunction(X[z.p.id].errorTextFormat)?l[1]=X[z.p.id].errorTextFormat.call(z,e,v):l[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(void 0===(l=Q(z).triggerHandler("jqGridAddEditAfterSubmit",[e,g,v]))&&(l=[!0,"",""]),l[0]&&Q.isFunction(X[z.p.id].afterSubmit)&&(l=X[z.p.id].afterSubmit.call(z,e,g,v))),!1===l[0])Q(".FormError",U).html(l[1]),Q(".FormError",U).show();else if(z.p.autoencode&&Q.each(g,function(e,t){g[e]=Q.jgrid.htmlDecode(t)}),g[r]===c.addoper?(l[2]||(l[2]=Q.jgrid.randId()),null==g[d]||g[d]===z.p.idPrefix+"_empty"||""===g[d]?g[d]=l[2]:l[2]=g[d],X[z.p.id].reloadAfterSubmit?Q(z).trigger("reloadGrid"):!0===z.p.treeGrid?Q(z).jqGrid("addChildNode",l[2],o,g):Q(z).jqGrid("addRowData",l[2],g,V.addedrow),X[z.p.id].closeAfterAdd?(!0!==z.p.treeGrid&&Q(z).jqGrid("setSelection",l[2]),Q.jgrid.hideModal("#"+Q.jgrid.jqID(w.themodal),{gb:"#gbox_"+Q.jgrid.jqID(b),jqm:V.jqModal,onClose:X[z.p.id].onClose,removemodal:X[z.p.id].removemodal,formprop:!X[z.p.id].recreateForm,form:X[z.p.id].form})):X[z.p.id].clearAfterAdd&&f("_empty",z,U)):(X[z.p.id].reloadAfterSubmit?(Q(z).trigger("reloadGrid"),X[z.p.id].closeAfterEdit||setTimeout(function(){Q(z).jqGrid("setSelection",g[d])},1e3)):!0===z.p.treeGrid?Q(z).jqGrid("setTreeRow",g[d],g):Q(z).jqGrid("setRowData",g[d],g),X[z.p.id].closeAfterEdit&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(w.themodal),{gb:"#gbox_"+Q.jgrid.jqID(b),jqm:V.jqModal,onClose:X[z.p.id].onClose,removemodal:X[z.p.id].removemodal,formprop:!X[z.p.id].recreateForm,form:X[z.p.id].form})),(Q.isFunction(X[z.p.id].afterComplete)||Q._data(Q(z)[0],"events").hasOwnProperty("jqGridAddEditAfterComplete"))&&(a=e,setTimeout(function(){Q(z).triggerHandler("jqGridAddEditAfterComplete",[a,g,Q(U),v]);try{X[z.p.id].afterComplete.call(z,a,g,Q(U),v)}catch(e){}a=null},500)),(X[z.p.id].checkOnSubmit||X[z.p.id].checkOnUpdate)&&(Q(U).data("disabled",!1),"_empty"!==z.p.savedData[z.p.id+"_id"]))for(i in z.p.savedData)z.p.savedData.hasOwnProperty(i)&&g[i]&&(z.p.savedData[i]=g[i]);X[z.p.id].processing=!1;try{Q(":input:visible",U)[0].focus()}catch(e){}}},Q.jgrid.ajaxOptions,X[z.p.id].ajaxEditOptions);m.url||X[z.p.id].useDataProxy||(Q.isFunction(z.p.dataProxy)?X[z.p.id].useDataProxy=!0:(l[0]=!1,l[1]+=" "+D.nourl)),l[0]&&(X[z.p.id].useDataProxy?(void 0===(h=z.p.dataProxy.call(z,m,"set_"+z.p.id))&&(h=[!0,""]),!1===h[0]?(l[0]=!1,l[1]=h[1]||"Error deleting the selected row!"):(m.data.oper===c.addoper&&X[z.p.id].closeAfterAdd&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(w.themodal),{gb:"#gbox_"+Q.jgrid.jqID(b),jqm:V.jqModal,onClose:X[z.p.id].onClose,removemodal:X[z.p.id].removemodal,formprop:!X[z.p.id].recreateForm,form:X[z.p.id].form}),m.data.oper===c.editoper&&X[z.p.id].closeAfterEdit&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(w.themodal),{gb:"#gbox_"+Q.jgrid.jqID(b),jqm:V.jqModal,onClose:X[z.p.id].onClose,removemodal:X[z.p.id].removemodal,formprop:!X[z.p.id].recreateForm,form:X[z.p.id].form}))):"clientArray"===m.url?(X[z.p.id].reloadAfterSubmit=!1,g=m.data,m.complete({status:200,statusText:""},"")):Q.ajax(m))}!1===l[0]&&(Q(".FormError",U).html(l[1]),Q(".FormError",U).show())}}function i(e,t){var i,a=!1;if(!(a=!(Q.isPlainObject(e)&&Q.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i)){a=!0;break}if(e[i]!==t[i]){a=!0;break}}return a}function a(){var e=!0;return Q(".FormError",U).hide(),X[z.p.id].checkOnUpdate&&(g={},t(),i(g,z.p.savedData)&&(Q(U).data("disabled",!0),Q(".confirm","#"+w.themodal).show(),e=!1)),e}function d(e,t){var i=t[1].length-1;0===e||void 0!==t[1][e-1]&&Q("#"+Q.jgrid.jqID(t[1][e-1])).hasClass(W.disabled)?Q("#pData",R).addClass(W.disabled):Q("#pData",R).removeClass(W.disabled),e===i||void 0!==t[1][e+1]&&Q("#"+Q.jgrid.jqID(t[1][e+1])).hasClass(W.disabled)?Q("#nData",R).addClass(W.disabled):Q("#nData",R).removeClass(W.disabled)}function r(){var e=Q(z).jqGrid("getDataIDs"),t=Q("#id_g",j).val();if(z.p.multiselect&&X[z.p.id].editselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==Q.inArray(e[a],z.p.selarrrow)&&i.push(e[a]);return[Q.inArray(t,i),i]}return[Q.inArray(t,e),e]}function o(){if(X[z.p.id].checkOnSubmit||X[z.p.id].checkOnUpdate){var e,i=[],a={},i=Q.map(z.p.savedData,function(e,t){return t});for(var t in Q(".FormElement",q).each(function(){if(""!==Q.trim(this.name)&&-1===i.indexOf(this.name)){var e=Q(this).val(),t=Q(this).get(0).type;if("checkbox"===t)Q(this).is(":checked")||(e=Q(this).attr("offval"));else if("select-multiple"===t)e=e.join(",");else if("radio"===t){if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===Q(this).attr("offval")?"off":Q(this).attr("offval")}z.p.savedData[this.name]=e}}),a){a.hasOwnProperty(t)&&(e=Q('input[name="'+t+'"]:checked',q).val(),z.p.savedData[t]=void 0!==e?e:a[t])}}}var g,v,b,n,j,w,l,s,c,y,D,p,u,h,m,q,x,_,I,k,C,F,G,O,S,P,E,M,A,B,R,U,T,N,z=this;z.grid&&H&&(z.p.savedData={},b=z.p.id,U="FrmGrid_"+b,n="TblGrid_"+b,j="#"+Q.jgrid.jqID(n),w={themodal:"editmod"+b,modalhead:"edithd"+b,modalcontent:"editcnt"+b,scrollelm:U},l=!0,s=1,c=0,y="string"==typeof X[z.p.id].template&&0<X[z.p.id].template.length,D=Q.jgrid.getRegional(this,"errors"),X[z.p.id].styleUI=z.p.styleUI||"jQueryUI",Q.jgrid.isMobile()&&(X[z.p.id].resize=!1),"new"===H?(H="_empty",v="add",V.caption=X[z.p.id].addCaption):(V.caption=X[z.p.id].editCaption,v="edit"),V.recreateForm||Q(z).data("formProp")&&Q.extend(X[Q(this)[0].p.id],Q(z).data("formProp")),p=!0,V.checkOnUpdate&&V.jqModal&&!V.modal&&(p=!1),h=isNaN(X[Q(this)[0].p.id].dataheight)?X[Q(this)[0].p.id].dataheight:X[Q(this)[0].p.id].dataheight+"px",m=isNaN(X[Q(this)[0].p.id].datawidth)?X[Q(this)[0].p.id].datawidth:X[Q(this)[0].p.id].datawidth+"px",q=Q("<form name='FormPost' id='"+U+"' class='FormGrid' onSubmit='return false;' style='width:"+m+";height:"+h+";'></form>").data("disabled",!1),R=y?(T=X[Q(this)[0].p.id].template,N="","string"==typeof T&&(N=T.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'})),u=N,j):(u=Q("<table id='"+n+"' class='EditTable ui-common-table'><tbody></tbody></table>"),j+"_2"),U="#"+Q.jgrid.jqID(U),Q(q).append("<div class='FormError "+W.error+"' style='display:none;'></div>"),Q(q).append("<div class='tinfo topinfo'>"+X[z.p.id].topinfo+"</div>"),Q(z.p.colModel).each(function(){var e=this.formoptions;s=Math.max(s,e&&e.colpos||0),c=Math.max(c,e&&e.rowpos||0)}),Q(q).append(u),void 0===(l=Q(z).triggerHandler("jqGridAddEditBeforeInitData",[q,v]))&&(l=!0),l&&Q.isFunction(X[z.p.id].beforeInitData)&&(l=X[z.p.id].beforeInitData.call(z,q,v)),!1!==l&&(function(){var e;if("_empty"!==H&&void 0!==z.p.savedRow&&0<z.p.savedRow.length&&Q.isFunction(Q.fn.jqGrid.restoreRow))for(e=0;e<z.p.savedRow.length;e++)if(z.p.savedRow[e].id===H){Q(z).jqGrid("restoreRow",H);break}}(),function(n,l,s,c){for(var p,u,h,m,f,g,v,e,b=0,j=[],w=!1,D="",t=1;t<=c;t++)D+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==n&&(w=Q(l).jqGrid("getInd",n)),Q(l.p.colModel).each(function(t){if(p=this.name,u=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,f=u?"style='display:none'":"","cb"!==p&&"subgrid"!==p&&!0===this.editable&&"rn"!==p){if(!1===w)m="";else if(p===l.p.ExpandColumn&&!0===l.p.treeGrid)m=Q("td[role='gridcell']:eq("+t+")",l.rows[w]).text();else{try{m=Q.unformat.call(l,Q("td[role='gridcell']:eq("+t+")",l.rows[w]),{rowId:n,colModel:this},t)}catch(e){m=this.edittype&&"textarea"===this.edittype?Q("td[role='gridcell']:eq("+t+")",l.rows[w]).text():Q("td[role='gridcell']:eq("+t+")",l.rows[w]).html()}m&&"&nbsp;"!==m&&"&#160;"!==m&&(1!==m.length||160!==m.charCodeAt(0))||(m="")}var e,i,a=Q.extend({},this.editoptions||{},{id:p,name:p,rowId:n,oper:"edit",module:"form",checkUpdate:X[z.p.id].checkOnSubmit||X[z.p.id].checkOnUpdate}),d=Q.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),r=parseInt(d.rowpos,10)||b+1,o=parseInt(2*(parseInt(d.colpos,10)||1),10);"_empty"===n&&a.defaultValue&&(m=Q.isFunction(a.defaultValue)?a.defaultValue.call(z):a.defaultValue),this.edittype||(this.edittype="text"),z.p.autoencode&&(m=Q.jgrid.htmlDecode(m)),g=Q.jgrid.createEl.call(z,this.edittype,a,m,!1,Q.extend({},Q.jgrid.ajaxOptions,l.p.ajaxSelectOptions||{})),"select"===this.edittype&&(m=Q(g).val(),"select-multiple"===Q(g).get(0).type&&m&&(m=m.join(","))),"checkbox"===this.edittype&&(m=Q(g).is(":checked")?Q(g).val():Q(g).attr("offval")),Q(g).addClass("FormElement"),-1<Q.inArray(this.edittype,["text","textarea","password","select","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])&&Q(g).addClass(L.inputClass),v=!0,y?(e=Q(q).find("#"+p)).length?e.replaceWith(g):v=!1:(h=Q(s).find("tr[rowpos="+r+"]"),d.rowabove&&(i=Q("<tr><td class='contentinfo' colspan='"+2*c+"'>"+d.rowcontent+"</td></tr>"),Q(s).append(i),i[0].rp=r),0===h.length&&(h=1<c?Q("<tr rowpos='"+r+"'></tr>").addClass("FormData").attr("id","tr_"+p):Q("<tr "+f+" rowpos='"+r+"'></tr>").addClass("FormData").attr("id","tr_"+p),Q(h).append(D),Q(s).append(h),h[0].rp=r),Q("td:eq("+(o-2)+")",h[0]).html("<label for='"+p+"'>"+(void 0===d.label?l.p.colNames[t]:d.label)+"</label>"),Q("td:eq("+(o-1)+")",h[0]).append(d.elmprefix).append(g).append(d.elmsuffix),1<c&&u&&(Q("td:eq("+(o-2)+")",h[0]).hide(),Q("td:eq("+(o-1)+")",h[0]).hide())),(X[z.p.id].checkOnSubmit||X[z.p.id].checkOnUpdate)&&v&&(z.p.savedData[p]=m),"custom"===this.edittype&&Q.isFunction(a.custom_value)&&a.custom_value.call(z,Q("#"+p,U),"set",m),Q.jgrid.bindEv.call(z,g,a),j[b]=t,b++}}),0<b&&(y?(e="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+l.p.id+"_id' value='"+n+"'/>",Q(q).append(e)):((e=Q("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*c-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+l.p.id+"_id' value='"+n+"'/></td></tr>"))[0].rp=b+999,Q(s).append(e)),(X[z.p.id].checkOnSubmit||X[z.p.id].checkOnUpdate)&&(z.p.savedData[l.p.id+"_id"]=n))}(H,z,u,s),_=(x="rtl"===z.p.direction)?"pData":"nData",I="<a id='"+(x?"nData":"pData")+"' class='fm-button "+W.button+"'><span class='"+W.icon_base+" "+L.icon_prev+"'></span></a>",k="<a id='"+_+"' class='fm-button "+W.button+"'><span class='"+W.icon_base+" "+L.icon_next+"'></span></a>",C="<a id='sData' class='fm-button "+W.button+"'>"+V.bSubmit+"</a>",F="<a id='cData' class='fm-button "+W.button+"'>"+V.bCancel+"</a>",G=Q.isArray(X[z.p.id].buttons)?Q.jgrid.buildButtons(X[z.p.id].buttons,C+F,W):C+F,O="<table style='height:auto' class='EditTable ui-common-table' id='"+n+"_2'><tbody><tr><td colspan='2'><hr class='"+W.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(x?k+I:I+k)+"</td><td class='EditButton'>"+G+"</td></tr>",O+="</tbody></table>",0<c&&(S=[],Q.each(Q(u)[0].rows,function(e,t){S[e]=t}),S.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),Q.each(S,function(e,t){Q("tbody",u).append(t)})),V.gbox="#gbox_"+Q.jgrid.jqID(b),!(P=!1)===V.closeOnEscape&&(V.closeOnEscape=!1,P=!0),E=y?(Q(q).find("#pData").replaceWith(I),Q(q).find("#nData").replaceWith(k),Q(q).find("#sData").replaceWith(C),Q(q).find("#cData").replaceWith(F),Q("<div id="+n+"></div>").append(q)):Q("<div></div>").append(q).append(O),Q(q).append("<div class='binfo topinfo bottominfo'>"+X[z.p.id].bottominfo+"</div>"),M=Q(".ui-jqgrid").css("font-size")||"11px",Q.jgrid.createModal(w,E,X[Q(this)[0].p.id],"#gview_"+Q.jgrid.jqID(z.p.id),Q("#gbox_"+Q.jgrid.jqID(z.p.id))[0],null,{"font-size":M}),x&&(Q("#pData, #nData",j+"_2").css("float","right"),Q(".EditButton",j+"_2").css("text-align","left")),X[z.p.id].topinfo&&Q(".tinfo",U).show(),X[z.p.id].bottominfo&&Q(".binfo",U).show(),O=E=null,Q("#"+Q.jgrid.jqID(w.themodal)).keydown(function(e){var t=e.target;if(!0===Q(U).data("disabled"))return!1;if(!0===X[z.p.id].savekey[0]&&e.which===X[z.p.id].savekey[1]&&"TEXTAREA"!==t.tagName)return Q("#sData",j+"_2").trigger("click"),!1;if(27===e.which)return!!a()&&(P&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(w.themodal),{gb:V.gbox,jqm:V.jqModal,onClose:X[z.p.id].onClose,removemodal:X[z.p.id].removemodal,formprop:!X[z.p.id].recreateForm,form:X[z.p.id].form}),!1);if(!0===X[z.p.id].navkeys[0]){if("_empty"===Q("#id_g",j).val())return!0;if(e.which===X[z.p.id].navkeys[1])return Q("#pData",R).trigger("click"),!1;if(e.which===X[z.p.id].navkeys[2])return Q("#nData",R).trigger("click"),!1}}),V.checkOnUpdate&&(Q("a.ui-jqdialog-titlebar-close span","#"+Q.jgrid.jqID(w.themodal)).removeClass("jqmClose"),Q("a.ui-jqdialog-titlebar-close","#"+Q.jgrid.jqID(w.themodal)).off("click").click(function(){return!!a()&&(Q.jgrid.hideModal("#"+Q.jgrid.jqID(w.themodal),{gb:"#gbox_"+Q.jgrid.jqID(b),jqm:V.jqModal,onClose:X[z.p.id].onClose,removemodal:X[z.p.id].removemodal,formprop:!X[z.p.id].recreateForm,form:X[z.p.id].form}),!1)})),V.saveicon=Q.extend([!0,"left",L.icon_save],V.saveicon),V.closeicon=Q.extend([!0,"left",L.icon_close],V.closeicon),!0===V.saveicon[0]&&Q("#sData",R).addClass("right"===V.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+W.icon_base+" "+V.saveicon[2]+"'></span>"),!0===V.closeicon[0]&&Q("#cData",R).addClass("right"===V.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+W.icon_base+" "+V.closeicon[2]+"'></span>"),(X[z.p.id].checkOnSubmit||X[z.p.id].checkOnUpdate)&&(C="<a id='sNew' class='fm-button "+W.button+"' style='z-index:1002'>"+V.bYes+"</a>",k="<a id='nNew' class='fm-button "+W.button+"' style='z-index:1002;margin-left:5px'>"+V.bNo+"</a>",F="<a id='cNew' class='fm-button "+W.button+"' style='z-index:1002;margin-left:5px;'>"+V.bExit+"</a>",A=V.zIndex||999,A++,Q("#"+w.themodal).append("<div class='"+V.overlayClass+" jqgrid-overlay confirm' style='z-index:"+A+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+W.content+"' style='z-index:"+(1+A)+"'>"+V.saveData+"<br/><br/>"+C+k+F+"</div>"),Q("#sNew","#"+Q.jgrid.jqID(w.themodal)).click(function(){return e(),Q(U).data("disabled",!1),Q(".confirm","#"+Q.jgrid.jqID(w.themodal)).hide(),!1}),Q("#nNew","#"+Q.jgrid.jqID(w.themodal)).click(function(){return Q(".confirm","#"+Q.jgrid.jqID(w.themodal)).hide(),Q(U).data("disabled",!1),setTimeout(function(){Q(":input:visible",U)[0].focus()},0),!1}),Q("#cNew","#"+Q.jgrid.jqID(w.themodal)).click(function(){return Q(".confirm","#"+Q.jgrid.jqID(w.themodal)).hide(),Q(U).data("disabled",!1),Q.jgrid.hideModal("#"+Q.jgrid.jqID(w.themodal),{gb:"#gbox_"+Q.jgrid.jqID(b),jqm:V.jqModal,onClose:X[z.p.id].onClose,removemodal:X[z.p.id].removemodal,formprop:!X[z.p.id].recreateForm,form:X[z.p.id].form}),!1})),Q(z).triggerHandler("jqGridAddEditInitializeForm",[Q(U),v]),Q.isFunction(X[z.p.id].onInitializeForm)&&X[z.p.id].onInitializeForm.call(z,Q(U),v),"_empty"!==H&&X[z.p.id].viewPagerButtons?Q("#pData,#nData",R).show():Q("#pData,#nData",R).hide(),Q(z).triggerHandler("jqGridAddEditBeforeShowForm",[Q(U),v]),Q.isFunction(X[z.p.id].beforeShowForm)&&X[z.p.id].beforeShowForm.call(z,Q(U),v),o(),Q("#"+Q.jgrid.jqID(w.themodal)).data("onClose",X[z.p.id].onClose),Q.jgrid.viewModal("#"+Q.jgrid.jqID(w.themodal),{gbox:"#gbox_"+Q.jgrid.jqID(b),jqm:V.jqModal,overlay:V.overlay,modal:V.modal,overlayClass:V.overlayClass,focusField:V.focusField,onHide:function(e){var t=Q("#editmod"+b)[0].style.height,i=Q("#editmod"+b)[0].style.width;-1<t.indexOf("px")&&(t=parseFloat(t)),-1<i.indexOf("px")&&(i=parseFloat(i)),Q(z).data("formProp",{top:parseFloat(Q(e.w).css("top")),left:parseFloat(Q(e.w).css("left")),width:i,height:t,dataheight:Q(U).height(),datawidth:Q(U).width()}),e.w.remove(),e.o&&e.o.remove()}}),p||Q("."+Q.jgrid.jqID(V.overlayClass)).click(function(){return!!a()&&(Q.jgrid.hideModal("#"+Q.jgrid.jqID(w.themodal),{gb:"#gbox_"+Q.jgrid.jqID(b),jqm:V.jqModal,onClose:X[z.p.id].onClose,removemodal:X[z.p.id].removemodal,formprop:!X[z.p.id].recreateForm,form:X[z.p.id].form}),!1)}),Q(".fm-button","#"+Q.jgrid.jqID(w.themodal)).hover(function(){Q(this).addClass(W.hover)},function(){Q(this).removeClass(W.hover)}),Q("#sData",R).click(function(){return g={},Q(".FormError",U).hide(),t(),"_empty"!==g[z.p.id+"_id"]&&!0===V.checkOnSubmit?i(g,z.p.savedData)?(Q(U).data("disabled",!0),Q(".confirm","#"+Q.jgrid.jqID(w.themodal)).show()):e():e(),!1}),Q("#cData",R).click(function(){return!!a()&&(Q.jgrid.hideModal("#"+Q.jgrid.jqID(w.themodal),{gb:"#gbox_"+Q.jgrid.jqID(b),jqm:V.jqModal,onClose:X[z.p.id].onClose,removemodal:X[z.p.id].removemodal,formprop:!X[z.p.id].recreateForm,form:X[z.p.id].form}),!1)}),Q(R).find("[data-index]").each(function(){var t=parseInt(Q(this).attr("data-index"),10);0<=t&&V.buttons[t].hasOwnProperty("click")&&Q(this).on("click",function(e){V.buttons[t].click.call(z,Q(U)[0],X[z.p.id],e)})}),Q("#nData",R).click(function(){if(!a())return!1;Q(".FormError",U).hide();var e,t=r();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(Q(z).triggerHandler("jqGridAddEditClickPgButtons",["next",Q(U),t[1][t[0]]]),Q.isFunction(V.onclickPgButtons)&&void 0!==(e=V.onclickPgButtons.call(z,"next",Q(U),t[1][t[0]]))&&!1===e)return!1;if(Q("#"+Q.jgrid.jqID(t[1][t[0]+1])).hasClass(W.disabled))return!1;f(t[1][t[0]+1],z,U),z.p.multiselect&&X[z.p.id].editselected||Q(z).jqGrid("setSelection",t[1][t[0]+1]),Q(z).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",Q(U),t[1][t[0]]]),Q.isFunction(V.afterclickPgButtons)&&V.afterclickPgButtons.call(z,"next",Q(U),t[1][t[0]+1]),o(),d(t[0]+1,t)}return!1}),Q("#pData",R).click(function(){if(!a())return!1;Q(".FormError",U).hide();var e,t=r();if(-1!==t[0]&&t[1][t[0]-1]){if(Q(z).triggerHandler("jqGridAddEditClickPgButtons",["prev",Q(U),t[1][t[0]]]),Q.isFunction(V.onclickPgButtons)&&void 0!==(e=V.onclickPgButtons.call(z,"prev",Q(U),t[1][t[0]]))&&!1===e)return!1;if(Q("#"+Q.jgrid.jqID(t[1][t[0]-1])).hasClass(W.disabled))return!1;f(t[1][t[0]-1],z,U),z.p.multiselect&&X[z.p.id].editselected||Q(z).jqGrid("setSelection",t[1][t[0]-1]),Q(z).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",Q(U),t[1][t[0]]]),Q.isFunction(V.afterclickPgButtons)&&V.afterclickPgButtons.call(z,"prev",Q(U),t[1][t[0]-1]),o(),d(t[0]-1,t)}return!1}),Q(z).triggerHandler("jqGridAddEditAfterShowForm",[Q(U),v]),Q.isFunction(X[z.p.id].afterShowForm)&&X[z.p.id].afterShowForm.call(z,Q(U),v),d((B=r())[0],B)))})},viewGridRow:function(C,F){var e=Q.jgrid.getRegional(this[0],"view"),t=this[0].p.styleUI,G=Q.jgrid.styleUI[t].formedit,O=Q.jgrid.styleUI[t].common;return F=Q.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},e,F||{}),X[Q(this)[0].p.id]=F,this.each(function(){function t(){!0!==X[k.p.id].closeOnEscape&&!0!==X[k.p.id].navkeys[0]||setTimeout(function(){Q(".ui-jqdialog-titlebar-close","#"+Q.jgrid.jqID(s.modalhead)).attr("tabindex","-1").focus()},0)}function i(e,t){var i,a,d,r,o=0;(r=Q(t).jqGrid("getInd",e,!0))&&(Q("td",r).each(function(e){i=t.p.colModel[e].name,a=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&(d=i===t.p.ExpandColumn&&!0===t.p.treeGrid?Q(this).text():Q(this).html(),i=Q.jgrid.jqID("v_"+i),Q("#"+i+" span","#"+n).html(d),a&&Q("#"+i,"#"+n).parents("tr:first").hide(),o++)}),0<o&&Q("#id_g","#"+n).val(e))}function a(e,t){var i=t[1].length-1;0===e?Q("#pData","#"+n+"_2").addClass(O.disabled):void 0!==t[1][e-1]&&Q("#"+Q.jgrid.jqID(t[1][e-1])).hasClass(O.disabled)?Q("#pData",n+"_2").addClass(O.disabled):Q("#pData","#"+n+"_2").removeClass(O.disabled),e===i?Q("#nData","#"+n+"_2").addClass(O.disabled):void 0!==t[1][e+1]&&Q("#"+Q.jgrid.jqID(t[1][e+1])).hasClass(O.disabled)?Q("#nData",n+"_2").addClass(O.disabled):Q("#nData","#"+n+"_2").removeClass(O.disabled)}function d(){var e=Q(k).jqGrid("getDataIDs"),t=Q("#id_g","#"+n).val();if(k.p.multiselect&&X[k.p.id].viewselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==Q.inArray(e[a],k.p.selarrrow)&&i.push(e[a]);return[Q.inArray(t,i),i]}return[Q.inArray(t,e),e]}var e,r,n,o,l,s,c,p,u,h,m,f,g,v,b,j,w,D,y,q,x,_,I,k=this;k.grid&&C&&(e=k.p.id,r="ViewGrid_"+Q.jgrid.jqID(e),n="ViewTbl_"+Q.jgrid.jqID(e),o="ViewGrid_"+e,l="ViewTbl_"+e,s={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,scrollelm:r},c=!0,p=1,u=0,X[k.p.id].styleUI=k.p.styleUI||"jQueryUI",F.recreateForm||Q(k).data("viewProp")&&Q.extend(X[Q(this)[0].p.id],Q(k).data("viewProp")),h=isNaN(X[Q(this)[0].p.id].dataheight)?X[Q(this)[0].p.id].dataheight:X[Q(this)[0].p.id].dataheight+"px",m=isNaN(X[Q(this)[0].p.id].datawidth)?X[Q(this)[0].p.id].datawidth:X[Q(this)[0].p.id].datawidth+"px",f=Q("<form name='FormPost' id='"+o+"' class='FormGrid' style='width:"+m+";height:"+h+";'></form>"),g=Q("<table id='"+l+"' class='EditTable ViewTable'><tbody></tbody></table>"),Q(k.p.colModel).each(function(){var e=this.formoptions;p=Math.max(p,e&&e.colpos||0),u=Math.max(u,e&&e.rowpos||0)}),Q(f).append(g),void 0===(c=Q(k).triggerHandler("jqGridViewRowBeforeInitData",[f]))&&(c=!0),c&&Q.isFunction(X[k.p.id].beforeInitData)&&(c=X[k.p.id].beforeInitData.call(k,f)),!1!==c&&(function(e,r,o,n){for(var l,s,c,p,u,h,m,f,g,t,v=0,b=[],i="<td class='CaptionTD form-view-label "+O.content+"' width='"+F.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+O.content+"'></td>",j="",a="<td class='CaptionTD form-view-label "+O.content+"'></td><td class='DataTD form-view-data "+O.content+"'></td>",d=["integer","number","currency"],w=0,D=0,y=1;y<=n;y++)j+=1===y?i:a;Q(r.p.colModel).each(function(){(s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==Q.inArray(this.formatter,d)?w=Math.max(w,parseInt(this.width,10)):D=Math.max(D,parseInt(this.width,10)))}),h=0!==w?w:0!==D?D:0,g=Q(r).jqGrid("getInd",e),Q(r.p.colModel).each(function(e){var t,i,a,d;l=this.name,m=!1,s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,u=s?"style='display:none'":"",f="boolean"!=typeof this.viewable||this.viewable,"cb"!==l&&"subgrid"!==l&&"rn"!==l&&f&&(p=!1===g?"":l===r.p.ExpandColumn&&!0===r.p.treeGrid?Q("td:eq("+e+")",r.rows[g]).text():Q("td:eq("+e+")",r.rows[g]).html(),m="right"===this.align&&0!==h,t=Q.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(t.rowpos,10)||v+1,a=parseInt(2*(parseInt(t.colpos,10)||1),10),t.rowabove&&(d=Q("<tr><td class='contentinfo' colspan='"+2*n+"'>"+t.rowcontent+"</td></tr>"),Q(o).append(d),d[0].rp=i),0===(c=Q(o).find("tr[rowpos="+i+"]")).length&&(c=Q("<tr "+u+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+l),Q(c).append(j),Q(o).append(c),c[0].rp=i),Q("td:eq("+(a-2)+")",c[0]).html("<b>"+(void 0===t.label?r.p.colNames[e]:t.label)+"</b>"),Q("td:eq("+(a-1)+")",c[0]).append("<span>"+p+"</span>").attr("id","v_"+l),m&&Q("td:eq("+(a-1)+") span",c[0]).css({"text-align":"right",width:h+"px"}),b[v]=e,v++)}),0<v&&((t=Q("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>"))[0].rp=v+99,Q(o).append(t))}(C,k,g,p),b=(v="rtl"===k.p.direction)?"pData":"nData",j="<a id='"+(v?"nData":"pData")+"' class='fm-button "+O.button+"'><span class='"+O.icon_base+" "+G.icon_prev+"'></span></a>",w="<a id='"+b+"' class='fm-button "+O.button+"'><span class='"+O.icon_base+" "+G.icon_next+"'></span></a>",D="<a id='cData' class='fm-button "+O.button+"'>"+F.bClose+"</a>",y=Q.isArray(X[k.p.id].buttons)?Q.jgrid.buildButtons(X[k.p.id].buttons,D,O):D,0<u&&(q=[],Q.each(Q(g)[0].rows,function(e,t){q[e]=t}),q.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),Q.each(q,function(e,t){Q("tbody",g).append(t)})),F.gbox="#gbox_"+Q.jgrid.jqID(e),x=Q("<div></div>").append(f).append("<table border='0' class='EditTable' id='"+n+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+F.labelswidth+"'>"+(v?w+j:j+w)+"</td><td class='EditButton'>"+y+"</td></tr></tbody></table>"),_=Q(".ui-jqgrid").css("font-size")||"11px",Q.jgrid.createModal(s,x,X[Q(this)[0].p.id],"#gview_"+Q.jgrid.jqID(k.p.id),Q("#gview_"+Q.jgrid.jqID(k.p.id))[0],null,{"font-size":_}),v&&(Q("#pData, #nData","#"+n+"_2").css("float","right"),Q(".EditButton","#"+n+"_2").css("text-align","left")),F.viewPagerButtons||Q("#pData, #nData","#"+n+"_2").hide(),x=null,Q("#"+s.themodal).keydown(function(e){if(27===e.which)return X[k.p.id].closeOnEscape&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(s.themodal),{gb:F.gbox,jqm:F.jqModal,onClose:F.onClose,removemodal:X[k.p.id].removemodal,formprop:!X[k.p.id].recreateForm,form:X[k.p.id].form}),!1;if(!0===F.navkeys[0]){if(e.which===F.navkeys[1])return Q("#pData","#"+n+"_2").trigger("click"),!1;if(e.which===F.navkeys[2])return Q("#nData","#"+n+"_2").trigger("click"),!1}}),F.closeicon=Q.extend([!0,"left",G.icon_close],F.closeicon),!0===F.closeicon[0]&&Q("#cData","#"+n+"_2").addClass("right"===F.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+O.icon_base+" "+F.closeicon[2]+"'></span>"),Q(k).triggerHandler("jqGridViewRowBeforeShowForm",[Q("#"+r)]),Q.isFunction(F.beforeShowForm)&&F.beforeShowForm.call(k,Q("#"+r)),Q.jgrid.viewModal("#"+Q.jgrid.jqID(s.themodal),{gbox:"#gbox_"+Q.jgrid.jqID(e),jqm:F.jqModal,overlay:F.overlay,modal:F.modal,onHide:function(e){Q(k).data("viewProp",{top:parseFloat(Q(e.w).css("top")),left:parseFloat(Q(e.w).css("left")),width:Q(e.w).width(),height:Q(e.w).height(),dataheight:Q("#"+r).height(),datawidth:Q("#"+r).width()}),e.w.remove(),e.o&&e.o.remove()}}),Q(".fm-button:not(."+O.disabled+")","#"+n+"_2").hover(function(){Q(this).addClass(O.hover)},function(){Q(this).removeClass(O.hover)}),t(),Q("#cData","#"+n+"_2").click(function(){return Q.jgrid.hideModal("#"+Q.jgrid.jqID(s.themodal),{gb:"#gbox_"+Q.jgrid.jqID(e),jqm:F.jqModal,onClose:F.onClose,removemodal:X[k.p.id].removemodal,formprop:!X[k.p.id].recreateForm,form:X[k.p.id].form}),!1}),Q("#"+n+"_2").find("[data-index]").each(function(){var t=parseInt(Q(this).attr("data-index"),10);0<=t&&F.buttons[t].hasOwnProperty("click")&&Q(this).on("click",function(e){F.buttons[t].click.call(k,Q("#"+o)[0],X[k.p.id],e)})}),Q("#nData","#"+n+"_2").click(function(){Q("#FormError","#"+n).hide();var e=d();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&(Q(k).triggerHandler("jqGridViewRowClickPgButtons",["next",Q("#"+r),e[1][e[0]]]),Q.isFunction(F.onclickPgButtons)&&F.onclickPgButtons.call(k,"next",Q("#"+r),e[1][e[0]]),i(e[1][e[0]+1],k),k.p.multiselect&&X[k.p.id].viewselected||Q(k).jqGrid("setSelection",e[1][e[0]+1]),Q(k).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",Q("#"+r),e[1][e[0]+1]]),Q.isFunction(F.afterclickPgButtons)&&F.afterclickPgButtons.call(k,"next",Q("#"+r),e[1][e[0]+1]),a(e[0]+1,e)),t(),!1}),Q("#pData","#"+n+"_2").click(function(){Q("#FormError","#"+n).hide();var e=d();return-1!==e[0]&&e[1][e[0]-1]&&(Q(k).triggerHandler("jqGridViewRowClickPgButtons",["prev",Q("#"+r),e[1][e[0]]]),Q.isFunction(F.onclickPgButtons)&&F.onclickPgButtons.call(k,"prev",Q("#"+r),e[1][e[0]]),i(e[1][e[0]-1],k),k.p.multiselect&&X[k.p.id].viewselected||Q(k).jqGrid("setSelection",e[1][e[0]-1]),Q(k).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",Q("#"+r),e[1][e[0]-1]]),Q.isFunction(F.afterclickPgButtons)&&F.afterclickPgButtons.call(k,"prev",Q("#"+r),e[1][e[0]-1]),a(e[0]-1,e)),t(),!1}),a((I=d())[0],I)))})},delGridRow:function(b,j){var e=Q.jgrid.getRegional(this[0],"del"),t=this[0].p.styleUI,w=Q.jgrid.styleUI[t].formedit,D=Q.jgrid.styleUI[t].common;return j=Q.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,j||{}),X[Q(this)[0].p.id]=j,this.each(function(){var o=this;if(o.grid&&b){var n,a,l,s,c=o.p.id,p={},e=!0,u="DelTbl_"+Q.jgrid.jqID(c),i="DelTbl_"+c,h={themodal:"delmod"+c,modalhead:"delhd"+c,modalcontent:"delcnt"+c,scrollelm:u};if(X[o.p.id].styleUI=o.p.styleUI||"jQueryUI",Q.isArray(b)&&(b=b.join()),void 0!==Q("#"+Q.jgrid.jqID(h.themodal))[0]){if(void 0===(e=Q(o).triggerHandler("jqGridDelRowBeforeInitData",[Q("#"+u)]))&&(e=!0),e&&Q.isFunction(X[o.p.id].beforeInitData)&&(e=X[o.p.id].beforeInitData.call(o,Q("#"+u))),!1===e)return;Q("#DelData>td","#"+u).text(b),Q("#DelError","#"+u).hide(),!0===X[o.p.id].processing&&(X[o.p.id].processing=!1,Q("#dData","#"+u).removeClass(D.active)),Q(o).triggerHandler("jqGridDelRowBeforeShowForm",[Q("#"+u)]),Q.isFunction(X[o.p.id].beforeShowForm)&&X[o.p.id].beforeShowForm.call(o,Q("#"+u)),Q.jgrid.viewModal("#"+Q.jgrid.jqID(h.themodal),{gbox:"#gbox_"+Q.jgrid.jqID(c),jqm:X[o.p.id].jqModal,overlay:X[o.p.id].overlay,modal:X[o.p.id].modal}),Q(o).triggerHandler("jqGridDelRowAfterShowForm",[Q("#"+u)]),Q.isFunction(X[o.p.id].afterShowForm)&&X[o.p.id].afterShowForm.call(o,Q("#"+u))}else{var t=isNaN(X[o.p.id].dataheight)?X[o.p.id].dataheight:X[o.p.id].dataheight+"px",d=isNaN(j.datawidth)?j.datawidth:j.datawidth+"px",r="<div id='"+i+"' class='formdata' style='width:"+d+";overflow:auto;position:relative;height:"+t+";'>";r+="<table class='DelTable'><tbody>",r+="<tr id='DelError' style='display:none'><td class='"+D.error+"'></td></tr>",r+="<tr id='DelData' style='display:none'><td >"+b+"</td></tr>",r+='<tr><td class="delmsg" style="white-space:pre;">'+X[o.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",r+="</tbody></table></div>";var m="<a id='dData' class='fm-button "+D.button+"'>"+j.bSubmit+"</a>",f="<a id='eData' class='fm-button "+D.button+"'>"+j.bCancel+"</a>",g=Q.isArray(X[o.p.id].buttons)?Q.jgrid.buildButtons(X[o.p.id].buttons,m+f,D):m+f,v=Q(".ui-jqgrid").css("font-size")||"11px";if(r+="<table class='EditTable ui-common-table' id='"+u+"_2'><tbody><tr><td><hr class='"+D.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+g+"</td></tr></tbody></table>",j.gbox="#gbox_"+Q.jgrid.jqID(c),Q.jgrid.createModal(h,r,X[o.p.id],"#gview_"+Q.jgrid.jqID(o.p.id),Q("#gview_"+Q.jgrid.jqID(o.p.id))[0],null,{"font-size":v}),Q(".fm-button","#"+u+"_2").hover(function(){Q(this).addClass(D.hover)},function(){Q(this).removeClass(D.hover)}),j.delicon=Q.extend([!0,"left",w.icon_del],X[o.p.id].delicon),j.cancelicon=Q.extend([!0,"left",w.icon_cancel],X[o.p.id].cancelicon),!0===j.delicon[0]&&Q("#dData","#"+u+"_2").addClass("right"===j.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+D.icon_base+" "+j.delicon[2]+"'></span>"),!0===j.cancelicon[0]&&Q("#eData","#"+u+"_2").addClass("right"===j.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+D.icon_base+" "+j.cancelicon[2]+"'></span>"),Q("#dData","#"+u+"_2").click(function(){var e,d=[!0,""],r=Q("#DelData>td","#"+u).text();if(p={},void 0===(p=Q(o).triggerHandler("jqGridDelRowClickSubmit",[X[o.p.id],r]))&&Q.isFunction(X[o.p.id].onclickSubmit)&&(p=X[o.p.id].onclickSubmit.call(o,X[o.p.id],r)||{}),void 0===(d=Q(o).triggerHandler("jqGridDelRowBeforeSubmit",[r]))&&(d=[!0,"",""]),d[0]&&Q.isFunction(X[o.p.id].beforeSubmit)&&(d=X[o.p.id].beforeSubmit.call(o,r)),d[0]&&!X[o.p.id].processing){if(X[o.p.id].processing=!0,l=o.p.prmNames,n=Q.extend({},X[o.p.id].delData,p),s=l.oper,n[s]=l.deloper,a=l.id,!(r=String(r).split(",")).length)return!1;for(e in r)r.hasOwnProperty(e)&&(r[e]=Q.jgrid.stripPref(o.p.idPrefix,r[e]));n[a]=r.join(),Q(this).addClass(D.active);var t,i=Q.extend({url:X[o.p.id].url||Q(o).jqGrid("getGridParam","editurl"),type:X[o.p.id].mtype,data:Q.isFunction(X[o.p.id].serializeDelData)?X[o.p.id].serializeDelData.call(o,n):n,complete:function(e,t){var i,a;if(Q("#dData","#"+u+"_2").removeClass(D.active),300<=e.status&&304!==e.status?(d[0]=!1,d[1]=Q(o).triggerHandler("jqGridDelRowErrorTextFormat",[e]),Q.isFunction(X[o.p.id].errorTextFormat)&&(d[1]=X[o.p.id].errorTextFormat.call(o,e)),void 0===d[1]&&(d[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status)):(void 0===(d=Q(o).triggerHandler("jqGridDelRowAfterSubmit",[e,n]))&&(d=[!0,"",""]),d[0]&&Q.isFunction(X[o.p.id].afterSubmit)&&(d=X[o.p.id].afterSubmit.call(o,e,n))),!1===d[0])Q("#DelError>td","#"+u).html(d[1]),Q("#DelError","#"+u).show();else{if(X[o.p.id].reloadAfterSubmit&&"local"!==o.p.datatype)Q(o).trigger("reloadGrid");else{if(!0===o.p.treeGrid)try{Q(o).jqGrid("delTreeNode",o.p.idPrefix+r[0])}catch(e){}else for(i=0;i<r.length;i++)Q(o).jqGrid("delRowData",o.p.idPrefix+r[i]);o.p.selrow=null,o.p.selarrrow=[]}(Q.isFunction(X[o.p.id].afterComplete)||Q._data(Q(o)[0],"events").hasOwnProperty("jqGridDelRowAfterComplete"))&&(a=e,setTimeout(function(){Q(o).triggerHandler("jqGridDelRowAfterComplete",[a,n]);try{X[o.p.id].afterComplete.call(o,a,n)}catch(e){}},500))}X[o.p.id].processing=!1,d[0]&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(h.themodal),{gb:"#gbox_"+Q.jgrid.jqID(c),jqm:j.jqModal,onClose:X[o.p.id].onClose})}},Q.jgrid.ajaxOptions,X[o.p.id].ajaxDelOptions);i.url||X[o.p.id].useDataProxy||(Q.isFunction(o.p.dataProxy)?X[o.p.id].useDataProxy=!0:(d[0]=!1,d[1]+=" "+Q.jgrid.getRegional(o,"errors.nourl"))),d[0]&&(X[o.p.id].useDataProxy?(void 0===(t=o.p.dataProxy.call(o,i,"del_"+o.p.id))&&(t=[!0,""]),!1===t[0]?(d[0]=!1,d[1]=t[1]||"Error deleting the selected row!"):Q.jgrid.hideModal("#"+Q.jgrid.jqID(h.themodal),{gb:"#gbox_"+Q.jgrid.jqID(c),jqm:j.jqModal,onClose:X[o.p.id].onClose})):"clientArray"===i.url?(n=i.data,i.complete({status:200,statusText:""},"")):Q.ajax(i))}return!1===d[0]&&(Q("#DelError>td","#"+u).html(d[1]),Q("#DelError","#"+u).show()),!1}),Q("#eData","#"+u+"_2").click(function(){return Q.jgrid.hideModal("#"+Q.jgrid.jqID(h.themodal),{gb:"#gbox_"+Q.jgrid.jqID(c),jqm:X[o.p.id].jqModal,onClose:X[o.p.id].onClose}),!1}),Q("#"+u+"_2").find("[data-index]").each(function(){var t=parseInt(Q(this).attr("data-index"),10);0<=t&&j.buttons[t].hasOwnProperty("click")&&Q(this).on("click",function(e){j.buttons[t].click.call(o,Q("#"+i)[0],X[o.p.id],e)})}),void 0===(e=Q(o).triggerHandler("jqGridDelRowBeforeInitData",[Q("#"+u)]))&&(e=!0),e&&Q.isFunction(X[o.p.id].beforeInitData)&&(e=X[o.p.id].beforeInitData.call(o,Q("#"+u))),!1===e)return;Q(o).triggerHandler("jqGridDelRowBeforeShowForm",[Q("#"+u)]),Q.isFunction(X[o.p.id].beforeShowForm)&&X[o.p.id].beforeShowForm.call(o,Q("#"+u)),Q.jgrid.viewModal("#"+Q.jgrid.jqID(h.themodal),{gbox:"#gbox_"+Q.jgrid.jqID(c),jqm:X[o.p.id].jqModal,overlay:X[o.p.id].overlay,modal:X[o.p.id].modal}),Q(o).triggerHandler("jqGridDelRowAfterShowForm",[Q("#"+u)]),Q.isFunction(X[o.p.id].afterShowForm)&&X[o.p.id].afterShowForm.call(o,Q("#"+u))}!0===X[o.p.id].closeOnEscape&&setTimeout(function(){Q(".ui-jqdialog-titlebar-close","#"+Q.jgrid.jqID(h.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(g,v,b,j,w,D,y){var q=Q.jgrid.getRegional(this[0],"nav"),x=this[0].p.styleUI,e=Q.jgrid.styleUI[x].navigator,_=Q.jgrid.styleUI[x].common;return v=Q.extend({edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,del:!0,delicon:e.icon_del_nav,search:!0,searchicon:e.icon_search_nav,refresh:!0,refreshicon:e.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:e.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},q,v||{}),this.each(function(){if(!this.p.navGrid){var e,t,i,a,d,r={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},o=this;if(o.grid&&"string"==typeof g){Q(o).data("navGrid")||Q(o).data("navGrid",v),i=Q(o).data("navGrid"),o.p.force_regional&&(i=Q.extend(i,q)),void 0===Q("#"+r.themodal)[0]&&(i.alerttop||i.alertleft||((a=Q.jgrid.findPos(this))[0]=Math.round(a[0]),a[1]=Math.round(a[1]),i.alertleft=a[0]+this.p.width/2-parseInt(i.alertwidth,10)/2,i.alerttop=a[1]+this.p.height/2-25),d=Q(".ui-jqgrid").css("font-size")||"11px",Q.jgrid.createModal(r,"<div>"+i.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+Q.jgrid.jqID(o.p.id),jqModal:!0,drag:!0,resize:!0,caption:i.alertcap,top:i.alerttop,left:i.alertleft,width:i.alertwidth,height:i.alertheight,closeOnEscape:i.closeOnEscape,zIndex:i.alertzIndex,styleUI:o.p.styleUI},"#gview_"+Q.jgrid.jqID(o.p.id),Q("#gbox_"+Q.jgrid.jqID(o.p.id))[0],!0,{"font-size":d}));var n,l=1,s=function(){Q(this).hasClass(_.disabled)||Q(this).addClass(_.hover)},c=function(){Q(this).removeClass(_.hover)};for(i.cloneToTop&&o.p.toppager&&(l=2),n=0;n<l;n++){var p,u,h,m=Q("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),f="<td class='ui-pg-button "+_.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===n?(0===(u=g).indexOf("#")&&(u=u.substring(1),u="#"+Q.jgrid.jqID(u)),h=o.p.id,u===o.p.toppager&&(h+="_top",l=1)):(u=o.p.toppager,h=o.p.id+"_top"),"rtl"===o.p.direction&&Q(m).attr("dir","rtl").css("float","right"),j=j||{},i.add&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.addicon+"'></span>"+i.addtext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.addtitle||"",id:j.id||"add_"+h}).click(function(){return Q(this).hasClass(_.disabled)||(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.addfunc)?i.addfunc.call(o):Q(o).jqGrid("editGridRow","new",j)),!1}).hover(s,c),p=null),b=b||{},i.edit&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.editicon+"'></span>"+i.edittext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.edittitle||"",id:b.id||"edit_"+h}).click(function(){var e;return Q(this).hasClass(_.disabled)||((e=o.p.selrow)?(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.editfunc)?i.editfunc.call(o,e):Q(o).jqGrid("editGridRow",e,b)):(Q.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+Q.jgrid.jqID(o.p.id),jqm:!0}),Q("#jqg_alrt").focus())),!1}).hover(s,c),p=null),y=y||{},i.view&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.viewicon+"'></span>"+i.viewtext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.viewtitle||"",id:y.id||"view_"+h}).click(function(){var e;return Q(this).hasClass(_.disabled)||((e=o.p.selrow)?(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.viewfunc)?i.viewfunc.call(o,e):Q(o).jqGrid("viewGridRow",e,y)):(Q.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+Q.jgrid.jqID(o.p.id),jqm:!0}),Q("#jqg_alrt").focus())),!1}).hover(s,c),p=null),w=w||{},i.del&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.delicon+"'></span>"+i.deltext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.deltitle||"",id:w.id||"del_"+h}).click(function(){var e;return Q(this).hasClass(_.disabled)||(o.p.multiselect?0===(e=o.p.selarrrow).length&&(e=null):e=o.p.selrow,e?(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.delfunc)?i.delfunc.call(o,e):Q(o).jqGrid("delGridRow",e,w)):(Q.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+Q.jgrid.jqID(o.p.id),jqm:!0}),Q("#jqg_alrt").focus())),!1}).hover(s,c),p=null),(i.add||i.edit||i.del||i.view)&&Q("tr",m).append(f),D=D||{},i.search&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.searchicon+"'></span>"+i.searchtext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.searchtitle||"",id:D.id||"search_"+h}).click(function(){return Q(this).hasClass(_.disabled)||(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.searchfunc)?i.searchfunc.call(o,D):Q(o).jqGrid("searchGrid",D)),!1}).hover(s,c),D.showOnLoad&&!0===D.showOnLoad&&Q(p,m).click(),p=null),i.refresh&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.refreshicon+"'></span>"+i.refreshtext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.refreshtitle||"",id:"refresh_"+h}).click(function(){if(!Q(this).hasClass(_.disabled)){Q.isFunction(i.beforeRefresh)&&i.beforeRefresh.call(o),o.p.search=!1,o.p.resetsearch=!0;try{if("currentfilter"!==i.refreshstate){var e=o.p.id;o.p.postData.filters="";try{Q("#fbox_"+Q.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}Q.isFunction(o.clearToolbar)&&o.clearToolbar.call(o,!1)}}catch(e){}switch(i.refreshstate){case"firstpage":Q(o).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":Q(o).trigger("reloadGrid",[{current:!0}])}Q.isFunction(i.afterRefresh)&&i.afterRefresh.call(o),Q.jgrid.setSelNavIndex(o,this)}return!1}).hover(s,c),p=null),t=Q(".ui-jqgrid").css("font-size")||"11px",Q("body").append("<div id='testpg2' class='ui-jqgrid "+Q.jgrid.styleUI[x].base.entrieBox+"' style='font-size:"+t+";visibility:hidden;' ></div>"),e=Q(m).clone().appendTo("#testpg2").width(),Q("#testpg2").remove(),o.p._nvtd&&(i.dropmenu?(m=null,Q(o).jqGrid("_buildNavMenu",u,h,v,b,j,w,D,y)):e>o.p._nvtd[0]?(o.p.responsive?(m=null,Q(o).jqGrid("_buildNavMenu",u,h,v,b,j,w,D,y)):Q(u+"_"+i.position,u).append(m).width(e),o.p._nvtd[0]=e):Q(u+"_"+i.position,u).append(m),o.p._nvtd[1]=e),o.p.navGrid=!0}o.p.storeNavOptions&&(o.p.navOptions=i,o.p.editOptions=b,o.p.addOptions=j,o.p.delOptions=w,o.p.searchOptions=D,o.p.viewOptions=y,o.p.navButtons=[])}}})},navButtonAdd:function(c,p){var u=this[0].p.styleUI,e=Q.jgrid.styleUI[u].navigator;return p=Q.extend({caption:"newButton",title:"",buttonicon:e.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},p||{}),this.each(function(){if(this.grid&&"string"==typeof c){0===c.indexOf("#")&&(c=c.substring(1)),c="#"+Q.jgrid.jqID(c);var t,e,i,a=Q(".navtable",c)[0],d=this,r=Q.jgrid.styleUI[u].common.disabled,o=Q.jgrid.styleUI[u].common.hover,n=Q.jgrid.styleUI[u].common.cornerall,l=Q.jgrid.styleUI[u].common.icon_base;if(d.p.storeNavOptions&&!p.internal&&d.p.navButtons.push([c,p]),a){if(p.id&&void 0!==Q("#"+Q.jgrid.jqID(p.id),a)[0])return;var s=Q("<td></td>");"NONE"===p.buttonicon.toString().toUpperCase()?Q(s).addClass("ui-pg-button "+n).append("<div class='ui-pg-div'>"+p.caption+"</div>"):Q(s).addClass("ui-pg-button "+n).append("<div class='ui-pg-div'><span class='"+l+" "+p.buttonicon+"'></span>"+p.caption+"</div>"),p.id&&Q(s).attr("id",p.id),"first"!==p.position||0===a.rows[0].cells.length?Q("tr",a).append(s):Q("tr td:eq(0)",a).before(s),Q(s,a).attr("title",p.title||"").click(function(e){return Q(this).hasClass(r)||(Q.jgrid.setSelNavIndex(d,this),Q.isFunction(p.onClickButton)&&p.onClickButton.call(d,e)),!1}).hover(function(){Q(this).hasClass(r)||Q(this).addClass(o)},function(){Q(this).removeClass(o)})}else{(a=Q(".dropdownmenu",c)[0])&&(t=Q(a).val(),e=p.id||Q.jgrid.randId(),i=Q('<li class="ui-menu-item" role="presentation"><a class="'+n+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(p.caption||p.title)+"</a></li>"),t&&("first"===p.position?Q("#"+t).prepend(i):Q("#"+t).append(i),Q(i).on("click",function(e){return Q(this).hasClass(r)||(Q("#"+t).hide(),Q.isFunction(p.onClickButton)&&p.onClickButton.call(d,e)),!1}).find("a").hover(function(){Q(this).hasClass(r)||Q(this).addClass(o)},function(){Q(this).removeClass(o)})))}}})},navSeparatorAdd:function(a,d){var e=this[0].p.styleUI,r=Q.jgrid.styleUI[e].common;return d=Q.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},d||{}),this.each(function(){var e,t,i;this.grid&&("string"==typeof a&&0!==a.indexOf("#")&&(a="#"+Q.jgrid.jqID(a)),i=Q(".navtable",a)[0],this.p.storeNavOptions&&this.p.navButtons.push([a,d]),i?(e="<td class='ui-pg-button "+r.disabled+"' style='width:4px;'><span class='"+d.sepclass+"'></span>"+d.sepcontent+"</td>","first"!==d.position||0===i.rows[0].cells.length?Q("tr",i).append(e):Q("tr td:eq(0)",i).before(e)):(i=Q(".dropdownmenu",a)[0],e="<li class='ui-menu-item "+r.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",i&&(t=Q(i).val())&&("first"===d.position?Q("#"+t).prepend(e):Q("#"+t).append(e))))})},_buildNavMenu:function(h,m,f,g,v,b,j,w){return this.each(function(){var t=this,e=Q.jgrid.getRegional(t,"nav"),i=t.p.styleUI,a=(Q.jgrid.styleUI[i].navigator,Q.jgrid.styleUI[i].filter),d=Q.jgrid.styleUI[i].common,r="form_menu_"+Q.jgrid.randId(),o=f.navButtonText?f.navButtonText:e.selectcaption||"Actions",n="<button class='dropdownmenu "+d.button+"' value='"+r+"'>"+o+"</button>";Q(h+"_"+f.position,h).append(n);var l,s,c,p,u="alertmod_"+this.p.id;this.p.id,this.p.id;c=Q(".ui-jqgrid").css("font-size")||"11px",p=Q('<ul id="'+r+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+c+'"></ul>'),f.add&&(l=(v=v||{}).id||"add_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.addtext||f.addtitle)+"</a></li>").click(function(){return Q(this).hasClass(d.disabled)||(Q.isFunction(f.addfunc)?f.addfunc.call(t):Q(t).jqGrid("editGridRow","new",v),Q(p).hide()),!1}),Q(p).append(s)),f.edit&&(l=(g=g||{}).id||"edit_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.edittext||f.edittitle)+"</a></li>").click(function(){var e;return Q(this).hasClass(d.disabled)||((e=t.p.selrow)?Q.isFunction(f.editfunc)?f.editfunc.call(t,e):Q(t).jqGrid("editGridRow",e,g):(Q.jgrid.viewModal("#"+u,{gbox:"#gbox_"+Q.jgrid.jqID(t.p.id),jqm:!0}),Q("#jqg_alrt").focus()),Q(p).hide()),!1}),Q(p).append(s)),f.view&&(l=(w=w||{}).id||"view_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.viewtext||f.viewtitle)+"</a></li>").click(function(){var e;return Q(this).hasClass(d.disabled)||((e=t.p.selrow)?Q.isFunction(f.editfunc)?f.viewfunc.call(t,e):Q(t).jqGrid("viewGridRow",e,w):(Q.jgrid.viewModal("#"+u,{gbox:"#gbox_"+Q.jgrid.jqID(t.p.id),jqm:!0}),Q("#jqg_alrt").focus()),Q(p).hide()),!1}),Q(p).append(s)),f.del&&(l=(b=b||{}).id||"del_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.deltext||f.deltitle)+"</a></li>").click(function(){var e;return Q(this).hasClass(d.disabled)||(t.p.multiselect?0===(e=t.p.selarrrow).length&&(e=null):e=t.p.selrow,e?Q.isFunction(f.delfunc)?f.delfunc.call(t,e):Q(t).jqGrid("delGridRow",e,b):(Q.jgrid.viewModal("#"+u,{gbox:"#gbox_"+Q.jgrid.jqID(t.p.id),jqm:!0}),Q("#jqg_alrt").focus()),Q(p).hide()),!1}),Q(p).append(s)),(f.add||f.edit||f.del||f.view)&&Q(p).append("<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),f.search&&(l=(j=j||{}).id||"search_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.searchtext||f.searchtitle)+"</a></li>").click(function(){return Q(this).hasClass(d.disabled)||(Q.isFunction(f.searchfunc)?f.searchfunc.call(t,j):Q(t).jqGrid("searchGrid",j),Q(p).hide()),!1}),Q(p).append(s),j.showOnLoad&&!0===j.showOnLoad&&Q(s).click()),f.refresh&&(l=j.id||"search_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.refreshtext||f.refreshtitle)+"</a></li>").click(function(){if(!Q(this).hasClass(d.disabled)){Q.isFunction(f.beforeRefresh)&&f.beforeRefresh.call(t),t.p.search=!1,t.p.resetsearch=!0;try{if("currentfilter"!==f.refreshstate){var e=t.p.id;t.p.postData.filters="";try{Q("#fbox_"+Q.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}Q.isFunction(t.clearToolbar)&&t.clearToolbar.call(t,!1)}}catch(e){}switch(f.refreshstate){case"firstpage":Q(t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":Q(t).trigger("reloadGrid",[{current:!0}])}Q.isFunction(f.afterRefresh)&&f.afterRefresh.call(t),Q(p).hide()}return!1}),Q(p).append(s)),Q(p).hide(),Q("body").append(p),Q("#"+r).addClass("ui-menu "+a.menu_widget),Q("#"+r+" > li > a").hover(function(){Q(this).addClass(d.hover)},function(){Q(this).removeClass(d.hover)}),Q(".dropdownmenu",h+"_"+f.position).on("click",function(e){var t=Q(this).offset(),i=t.left,a=parseInt(t.top),d=Q(this).val();Q("#"+d).show().css({top:a-(Q("#"+d).height()+10)+"px",left:i+"px"}),e.stopPropagation()}),Q("body").on("click",function(e){Q(e.target).hasClass("dropdownmenu")||Q("#"+r).hide()})})},GridToForm:function(a,d){return this.each(function(){var e,t=this;if(t.grid){var i=Q(t).jqGrid("getRowData",a);if(i)for(e in i)i.hasOwnProperty(e)&&(Q("[name="+Q.jgrid.jqID(e)+"]",d).is("input:radio")||Q("[name="+Q.jgrid.jqID(e)+"]",d).is("input:checkbox")?Q("[name="+Q.jgrid.jqID(e)+"]",d).each(function(){Q(this).val()==i[e]?Q(this)[t.p.useProp?"prop":"attr"]("checked",!0):Q(this)[t.p.useProp?"prop":"attr"]("checked",!1)}):Q("[name="+Q.jgrid.jqID(e)+"]",d).val(i[e]))}})},FormToGrid:function(t,a,d,r){return this.each(function(){var e,i;this.grid&&(d=d||"set",r=r||"first",e=Q(a).serializeArray(),i={},Q.each(e,function(e,t){i[t.name]=t.value}),"add"===d?Q(this).jqGrid("addRowData",t,i,r):"set"===d&&Q(this).jqGrid("setRowData",t,i))})}})});