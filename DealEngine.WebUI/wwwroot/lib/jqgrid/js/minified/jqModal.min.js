!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(d){"use strict";d.fn.jqm=function(e){var t={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:f,ajaxText:"",target:f,modal:f,toTop:f,onShow:f,onHide:f,onLoad:f};return this.each(function(){if(this._jqm)return u[this._jqm].c=d.extend({},u[this._jqm].c,e);o++,this._jqm=o,u[o]={c:d.extend(t,d.jqm.params,e),a:f,w:d(this).addClass("jqmID"+o),s:o},t.trigger&&d(this).jqmAddTrigger(t.trigger)})},d.fn.jqmAddClose=function(e){return i(this,e,"jqmHide")},d.fn.jqmAddTrigger=function(e){return i(this,e,"jqmShow")},d.fn.jqmShow=function(e){return this.each(function(){d.jqm.open(this._jqm,e)})},d.fn.jqmHide=function(e){return this.each(function(){d.jqm.close(this._jqm,e)})},d.jqm={hash:{},open:function(e,t){var o,n,i=u[e],s=i.c,r="."+s.closeClass,a=0<(a=parseInt(i.w.css("z-index")))?a:3e3,c=d("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":a-1,opacity:s.overlay/100});return i.a||(i.t=t,i.a=!0,i.w.css("z-index",a),s.modal?(h[0]||setTimeout(function(){new j("bind")},1),h.push(e)):0<s.overlay?s.closeoverlay&&i.w.jqmAddClose(c):c=f,i.o=c?c.addClass(s.overlayClass).prependTo("body"):f,s.ajax?(o=s.target||i.w,n=s.ajax,o="string"==typeof o?d(o,i.w):d(o),n="@"===n.substr(0,1)?d(t).attr(n.substring(1)):n,o.html(s.ajaxText).load(n,function(){s.onLoad&&s.onLoad.call(this,i),r&&i.w.jqmAddClose(d(r,i.w)),m(i)})):r&&i.w.jqmAddClose(d(r,i.w)),s.toTop&&i.o&&i.w.before('<span id="jqmP'+i.w[0]._jqm+'"></span>').insertAfter(i.o),s.onShow?s.onShow(i):i.w.show(),m(i)),f},close:function(e){var t=u[e];return t.a&&(t.a=f,h[0]&&(h.pop(),h[0]||new j("unbind")),t.c.toTop&&t.o&&d("#jqmP"+t.w[0]._jqm).after(t.w).remove(),t.c.onHide?t.c.onHide(t):(t.w.hide(),t.o&&t.o.remove())),f},params:{}};var o=0,u=d.jqm.hash,h=[],f=!1,m=function(e){void 0===e.c.focusField&&(e.c.focusField=0),0<=e.c.focusField&&t(e)},t=function(e){try{d(":input:visible",e.w)[parseInt(e.c.focusField,10)].focus()}catch(e){}},j=function(e){d(document)[e]("keypress",n)[e]("keydown",n)[e]("mousedown",n)},n=function(o){var e=u[h[h.length-1]],n=!d(o.target).parents(".jqmID"+e.s)[0];return n&&d(".jqmID"+e.s).each(function(){var e=d(this),t=e.offset();if(t.top<=o.pageY&&o.pageY<=t.top+e.height()&&t.left<=o.pageX&&o.pageX<=t.left+e.width())return n=!1}),!n},i=function(e,t,o){return e.each(function(){var e=this._jqm;d(t).each(function(){this[o]||(this[o]=[],d(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])u[this[e][t]]&&u[this[e][t]].w[e](this);return f})),this[o].push(e)})})}});