!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],e):e(jQuery)}(function(U){"use strict";U.fn.jqFilter=function(e){if("string"==typeof e){var t=U.fn.jqFilter[e];if(!t)throw"jqFilter - No such method: "+e;var r=U.makeArray(arguments).slice(1);return t.apply(this,r)}var I=U.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,uniqueSearchFields:!1,direction:"ltr",addsubgrup:"Add subgroup",addrule:"Add rule",delgroup:"Delete group",delrule:"Delete rule",autoencode:!1,unaryOperations:[]},U.jgrid.filter,e||{});return this.each(function(){if(!this.filter){this.p=I,null!==this.p.filter&&void 0!==this.p.filter||(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),null!=this.p.sortStrategy&&U.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy);var e,t,r=this.p.columns.length,x=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p.initFilter=U.extend(!0,{},this.p.filter),r){for(e=0;e<r;e++)(t=this.p.columns[e]).stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),void 0===t.hidden&&(t.hidden=!1),t.label||(t.label=t.name),t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={}),void 0===t.search?t.inlist=!0:t.inlist=t.search;var q=function(){return U("#"+U.jgrid.jqID(I.id))[0]||null},a=q(),D=U.jgrid.styleUI[a.p.styleUI||"jQueryUI"].filter,w=U.jgrid.styleUI[a.p.styleUI||"jQueryUI"].common;this.p.showQuery&&U(this).append("<table class='queryresult "+D.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var i=function(e,t){var r=[!0,""],a=q();if(U.isFunction(t.searchrules))r=t.searchrules.call(a,e,t);else if(U.jgrid&&U.jgrid.checkValues)try{r=U.jgrid.checkValues.call(a,e,-1,t.searchrules,t.label)}catch(e){}r&&r.length&&!1===r[0]&&(I.error=!r[0],I.errmsg=r[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",!!U.isFunction(this.p.onChange)&&this.p.onChange.call(this,this.p)},this.reDraw=function(){U("table.group:first",this).remove();var e=this.createTableForGroup(I.filter,null);U(this).append(e),U.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(a,e){var s=this,t=U("<table class='group "+D.table_widget+" ui-search-table' style='border:0px none;'><tbody></tbody></table>"),r="left";"rtl"===this.p.direction&&(r="right",t.attr("dir","rtl")),null===e&&t.append("<tr class='error' style='display:none;'><th colspan='5' class='"+w.error+"' align='"+r+"'></th></tr>");var o=U("<tr></tr>");t.append(o);var i=U("<th colspan='5' align='"+r+"'></th>");if(o.append(i),!0===this.p.ruleButtons){var l=U("<select size='1' class='opsel "+D.srSelect+"'></select>");i.append(l);for(var n,p="",c=0;c<I.groupOps.length;c++)n=a.groupOp===s.p.groupOps[c].op?" selected='selected'":"",p+="<option value='"+s.p.groupOps[c].op+"'"+n+">"+s.p.groupOps[c].text+"</option>";l.append(p).on("change",function(){a.groupOp=U(l).val(),s.onchange()})}var u,d,h,f="<span></span>";if(this.p.groupButton&&(f=U("<input type='button' value='+ {}' title='"+s.p.subgroup+"' class='add-group "+w.button+"'/>")).on("click",function(){return void 0===a.groups&&(a.groups=[]),a.groups.push({groupOp:I.groupOps[0].op,rules:[],groups:[]}),s.reDraw(),s.onchange(),!1}),i.append(f),!0===this.p.ruleButtons&&((u=U("<input type='button' value='+' title='"+s.p.addrule+"' class='add-rule ui-add "+w.button+"'/>")).on("click",function(){for(void 0===a.rules&&(a.rules=[]),c=0;c<s.p.columns.length;c++){var e=void 0===s.p.columns[c].search||s.p.columns[c].search,t=!0===s.p.columns[c].hidden;if(!0===s.p.columns[c].searchoptions.searchhidden&&e||e&&!t){d=s.p.columns[c];break}}if(!d)return!1;var r=d.searchoptions.sopt?d.searchoptions.sopt:s.p.sopt?s.p.sopt:-1!==U.inArray(d.searchtype,s.p.strarr)?s.p.stropts:s.p.numopts;return a.rules.push({field:d.name,op:r[0],data:""}),s.reDraw(),!1}),i.append(u)),null!==e&&(h=U("<input type='button' value='-' title='"+s.p.delgroup+"' class='delete-group "+w.button+"'/>"),i.append(h),h.on("click",function(){for(c=0;c<e.groups.length;c++)if(e.groups[c]===a){e.groups.splice(c,1);break}return s.reDraw(),s.onchange(),!1})),void 0!==a.groups)for(c=0;c<a.groups.length;c++){var g=U("<tr></tr>");t.append(g);var m=U("<td class='first'></td>");g.append(m);var v=U("<td colspan='4'></td>");v.append(this.createTableForGroup(a.groups[c],a)),g.append(v)}void 0===a.groupOp&&(a.groupOp=s.p.groupOps[0].op);var y=s.p.ruleButtons&&s.p.uniqueSearchFields;if(y)for(j=0;j<s.p.columns.length;j++)s.p.columns[j].inlist&&(s.p.columns[j].search=!0);if(void 0!==a.rules)for(c=0;c<a.rules.length;c++)if(t.append(this.createTableRowForRule(a.rules[c],a)),y)for(var b=a.rules[c].field,j=0;j<s.p.columns.length;j++)if(b===s.p.columns[j].name){s.p.columns[j].search=!1;break}return t},this.createTableRowForRule=function(i,e){var l,n,p,t,c=this,u=q(),r=U("<tr></tr>"),a="";r.append("<td class='first'></td>");var s=U("<td class='columns'></td>");r.append(s);var d,h=U("<select size='1' class='"+D.srSelect+"'></select>"),f=[];s.append(h),h.on("change",function(){var e,t;for(c.p.ruleButtons&&c.p.uniqueSearchFields&&(e=parseInt(U(this).data("curr"),10),t=this.selectedIndex,0<=e&&(c.p.columns[e].search=!0,U(this).data("curr",t),c.p.columns[t].search=!1)),i.field=U(h).val(),n=U(this).parents("tr:first"),U(".data",n).empty(),g=0;g<c.p.columns.length;g++)if(c.p.columns[g].name===i.field){p=c.p.columns[g];break}if(p){p.searchoptions.id=U.jgrid.randId(),p.searchoptions.name=i.field,p.searchoptions.oper="filter",x&&"text"===p.inputtype&&(p.searchoptions.size||(p.searchoptions.size=10));var r=U.jgrid.createEl.call(u,p.inputtype,p.searchoptions,"",!0,c.p.ajaxSelectOptions||{},!0);U(r).addClass("input-elm "+D.srInput),l=p.searchoptions.sopt?p.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==U.inArray(p.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts;var a,s="",o=0;for(f=[],U.each(c.p.ops,function(){f.push(this.oper)}),g=0;g<l.length;g++)-1!==(d=U.inArray(l[g],f))&&(0===o&&(i.op=c.p.ops[d].oper),s+="<option value='"+c.p.ops[d].oper+"'>"+c.p.ops[d].text+"</option>",o++);U(".selectopts",n).empty().append(s),U(".selectopts",n)[0].selectedIndex=0,U.jgrid.msie()&&U.jgrid.msiever()<9&&(a=parseInt(U("select.selectopts",n)[0].offsetWidth,10)+1,U(".selectopts",n).width(a),U(".selectopts",n).css("width","auto")),U(".data",n).append(r),U.jgrid.bindEv.call(u,r,p.searchoptions),U(".input-elm",n).on("change",function(e){var t=e.target;"custom"===p.inputtype&&U.isFunction(p.searchoptions.custom_value)?i.data=p.searchoptions.custom_value.call(u,U(".customelement",this),"get"):i.data=U(t).val(),"select"===p.inputtype&&p.searchoptions.multiple&&(i.data=i.data.join(",")),c.onchange()}),setTimeout(function(){i.data=U(r).val(),("nu"===i.op||"nn"===i.op||0<=U.inArray(i.op,c.p.unaryOperations))&&(U(r).attr("readonly","true"),U(r).attr("disabled","true")),"select"===p.inputtype&&p.searchoptions.multiple&&U.isArray(i.data)&&(i.data=i.data.join(",")),c.onchange()},0)}});for(var o=0,g=0;g<c.p.columns.length;g++){var m=void 0===c.p.columns[g].search||c.p.columns[g].search,v=!0===c.p.columns[g].hidden;(!0===c.p.columns[g].searchoptions.searchhidden&&m||m&&!v)&&(t="",i.field===c.p.columns[g].name&&(t=" selected='selected'",o=g),a+="<option value='"+c.p.columns[g].name+"'"+t+">"+c.p.columns[g].label+"</option>")}h.append(a),h.data("curr",o);var y=U("<td class='operators'></td>");r.append(y),(p=I.columns[o]).searchoptions.id=U.jgrid.randId(),x&&"text"===p.inputtype&&(p.searchoptions.size||(p.searchoptions.size=10)),p.searchoptions.name=i.field,p.searchoptions.oper="filter";var b=U.jgrid.createEl.call(u,p.inputtype,p.searchoptions,i.data,!0,c.p.ajaxSelectOptions||{},!0);("nu"===i.op||"nn"===i.op||0<=U.inArray(i.op,c.p.unaryOperations))&&(U(b).attr("readonly","true"),U(b).attr("disabled","true"));var j=U("<select size='1' class='selectopts "+D.srSelect+"'></select>");for(y.append(j),j.on("change",function(){i.op=U(j).val(),n=U(this).parents("tr:first");var e=U(".input-elm",n)[0];"nu"===i.op||"nn"===i.op||0<=U.inArray(i.op,c.p.unaryOperations)?(i.data="","SELECT"!==e.tagName.toUpperCase()&&(e.value=""),e.setAttribute("readonly","true"),e.setAttribute("disabled","true")):("SELECT"===e.tagName.toUpperCase()&&(i.data=e.value),e.removeAttribute("readonly"),e.removeAttribute("disabled")),c.onchange()}),l=p.searchoptions.sopt?p.searchoptions.sopt:c.p.sopt?c.p.sopt:-1!==U.inArray(p.searchtype,c.p.strarr)?c.p.stropts:c.p.numopts,a="",U.each(c.p.ops,function(){f.push(this.oper)}),g=0;g<l.length;g++)-1!==(d=U.inArray(l[g],f))&&(t=i.op===c.p.ops[d].oper?" selected='selected'":"",a+="<option value='"+c.p.ops[d].oper+"'"+t+">"+c.p.ops[d].text+"</option>");j.append(a);var S=U("<td class='data'></td>");r.append(S),S.append(b),U.jgrid.bindEv.call(u,b,p.searchoptions),U(b).addClass("input-elm "+D.srInput).on("change",function(){i.data="custom"===p.inputtype?p.searchoptions.custom_value.call(u,U(".customelement",this),"get"):U(this).val(),c.onchange()});var F,O=U("<td></td>");return r.append(O),!0===this.p.ruleButtons&&(F=U("<input type='button' value='-' title='"+c.p.delrule+"' class='delete-rule ui-del "+w.button+"'/>"),O.append(F),F.on("click",function(){for(g=0;g<e.rules.length;g++)if(e.rules[g]===i){e.rules.splice(g,1);break}return c.reDraw(),c.onchange(),!1})),r},this.getStringForGroup=function(e){var t,r="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){1<r.length&&(r+=" "+e.groupOp+" ");try{r+=this.getStringForGroup(e.groups[t])}catch(e){alert(e)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)1<r.length&&(r+=" "+e.groupOp+" "),r+=this.getStringForRule(e.rules[t])}catch(e){alert(e)}return"()"===(r+=")")?"":r},this.getStringForRule=function(e){for(var t,r,a="",s="",o=0;o<this.p.ops.length;o++)if(this.p.ops[o].oper===e.op){a=this.p.operands.hasOwnProperty(e.op)?this.p.operands[e.op]:"",s=this.p.ops[o].oper;break}for(o=0;o<this.p.columns.length;o++)if(this.p.columns[o].name===e.field){t=this.p.columns[o];break}return void 0===t?"":(r=this.p.autoencode?U.jgrid.htmlEncode(e.data):e.data,"bw"!==s&&"bn"!==s||(r+="%"),"ew"!==s&&"en"!==s||(r="%"+r),"cn"!==s&&"nc"!==s||(r="%"+r+"%"),"in"!==s&&"ni"!==s||(r=" ("+r+")"),I.errorcheck&&i(e.data,t),-1!==U.inArray(t.searchtype,["int","integer","float","number","currency"])||"nn"===s||"nu"===s||0<=U.inArray(e.op,this.p.unaryOperations)?e.field+" "+a+" "+r:e.field+" "+a+' "'+r+'"')},this.resetFilter=function(){this.p.filter=U.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){U("th."+w.error,this).html(""),U("tr.error",this).hide()},this.showError=function(){U("th."+w.error,this).html(this.p.errmsg),U("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(I.filter)},this.toString=function(){var a=this;function s(e){if(a.p.errorcheck){for(var t,r=0;r<a.p.columns.length;r++)if(a.p.columns[r].name===e.field){t=a.p.columns[r];break}t&&i(e.data,t)}return e.op+"(item."+e.field+",'"+e.data+"')"}return function e(t){var r,a="(";if(void 0!==t.groups)for(r=0;r<t.groups.length;r++)1<a.length&&("OR"===t.groupOp?a+=" || ":a+=" && "),a+=e(t.groups[r]);if(void 0!==t.rules)for(r=0;r<t.rules.length;r++)1<a.length&&("OR"===t.groupOp?a+=" || ":a+=" && "),a+=s(t.rules[r]);return"()"==(a+=")")?"":a}(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},U.extend(U.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(r){var a=null;return void 0!==r&&this.each(function(e,t){t.p.hasOwnProperty(r)&&(a=t.p[r])}),a||this[0].p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(e){"string"==typeof e&&(e=U.jgrid.parse(e)),this.each(function(){this.p.filter=e,this.reDraw(),this.onchange()})}}),U.extend(U.jgrid,{filterRefactor:function(e){var t,r,a,s,o,i={};try{if((i="string"==typeof e.ruleGroup?U.jgrid.parse(e.ruleGroup):e.ruleGroup).rules&&i.rules.length)for(t=i.rules,r=0;r<t.length;r++)a=t[r],U.inArray(a.filed,e.ssfield)&&1<(s=a.data.split(e.splitSelect)).length&&(void 0===i.groups&&(i.groups=[]),o={groupOp:e.groupOpSelect,groups:[],rules:[]},i.groups.push(o),U.each(s,function(e){s[e]&&o.rules.push({data:s[e],op:a.op,field:a.field})}),t.splice(r,1),r--)}catch(e){}return i}}),U.jgrid.extend({filterToolbar:function(D){var r=U.jgrid.getRegional(this[0],"search");return D=U.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,onClearSearchValue:null,url:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",splitSelect:",",groupOpSelect:"OR",errorcheck:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"..."}},r,D||{}),this.each(function(){var x=this,q=[];if(!x.p.filterToolbar){if(U(x).data("filterToolbar")||U(x).data("filterToolbar",D),x.p.force_regional&&(D=U.extend(D,r)),void 0!==x.p.customFilterDef)for(var e in x.p.customFilterDef)x.p.customFilterDef.hasOwnProperty(e)&&!D.operands.hasOwnProperty(e)&&(D.odata.push({oper:e,text:x.p.customFilterDef[e].text}),D.operands[e]=x.p.customFilterDef[e].operand,!0===x.p.customFilterDef[e].unary&&q.push(e));var m,v,t,y=U.jgrid.styleUI[x.p.styleUI||"jQueryUI"].filter,d=U.jgrid.styleUI[x.p.styleUI||"jQueryUI"].common,b=U.jgrid.styleUI[x.p.styleUI||"jQueryUI"].base,j=function(){var t,r,a,s,e,o={},i=0,l={},n=!1,p=[],c=!1,u=[!0,"",""],d=!1;if(U.each(x.p.colModel,function(){var e=U("#gs_"+x.p.idPrefix+U.jgrid.jqID(this.name),!0===this.frozen&&!0===x.p.frozenColumns?x.grid.fhDiv:x.grid.hDiv);if(r=this.index||this.name,s=this.searchoptions||{},a=D.searchOperators&&s.searchOperMenu?e.parent().prev().children("a").attr("soper")||D.defaultSearch:s.sopt?s.sopt[0]:"select"===this.stype?"eq":D.defaultSearch,t="custom"===this.stype&&U.isFunction(s.custom_value)&&0<e.length?s.custom_value.call(x,e,"get"):e.val(),"select"===this.stype&&s.multiple&&U.isArray(t)&&(t=0<t.length?(n=!0,p.push(r),1===t.length?t[0]:t):""),this.searchrules&&D.errorcheck&&(U.isFunction(this.searchrules)?u=this.searchrules.call(x,t,this):U.jgrid&&U.jgrid.checkValues&&(u=U.jgrid.checkValues.call(x,t,-1,this.searchrules,this.label||this.name)),u&&u.length&&!1===u[0]))return this.searchrules.hasOwnProperty("validationError")&&(d=this.searchrules.validationError),!1;if("bt"===a&&(c=!0),t||"nu"===a||"nn"===a||0<=U.inArray(a,q))o[r]=t,l[r]=a,i++;else try{delete x.p.postData[r]}catch(e){}}),!1!==u[0]){var h,f=0<i;if(!0===D.stringResult||"local"===x.p.datatype||!0===D.searchOperators){var g,m,v,y,b,j,S='{"groupOp":"'+D.groupOp+'","rules":[',F=0;if(U.each(o,function(e,t){0<F&&(S+=","),S+='{"field":"'+e+'",',S+='"op":"'+l[e]+'",',S+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',F++}),S+="]}",n&&(g=U.jgrid.filterRefactor({ruleGroup:S,ssfield:p,splitSelect:D.splitSelect,groupOpSelect:D.groupOpSelect}),S=JSON.stringify(g)),c&&(U.isPlainObject(g)||(g=U.jgrid.parse(S)),g.rules&&g.rules.length))for(m=g.rules,v=0;v<m.length;v++)"bt"===(y=m[v]).op&&1<(b=y.data.split("...")).length&&(void 0===g.groups&&(g.groups=[]),j={groupOp:"AND",groups:[],rules:[]},g.groups.push(j),U.each(b,function(e){var t=0===e?"ge":"le";b[e]&&j.rules.push({data:b[e],op:t,field:y.field})}),m.splice(v,1),v--);(c||n)&&(S=JSON.stringify(g)),U.extend(x.p.postData,{filters:S}),U.each(["searchField","searchString","searchOper"],function(e,t){x.p.postData.hasOwnProperty(t)&&delete x.p.postData[t]})}else U.extend(x.p.postData,o);D.url&&(h=x.p.url,U(x).jqGrid("setGridParam",{url:D.url}));var O="stop"===U(x).triggerHandler("jqGridToolbarBeforeSearch");!O&&U.isFunction(D.beforeSearch)&&(O=D.beforeSearch.call(x)),O||U(x).jqGrid("setGridParam",{search:f}).trigger("reloadGrid",[{page:1}]),h&&U(x).jqGrid("setGridParam",{url:h}),U(x).triggerHandler("jqGridToolbarAfterSearch"),U.isFunction(D.afterSearch)&&D.afterSearch.call(x)}else{U.isFunction(d)?d.call(x,u[1]):(e=U.jgrid.getRegional(x,"errors"),U.jgrid.info_dialog(e.errcap,u[1],"",{styleUI:x.p.styleUI}))}},S=U("<tr class='ui-search-toolbar' role='row'></tr>");D.restoreFromFilters&&(t=x.p.postData.filters)&&("string"==typeof t&&(t=U.jgrid.parse(t)),v=!!t.rules.length&&t.rules),U.each(x.p.colModel,function(e){var t,r,a,s,o,i,l,n,p=this,c="",u="=",d=U("<th role='columnheader' class='"+b.headerBox+" ui-th-"+x.p.direction+"' id='gsh_"+x.p.id+"_"+p.name+"' ></th>"),h=U("<div></div>"),f=U("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");if(!0===this.hidden&&U(d).css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),this.searchoptions=this.searchoptions||{},void 0===this.searchoptions.searchOperMenu&&(this.searchoptions.searchOperMenu=!0),t=U.extend({},this.searchoptions,{name:p.index||p.name,id:"gs_"+x.p.idPrefix+p.name,oper:"search"}),this.search){if(D.restoreFromFilters&&v){n=!1;for(var g=0;g<v.length;g++){if(v[g].field)if((p.index||p.name)===v[g].field){n=v[g];break}}}if(D.searchOperators){for(r=t.sopt?t.sopt[0]:"select"===p.stype?"eq":D.defaultSearch,D.restoreFromFilters&&n&&(r=n.op),a=0;a<D.odata.length;a++)if(D.odata[a].oper===r){u=D.operands[r]||"";break}s=null!=t.searchtitle?t.searchtitle:D.operandTitle,c=this.searchoptions.searchOperMenu?"<a title='"+s+"' style='padding-right: 0.5em;' soper='"+r+"' class='soptclass' colname='"+this.name+"'>"+u+"</a>":""}switch(U("td:eq(0)",f).attr("columname",p.name).append(c),void 0===t.clearSearch&&(t.clearSearch=!0),t.clearSearch?(o=D.resetTitle||"Clear Search Value",U("td:eq(2)",f).append("<a title='"+o+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+D.resetIcon+"</a>")):U("td:eq(2)",f).hide(),this.surl&&(t.dataUrl=this.surl),i="",t.defaultValue&&(i=U.isFunction(t.defaultValue)?t.defaultValue.call(x):t.defaultValue),D.restoreFromFilters&&n&&(i=n.data),l=U.jgrid.createEl.call(x,this.stype,t,i,!1,U.extend({},U.jgrid.ajaxOptions,x.p.ajaxSelectOptions||{})),U(l).addClass(y.srInput),U("td:eq(1)",f).append(l),U(h).append(f),null==t.dataEvents&&(t.dataEvents=[]),this.stype){case"select":!0===D.autosearch&&t.dataEvents.push({type:"change",fn:function(){return j(),!1}});break;case"text":!0===D.autosearch&&(D.searchOnEnter?t.dataEvents.push({type:"keypress",fn:function(e){return 13===(e.charCode||e.keyCode||0)?(j(),!1):this}}):t.dataEvents.push({type:"keydown",fn:function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:m&&clearTimeout(m),m=setTimeout(function(){j()},D.autosearchDelay)}}}))}U.jgrid.bindEv.call(x,l,t)}U(d).append(h),U(S).append(d),D.searchOperators&&""!==c||U("td:eq(0)",f).hide()}),U("table thead",x.grid.hDiv).append(S),D.searchOperators&&(U(".soptclass",S).click(function(e){var t=U(this).offset();!function(a,e,t){U("#sopt_menu").remove(),e=parseInt(e,10),t=parseInt(t,10)+18;for(var r,s='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+(U(".ui-jqgrid").css("font-size")||"11px")+";left:"+e+"px;top:"+t+'px;">',o=U(a).attr("soper"),i=[],l=0,n=U(a).attr("colname"),p=x.p.colModel.length;l<p&&x.p.colModel[l].name!==n;)l++;var c=x.p.colModel[l],u=U.extend({},c.searchoptions);for(u.sopt||(u.sopt=[],u.sopt[0]="select"===c.stype?"eq":D.defaultSearch),U.each(D.odata,function(){i.push(this.oper)}),l=0;l<u.sopt.length;l++)-1!==(r=U.inArray(u.sopt[l],i))&&(s+='<li class="ui-menu-item '+(o===D.odata[r].oper?d.highlight:"")+'" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+D.odata[r].oper+'" oper="'+D.operands[D.odata[r].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+D.operands[D.odata[r].oper]+"</td><td>"+D.odata[r].text+"</td></tr></table></a></li>");s+="</ul>",U("body").append(s),U("#sopt_menu").addClass("ui-menu "+y.menu_widget),U("#sopt_menu > li > a").hover(function(){U(this).addClass(d.hover)},function(){U(this).removeClass(d.hover)}).click(function(){var e,t=U(this).attr("value"),r=U(this).attr("oper");U(x).triggerHandler("jqGridToolbarSelectOper",[t,r,a]),U("#sopt_menu").hide(),U(a).text(r).attr("soper",t),!0===D.autosearch&&(e=U(a).parent().next().children()[0],(U(e).val()||"nu"===t||"nn"===t||0<=U.inArray(t,q))&&j())})}(this,t.left,t.top),e.stopPropagation()}),U("body").on("click",function(e){"soptclass"!==e.target.className&&U("#sopt_menu").remove()})),U(".clearsearchclass",S).click(function(){for(var e,t,r=U(this).parents("tr:first"),a=U("td.ui-search-oper",r).attr("columname"),s=0,o=x.p.colModel.length,i=U("td.ui-search-oper a",r).attr("soper");s<o;){if(x.p.colModel[s].name===a){e=x.p.colModel[s];break}s++}var l,n,p=U.extend({},x.p.colModel[s].searchoptions||{}),c=p.defaultValue?p.defaultValue:"";"select"===x.p.colModel[s].stype?(l=U("td.ui-search-input select",r),c?l.val(c):l[0].selectedIndex=0):(l=U("td.ui-search-input input",r)).val(c),U(x).triggerHandler("jqGridToolbarClearVal",[l[0],s,p,c]),U.isFunction(D.onClearSearchValue)&&D.onClearSearchValue.call(x,l[0],s,p,c),("nu"===i||"nn"===i||0<=U.inArray(i,q))&&(t=p.sopt?p.sopt[0]:"select"===e.stype?"eq":D.defaultSearch,n=null!=x.p.customFilterDef&&null!=x.p.customFilterDef[t]?x.p.customFilterDef[t].operand:D.operands[t]||"",t===i?U("td.ui-search-oper a",r).attr("soper","dummy").text(n):U("td.ui-search-oper a",r).attr("soper",t).text(n)),!0===D.autosearch&&(j(),t===i&&U("td.ui-search-oper a",r).attr("soper",t).text(n))}),U(x.grid.hDiv).on("scroll",function(e){x.grid.bDiv.scrollLeft=x.grid.hDiv.scrollLeft}),this.p.filterToolbar=!0,this.triggerToolbar=j,this.clearToolbar=function(e){var r,a={},s=0;e="boolean"!=typeof e||e,U.each(x.p.colModel,function(){var t,e=U("#gs_"+x.p.idPrefix+U.jgrid.jqID(this.name),!0===this.frozen&&!0===x.p.frozenColumns?x.grid.fhDiv:x.grid.hDiv);switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(t=this.searchoptions.defaultValue),r=this.index||this.name,this.stype){case"select":if(e.find("option").each(function(e){if(0===e&&(this.selected=!0),U(this).val()===t)return!(this.selected=!0)}),void 0!==t)a[r]=t,s++;else try{delete x.p.postData[r]}catch(e){}break;case"text":if(e.val(t||""),void 0!==t)a[r]=t,s++;else try{delete x.p.postData[r]}catch(e){}break;case"custom":U.isFunction(this.searchoptions.custom_value)&&0<e.length&&this.searchoptions.custom_value.call(x,e,"set",t||"")}});var o,i,t,l=0<s;(x.p.resetsearch=!0)===D.stringResult||"local"===x.p.datatype?(o='{"groupOp":"'+D.groupOp+'","rules":[',i=0,U.each(a,function(e,t){0<i&&(o+=","),o+='{"field":"'+e+'",',o+='"op":"eq",',o+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',i++}),o+="]}",U.extend(x.p.postData,{filters:o}),U.each(["searchField","searchString","searchOper"],function(e,t){x.p.postData.hasOwnProperty(t)&&delete x.p.postData[t]})):U.extend(x.p.postData,a),D.url&&(t=x.p.url,U(x).jqGrid("setGridParam",{url:D.url}));var n="stop"===U(x).triggerHandler("jqGridToolbarBeforeClear");!n&&U.isFunction(D.beforeClear)&&(n=D.beforeClear.call(x)),n||e&&U(x).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]),t&&U(x).jqGrid("setGridParam",{url:t}),U(x).triggerHandler("jqGridToolbarAfterClear"),U.isFunction(D.afterClear)&&D.afterClear()},this.toggleToolbar=function(){var e=U("tr.ui-search-toolbar",x.grid.hDiv);!0===x.p.frozenColumns&&U(x).jqGrid("destroyFrozenColumns"),"none"===e.css("display")?e.show():e.hide(),!0===x.p.frozenColumns&&U(x).jqGrid("setFrozenColumns")}}})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.p.filterToolbar=!1,U(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},refreshFilterToolbar:function(f){return f=U.extend(!0,{filters:"",onClearVal:null,onSetVal:null},f||{}),this.each(function(){var s,o,i,e,l,n,p,c=this,u=c.p.colModel,d=c.p.colModel.length,h=[];if(c.p.filterToolbar){for(o=U(c).data("filterToolbar"),s=0;s<d;s++){switch(h.push(u[s].name),i=U("#gs_"+c.p.idPrefix+U.jgrid.jqID(u[s].name)),u[s].stype){case"select":case"text":i.val("")}U.isFunction(f.onClearVal)&&f.onClearVal.call(c,i,u[s].name)}"string"==typeof f.filters&&(f.filters.length?e=f.filters:c.p.postData.hasOwnProperty("filters")&&(e=c.p.postData.filters),e=U.jgrid.parse(e)),U.isPlainObject(e)&&function e(t){if(t&&t.rules){for(l=t.rules,d=l.length,s=0;s<d;s++){var r;n=l[s],-1!==(p=U.inArray(n.field,h))&&0<(i=U("#gs_"+c.p.idPrefix+U.jgrid.jqID(u[p].name))).length&&("select"===u[p].stype?i.find("option[value='"+U.jgrid.jqID(n.data)+"']").prop("selected",!0):"text"===u[p].stype&&i.val(n.data),U.isFunction(f.onSetVal)&&f.onSetVal.call(c,i,u[p].name),o&&o.searchOperators&&(r=i.parent().prev()).hasClass("ui-search-oper")&&(U(".soptclass",r).attr("soper",n.op),o.operands.hasOwnProperty(n.op)&&U(".soptclass",r).html(o.operands[n.op])))}if(t.groups)for(var a=0;a<t.groups.length;a++)e(t.groups[a])}}(e)}})},searchGrid:function(R){var e=U.jgrid.getRegional(this[0],"search");return R=U.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,splitSelect:",",groupOpSelect:"OR",operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"},buttons:[]},e,R||{}),this.each(function(){var s=this;if(s.grid){var a,o="fbox_"+s.p.id,t=!0,i=!0,l={themodal:"searchmod"+o,modalhead:"searchhd"+o,modalcontent:"searchcnt"+o,scrollelm:o},r=U.isPlainObject(s.p_savedFilter)&&!U.isEmptyObject(s.p_savedFilter)?s.p_savedFilter:s.p.postData[R.sFilter],e=[],n=U.jgrid.styleUI[s.p.styleUI||"jQueryUI"].filter,p=U.jgrid.styleUI[s.p.styleUI||"jQueryUI"].common;if(R.styleUI=s.p.styleUI,"string"==typeof r&&(r=U.jgrid.parse(r)),!0===R.recreateFilter&&U("#"+U.jgrid.jqID(l.themodal)).remove(),void 0!==U("#"+U.jgrid.jqID(l.themodal))[0])E(U("#fbox_"+U.jgrid.jqID(s.p.id)));else{var c=U("<div><div id='"+o+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+U.jgrid.jqID(s.p.id)),u="left",d="";"rtl"===s.p.direction&&(u="right",d=" style='text-align:left'",c.attr("dir","rtl"));var h,f,g=U.extend([],s.p.colModel),m="<a id='"+o+"_search' class='fm-button "+p.button+" fm-button-icon-right ui-search'><span class='"+p.icon_base+" "+n.icon_search+"'></span>"+R.Find+"</a>",v="<a id='"+o+"_reset' class='fm-button "+p.button+" fm-button-icon-left ui-reset'><span class='"+p.icon_base+" "+n.icon_reset+"'></span>"+R.Reset+"</a>",y="",b="",j=!1,S=-1,F=!1,O=[];R.showQuery&&(y="<a id='"+o+"_query' class='fm-button "+p.button+" fm-button-icon-left'><span class='"+p.icon_base+" "+n.icon_query+"'></span>Query</a>");var x,q,D=U.jgrid.buildButtons(R.buttons,y+m,p),w=null;s.p.groupHeader&&0<s.p.groupHeader.length&&(x=U("table.ui-jqgrid-htable",s.grid.hDiv).find(".jqg-second-row-header"),q=s.p.groupHeader.length,void 0!==x[0]&&(w=s.p.groupHeader[q-1]));var I,_=function(e,t){for(var r=t.length,a=0;a<r;a++)if(t[a].startColumnName===e)return a;return-1};if(R.columns.length)g=R.columns,h=g[S=0].index||g[0].name;else{if(null!==w)for(var C=0;C<g.length;C++){var k=_(g[C].name,w.groupHeaders);if(0<=k){g[C].label=w.groupHeaders[k].titleText+"::"+s.p.colNames[C];for(var G=1;G<=w.groupHeaders[k].numberOfColumns-1;G++)g[C+G].label=w.groupHeaders[k].titleText+"::"+s.p.colNames[C+G];C=C+w.groupHeaders[k].numberOfColumns-1}}U.each(g,function(e,t){var r,a;t.label||(t.label=s.p.colNames[e]),j||(r=void 0===t.search||t.search,a=!0===t.hidden,(t.searchoptions&&!0===t.searchoptions.searchhidden&&r||r&&!a)&&(j=!0,h=t.index||t.name,S=e)),"select"===t.stype&&t.searchoptions&&t.searchoptions.multiple&&(F=!0,O.push(t.index||t.name))})}if((!r&&h||!1===R.multipleSearch)&&(I="eq",0<=S&&g[S].searchoptions&&g[S].searchoptions.sopt?I=g[S].searchoptions.sopt[0]:R.sopt&&R.sopt.length&&(I=R.sopt[0]),r={groupOp:"AND",rules:[{field:h,op:I,data:""}]}),j=!1,R.tmplNames&&R.tmplNames.length&&(j=!0,b="<tr><td class='ui-search-label'>"+R.tmplLabel+"</td>",b+="<td><select size='1' class='ui-template "+n.srSelect+"'>",b+="<option value='default'>Default</option>",U.each(R.tmplNames,function(e,t){b+="<option value='"+e+"'>"+t+"</option>"}),b+="</select></td></tr>"),void 0!==s.p.customFilterDef)for(var T in s.p.customFilterDef)s.p.customFilterDef.hasOwnProperty(T)&&!R.operands.hasOwnProperty(T)&&(R.odata.push({oper:T,text:s.p.customFilterDef[T].text}),R.operands[T]=s.p.customFilterDef[T].operand,!0===s.p.customFilterDef[T].unary&&e.push(T));f="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+o+"_2'><tbody><tr><td colspan='2'><hr class='"+p.content+"' style='margin:1px'/></td></tr>"+b+"<tr><td class='EditButton' style='text-align:"+u+"'>"+v+"</td><td class='EditButton' "+d+">"+D+"</td></tr></tbody></table>",o=U.jgrid.jqID(o),U("#"+o).jqFilter({columns:g,sortStrategy:R.sortStrategy,filter:R.loadDefaults?r:null,showQuery:R.showQuery,errorcheck:R.errorcheck,sopt:R.sopt,groupButton:R.multipleGroup,ruleButtons:R.multipleSearch,uniqueSearchFields:R.uniqueSearchFields,afterRedraw:R.afterRedraw,ops:R.odata,operands:R.operands,ajaxSelectOptions:s.p.ajaxSelectOptions,groupOps:R.groupOps,addsubgrup:R.addsubgrup,addrule:R.addrule,delgroup:R.delgroup,delrule:R.delrule,autoencode:s.p.autoencode,unaryOperations:e,onChange:function(){this.p.showQuery&&U(".query",this).html(this.toUserFriendlyString()),U.isFunction(R.afterChange)&&R.afterChange.call(s,U("#"+o),R)},direction:s.p.direction,id:s.p.id}),c.append(f),U("#"+o+"_2").find("[data-index]").each(function(){var t=parseInt(U(this).attr("data-index"),10);0<=t&&U(this).on("click",function(e){R.buttons[t].click.call(s,U("#"+o),R,e)})}),j&&R.tmplFilters&&R.tmplFilters.length&&U(".ui-template",c).on("change",function(){var e=U(this).val();return"default"===e?U("#"+o).jqFilter("addFilter",r):U("#"+o).jqFilter("addFilter",R.tmplFilters[parseInt(e,10)]),!1}),!0===R.multipleGroup&&(R.multipleSearch=!0),U(s).triggerHandler("jqGridFilterInitialize",[U("#"+o)]),U.isFunction(R.onInitializeSearch)&&R.onInitializeSearch.call(s,U("#"+o)),R.gbox="#gbox_"+o;var A=U(".ui-jqgrid").css("font-size")||"11px";R.layer?U.jgrid.createModal(l,c,R,"#gview_"+U.jgrid.jqID(s.p.id),U("#gbox_"+U.jgrid.jqID(s.p.id))[0],"string"==typeof R.layer?"#"+U.jgrid.jqID(R.layer):R.layer,"string"==typeof R.layer?{position:"relative","font-size":A}:{"font-size":A}):U.jgrid.createModal(l,c,R,"#gview_"+U.jgrid.jqID(s.p.id),U("#gbox_"+U.jgrid.jqID(s.p.id))[0],null,{"font-size":A}),(R.searchOnEnter||R.closeOnEscape)&&U("#"+U.jgrid.jqID(l.themodal)).keydown(function(e){var t=U(e.target);return!R.searchOnEnter||13!==e.which||t.hasClass("add-group")||t.hasClass("add-rule")||t.hasClass("delete-group")||t.hasClass("delete-rule")||t.hasClass("fm-button")&&t.is("[id$=_query]")?R.closeOnEscape&&27===e.which?(U("#"+U.jgrid.jqID(l.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:(U("#"+o+"_search").click(),!1)}),y&&U("#"+o+"_query").on("click",function(){return U(".queryresult",c).toggle(),!1}),void 0===R.stringResult&&(R.stringResult=R.multipleSearch),U("#"+o+"_search").on("click",function(){var e,t,r={};if((a=U("#"+o)).find(".input-elm:focus").change(),F&&R.multipleSearch?(s.p_savedFilter={},t=U.jgrid.filterRefactor({ruleGroup:U.extend(!0,{},a.jqFilter("filterData")),ssfield:O,splitSelect:R.splitSelect,groupOpSelect:R.groupOpSelect}),s.p_savedFilter=U.extend(!0,{},a.jqFilter("filterData"))):t=a.jqFilter("filterData"),R.errorcheck&&(a[0].hideError(),R.showQuery||a.jqFilter("toSQLString"),a[0].p.error))return a[0].showError(),!1;if(R.stringResult){try{e=JSON.stringify(t)}catch(e){}"string"==typeof e&&(r[R.sFilter]=e,U.each([R.sField,R.sValue,R.sOper],function(){r[this]=""}))}else R.multipleSearch?(r[R.sFilter]=t,U.each([R.sField,R.sValue,R.sOper],function(){r[this]=""})):(r[R.sField]=t.rules[0].field,r[R.sValue]=t.rules[0].data,r[R.sOper]=t.rules[0].op,r[R.sFilter]="");return s.p.search=!0,U.extend(s.p.postData,r),void 0===(i=U(s).triggerHandler("jqGridFilterSearch"))&&(i=!0),i&&U.isFunction(R.onSearch)&&(i=R.onSearch.call(s,s.p.filters)),!1!==i&&U(s).trigger("reloadGrid",[{page:1}]),R.closeAfterSearch&&U.jgrid.hideModal("#"+U.jgrid.jqID(l.themodal),{gb:"#gbox_"+U.jgrid.jqID(s.p.id),jqm:R.jqModal,onClose:R.onClose}),!1}),U("#"+o+"_reset").on("click",function(){var e={},t=U("#"+o);return s.p.search=!1,!(s.p.resetsearch=!0)===R.multipleSearch?e[R.sField]=e[R.sValue]=e[R.sOper]="":e[R.sFilter]="",t[0].resetFilter(),j&&U(".ui-template",c).val("default"),U.extend(s.p.postData,e),void 0===(i=U(s).triggerHandler("jqGridFilterReset"))&&(i=!0),i&&U.isFunction(R.onReset)&&(i=R.onReset.call(s)),!1!==i&&U(s).trigger("reloadGrid",[{page:1}]),R.closeAfterReset&&U.jgrid.hideModal("#"+U.jgrid.jqID(l.themodal),{gb:"#gbox_"+U.jgrid.jqID(s.p.id),jqm:R.jqModal,onClose:R.onClose}),!1}),E(U("#"+o)),U(".fm-button:not(."+p.disabled+")",c).hover(function(){U(this).addClass(p.hover)},function(){U(this).removeClass(p.hover)})}}function E(e){void 0===(t=U(s).triggerHandler("jqGridFilterBeforeShow",[e]))&&(t=!0),t&&U.isFunction(R.beforeShowSearch)&&(t=R.beforeShowSearch.call(s,e)),t&&(U.jgrid.viewModal("#"+U.jgrid.jqID(l.themodal),{gbox:"#gbox_"+U.jgrid.jqID(s.p.id),jqm:R.jqModal,modal:R.modal,overlay:R.overlay,toTop:R.toTop}),U(s).triggerHandler("jqGridFilterAfterShow",[e]),U.isFunction(R.afterShowSearch)&&R.afterShowSearch.call(s,e))}})},filterInput:function(l,n){return n=U.extend(!0,{defaultSearch:"cn",groupOp:"OR",searchAll:!1,beforeSearch:null,afterSearch:null},n||{}),this.each(function(){var e,t,r,a,s,o,i=this;i.grid&&(r='{"groupOp":"'+n.groupOp+'","rules":[',a=0,l+="","local"===i.p.datatype&&(U.each(i.p.colModel,function(){e=this.index||this.name,t=this.searchoptions||{},s=!n.defaultSearch&&t.sopt?t.sopt[0]:n.defaultSearch,this.search=!1!==this.search,(this.search||n.searchAll)&&(0<a&&(r+=","),r+='{"field":"'+e+'",',r+='"op":"'+s+'",',r+='"data":"'+l.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',a++)}),r+="]}",U.extend(i.p.postData,{filters:r}),U.each(["searchField","searchString","searchOper"],function(e,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]}),!(o="stop"===U(i).triggerHandler("jqGridFilterInputBeforeSearch"))&&U.isFunction(n.beforeSearch)&&(o=n.beforeSearch.call(i)),o||U(i).jqGrid("setGridParam",{search:!0}).trigger("reloadGrid",[{page:1}]),U(i).triggerHandler("jqGridFilterInputAfterSearch"),U.isFunction(n.afterSearch)&&n.afterSearch.call(i)))})},autoSelect:function(c){return c=U.extend(!0,{field:"",direction:"asc",src_date:"Y-m-d",allValues:"All",count_item:!0,create_value:!0},c||{}),this.each(function(){var e,t=this,r="";if(c.field&&t.p.data&&U.isArray(t.p.data)){var a,s,o,i,l,n,p=[];try{n=(l=U.jgrid.from.call(t,t.p.data).groupBy(c.field,c.direction,"text",c.src_date)).length}catch(e){}if(l&&l.length){for(a=U("#gsh_"+t.p.id+"_"+c.field).find("td.ui-search-input > select"),n=l.length,c.allValues&&(r="<option value=''>"+c.allValues+"</option>",p.push(":"+c.allValues));n--;)e=l[n],s=c.count_item?" ("+e.items.length+")":"",r+="<option value='"+e.unique+"'>"+e.unique+s+"</option>",p.push(e.unique+":"+e.unique+s);if(a.append(r),a.on("change",function(){t.triggerToolbar()}),c.create_value){for(n=0,i=t.p.colModel.length;n<i;n++)if(t.p.colModel[n].name===c.field){o=t.p.colModel[n];break}o&&(o.searchoptions?U.extend(o.searchoptions,{value:p.join(";")}):(o.searchoptions={},o.searchoptions.value=p.join(";")))}}}})}})});