!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],e):e(jQuery)}(function(Q){"use strict";var X={};Q.jgrid.extend({editGridRow:function(H,V){var e=Q.jgrid.getRegional(this[0],"edit"),t=this[0].p.styleUI,L=Q.jgrid.styleUI[t].formedit,W=Q.jgrid.styleUI[t].common;return V=Q.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:W.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},e,V||{}),X[Q(this)[0].p.id]=V,this.each(function(){var f,e,g,v,t,i,a,b,j,y,w,d,r,o,q,n,l,s,c,p,u,h,m,D,x,_,I,k,C,F,G,O,S,P,E=this;function M(){var e,t,d={};for(e in Q(g).find(".FormElement").each(function(){var e,t=Q(".customelement",this);if(t.length){var i=t[0],a=Q(i).attr("name");Q.each(E.p.colModel,function(){if(this.name===a&&this.editoptions&&Q.isFunction(this.editoptions.custom_value)){try{if(b[a]=this.editoptions.custom_value.call(E,Q("#"+Q.jgrid.jqID(a),g),"get"),void 0===b[a])throw"e1"}catch(e){"e1"===e?Q.jgrid.info_dialog(w.errcap,"function 'custom_value' "+X[Q(this)[0]].p.msg.novalue,X[Q(this)[0]].p.bClose,{styleUI:X[Q(this)[0]].p.styleUI}):Q.jgrid.info_dialog(w.errcap,e.message,X[Q(this)[0]].p.bClose,{styleUI:X[Q(this)[0]].p.styleUI})}return!0}})}else{switch(Q(this).get(0).type){case"checkbox":Q(this).is(":checked")?b[this.name]=Q(this).val():(e=Q(this).attr("offval"),b[this.name]=e);break;case"select-one":b[this.name]=Q(this).val();break;case"select-multiple":b[this.name]=Q(this).val(),b[this.name]=b[this.name]?b[this.name].join(","):"";break;case"radio":if(d.hasOwnProperty(this.name))return!0;d[this.name]=void 0===Q(this).attr("offval")?"off":Q(this).attr("offval");break;default:b[this.name]=Q(this).val()}E.p.autoencode&&(b[this.name]=Q.jgrid.htmlEncode(b[this.name]))}}),d){d.hasOwnProperty(e)&&(t=Q('input[name="'+e+'"]:checked',g).val(),b[e]=void 0!==t?t:d[e],E.p.autoencode&&(b[e]=Q.jgrid.htmlEncode(b[e])))}return 1}function A(i,a,d){var r,o,e,t,n,l,s=0;(X[E.p.id].checkOnSubmit||X[E.p.id].checkOnUpdate)&&(E.p.savedData={},E.p.savedData[a.p.id+"_id"]=i);var c=a.p.colModel;if("_empty"===i)return Q(c).each(function(){r=this.name,t=Q.extend({},this.editoptions||{}),(e=Q("#"+Q.jgrid.jqID(r),d))&&e.length&&null!==e[0]&&(n="","custom"===this.edittype&&Q.isFunction(t.custom_value)?t.custom_value.call(E,Q("#"+r,d),"set",n):t.defaultValue?(n=Q.isFunction(t.defaultValue)?t.defaultValue.call(E):t.defaultValue,"checkbox"===e[0].type?(l=n.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=n):(e[0].checked=!1,e[0].defaultChecked=!1):e.val(n)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,n=Q(e).attr("offval")):e[0].type&&"select"===e[0].type.substr(0,6)?e[0].selectedIndex=0:e.val(n),!0!==X[E.p.id].checkOnSubmit&&!X[E.p.id].checkOnUpdate||(E.p.savedData[r]=n))}),void Q("#id_g",d).val(i);var p=Q(a).jqGrid("getInd",i,!0);p&&(Q('td[role="gridcell"]',p).each(function(t){if("cb"!==(r=c[t].name)&&"subgrid"!==r&&"rn"!==r&&!0===c[t].editable){if(r===a.p.ExpandColumn&&!0===a.p.treeGrid)o=Q(this).text();else try{o=Q.unformat.call(a,Q(this),{rowId:i,colModel:c[t]},t)}catch(e){o="textarea"===c[t].edittype?Q(this).text():Q(this).html()}switch(E.p.autoencode&&(o=Q.jgrid.htmlDecode(o)),!0!==X[E.p.id].checkOnSubmit&&!X[E.p.id].checkOnUpdate||(E.p.savedData[r]=o),r=Q.jgrid.jqID(r),c[t].edittype){case"select":var e=o.split(","),e=Q.map(e,function(e){return Q.trim(e)});Q("#"+r+" option",d).each(function(){!(c[t].editoptions.multiple||Q.trim(o)!==Q.trim(Q(this).text())&&e[0]!==Q.trim(Q(this).text())&&e[0]!==Q.trim(Q(this).val()))||c[t].editoptions.multiple&&(-1<Q.inArray(Q.trim(Q(this).text()),e)||-1<Q.inArray(Q.trim(Q(this).val()),e))?this.selected=!0:this.selected=!1}),!0!==X[E.p.id].checkOnSubmit&&!X[E.p.id].checkOnUpdate||(o=Q("#"+r,d).val(),c[t].editoptions.multiple&&(o=o.join(",")),E.p.savedData[r]=o);break;case"checkbox":o=String(o),c[t].editoptions&&c[t].editoptions.value?c[t].editoptions.value.split(":")[0]===o?Q("#"+r,d)[E.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):Q("#"+r,d)[E.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1}):(o=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?(Q("#"+r,d)[E.p.useProp?"prop":"attr"]("checked",!0),Q("#"+r,d)[E.p.useProp?"prop":"attr"]("defaultChecked",!0)):(Q("#"+r,d)[E.p.useProp?"prop":"attr"]("checked",!1),Q("#"+r,d)[E.p.useProp?"prop":"attr"]("defaultChecked",!1)),!0!==X[E.p.id].checkOnSubmit&&!X[E.p.id].checkOnUpdate||(o=Q("#"+r,d).is(":checked")?Q("#"+r,d).val():Q("#"+r,d).attr("offval"),E.p.savedData[r]=o);break;case"custom":try{if(!c[t].editoptions||!Q.isFunction(c[t].editoptions.custom_value))throw"e1";c[t].editoptions.custom_value.call(E,Q("#"+r,d),"set",o)}catch(e){"e1"===e?Q.jgrid.info_dialog(w.errcap,"function 'custom_value' "+X[Q(this)[0]].p.msg.nodefined,Q.rp_ge[Q(this)[0]].p.bClose,{styleUI:X[Q(this)[0]].p.styleUI}):Q.jgrid.info_dialog(w.errcap,e.message,Q.rp_ge[Q(this)[0]].p.bClose,{styleUI:X[Q(this)[0]].p.styleUI})}break;default:("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),Q("#"+r,d).val(o)}s++}}),0<s&&(Q("#id_g",g).val(i),!0!==X[E.p.id].checkOnSubmit&&!X[E.p.id].checkOnUpdate||(E.p.savedData[a.p.id+"_id"]=i)))}function B(){var a,d,r,e,o,t,i,n,l=[!0,"",""],s={},c=E.p.prmNames,p=Q(E).triggerHandler("jqGridAddEditBeforeCheckValues",[b,Q(P),j]);if(p&&"object"==typeof p&&(b=p),Q.isFunction(X[E.p.id].beforeCheckValues)&&(p=X[E.p.id].beforeCheckValues.call(E,b,Q(P),j))&&"object"==typeof p&&(b=p),!X[E.p.id].html5Check||Q.jgrid.validateForm(q[0])){for(e in b)if(b.hasOwnProperty(e)&&!1===(l=Q.jgrid.checkValues.call(E,b[e],e))[0])break;if(Q.each(E.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&b.hasOwnProperty(t.name)&&""===b[t.name]&&(b[t.name]="null")}),l[0]&&(void 0===(s=Q(E).triggerHandler("jqGridAddEditClickSubmit",[X[E.p.id],b,j]))&&Q.isFunction(X[E.p.id].onclickSubmit)&&(s=X[E.p.id].onclickSubmit.call(E,X[E.p.id],b,j)||{}),void 0===(l=Q(E).triggerHandler("jqGridAddEditBeforeSubmit",[b,Q(P),j]))&&(l=[!0,"",""]),l[0]&&Q.isFunction(X[E.p.id].beforeSubmit)&&(l=X[E.p.id].beforeSubmit.call(E,b,Q(P),j))),l[0]&&!X[E.p.id].processing){if(X[E.p.id].processing=!0,Q("#sData",g+"_2").addClass(W.active),i=X[E.p.id].url||Q(E).jqGrid("getGridParam","editurl"),r=c.oper,d="clientArray"===i?E.p.keyName:c.id,b[r]="_empty"===Q.trim(b[E.p.id+"_id"])?c.addoper:c.editoper,b[r]===c.addoper&&void 0!==b[d]||(b[d]=b[E.p.id+"_id"]),delete b[E.p.id+"_id"],b=Q.extend(b,X[E.p.id].editData,s),!0===E.p.treeGrid)for(t in b[r]===c.addoper&&(o=Q(E).jqGrid("getGridParam","selrow"),n="adjacency"===E.p.treeGridModel?E.p.treeReader.parent_id_field:"parent_id",b[n]=o),E.p.treeReader)if(E.p.treeReader.hasOwnProperty(t)){var u=E.p.treeReader[t];if(b.hasOwnProperty(u)){if(b[r]===c.addoper&&"parent_id_field"===t)continue;delete b[u]}}b[d]=Q.jgrid.stripPref(E.p.idPrefix,b[d]);var h,m=Q.extend({url:i,type:X[E.p.id].mtype,data:Q.isFunction(X[E.p.id].serializeEditData)?X[E.p.id].serializeEditData.call(E,b):b,complete:function(e,t){var i;if(Q("#sData",g+"_2").removeClass(W.active),b[d]=E.p.idPrefix+b[d],300<=e.status&&304!==e.status?(l[0]=!1,l[1]=Q(E).triggerHandler("jqGridAddEditErrorTextFormat",[e,j]),Q.isFunction(X[E.p.id].errorTextFormat)?l[1]=X[E.p.id].errorTextFormat.call(E,e,j):l[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(void 0===(l=Q(E).triggerHandler("jqGridAddEditAfterSubmit",[e,b,j]))&&(l=[!0,"",""]),l[0]&&Q.isFunction(X[E.p.id].afterSubmit)&&(l=X[E.p.id].afterSubmit.call(E,e,b,j))),!1===l[0])Q(".FormError",P).html(l[1]),Q(".FormError",P).show();else if(E.p.autoencode&&Q.each(b,function(e,t){b[e]=Q.jgrid.htmlDecode(t)}),b[r]===c.addoper?(l[2]||(l[2]=Q.jgrid.randId()),null==b[d]||b[d]===E.p.idPrefix+"_empty"||""===b[d]?b[d]=l[2]:l[2]=b[d],X[E.p.id].reloadAfterSubmit?Q(E).trigger("reloadGrid"):!0===E.p.treeGrid?Q(E).jqGrid("addChildNode",l[2],o,b):Q(E).jqGrid("addRowData",l[2],b,V.addedrow),X[E.p.id].closeAfterAdd?(!0!==E.p.treeGrid&&Q(E).jqGrid("setSelection",l[2]),Q.jgrid.hideModal("#"+Q.jgrid.jqID(v.themodal),{gb:"#gbox_"+Q.jgrid.jqID(f),jqm:V.jqModal,onClose:X[E.p.id].onClose,removemodal:X[E.p.id].removemodal,formprop:!X[E.p.id].recreateForm,form:X[E.p.id].form})):X[E.p.id].clearAfterAdd&&A("_empty",E,P)):(X[E.p.id].reloadAfterSubmit?(Q(E).trigger("reloadGrid"),X[E.p.id].closeAfterEdit||setTimeout(function(){Q(E).jqGrid("setSelection",b[d])},1e3)):!0===E.p.treeGrid?Q(E).jqGrid("setTreeRow",b[d],b):Q(E).jqGrid("setRowData",b[d],b),X[E.p.id].closeAfterEdit&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(v.themodal),{gb:"#gbox_"+Q.jgrid.jqID(f),jqm:V.jqModal,onClose:X[E.p.id].onClose,removemodal:X[E.p.id].removemodal,formprop:!X[E.p.id].recreateForm,form:X[E.p.id].form})),(Q.isFunction(X[E.p.id].afterComplete)||Q._data(Q(E)[0],"events").hasOwnProperty("jqGridAddEditAfterComplete"))&&(a=e,setTimeout(function(){Q(E).triggerHandler("jqGridAddEditAfterComplete",[a,b,Q(P),j]);try{X[E.p.id].afterComplete.call(E,a,b,Q(P),j)}catch(e){}a=null},500)),(X[E.p.id].checkOnSubmit||X[E.p.id].checkOnUpdate)&&(Q(P).data("disabled",!1),"_empty"!==E.p.savedData[E.p.id+"_id"]))for(i in E.p.savedData)E.p.savedData.hasOwnProperty(i)&&b[i]&&(E.p.savedData[i]=b[i]);X[E.p.id].processing=!1;try{Q(":input:visible",P)[0].focus()}catch(e){}}},Q.jgrid.ajaxOptions,X[E.p.id].ajaxEditOptions);m.url||X[E.p.id].useDataProxy||(Q.isFunction(E.p.dataProxy)?X[E.p.id].useDataProxy=!0:(l[0]=!1,l[1]+=" "+w.nourl)),l[0]&&(X[E.p.id].useDataProxy?(void 0===(h=E.p.dataProxy.call(E,m,"set_"+E.p.id))&&(h=[!0,""]),!1===h[0]?(l[0]=!1,l[1]=h[1]||"Error deleting the selected row!"):(m.data.oper===c.addoper&&X[E.p.id].closeAfterAdd&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(v.themodal),{gb:"#gbox_"+Q.jgrid.jqID(f),jqm:V.jqModal,onClose:X[E.p.id].onClose,removemodal:X[E.p.id].removemodal,formprop:!X[E.p.id].recreateForm,form:X[E.p.id].form}),m.data.oper===c.editoper&&X[E.p.id].closeAfterEdit&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(v.themodal),{gb:"#gbox_"+Q.jgrid.jqID(f),jqm:V.jqModal,onClose:X[E.p.id].onClose,removemodal:X[E.p.id].removemodal,formprop:!X[E.p.id].recreateForm,form:X[E.p.id].form}))):"clientArray"===m.url?(X[E.p.id].reloadAfterSubmit=!1,b=m.data,m.complete({status:200,statusText:""},"")):Q.ajax(m))}!1===l[0]&&(Q(".FormError",P).html(l[1]),Q(".FormError",P).show())}}function R(e,t){var i,a=!1;if(!(a=!(Q.isPlainObject(e)&&Q.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i)){a=!0;break}if(e[i]!==t[i]){a=!0;break}}return a}function U(){var e=!0;return Q(".FormError",P).hide(),X[E.p.id].checkOnUpdate&&(b={},M(),R(b,E.p.savedData)&&(Q(P).data("disabled",!0),Q(".confirm","#"+v.themodal).show(),e=!1)),e}function T(e,t){var i=t[1].length-1;0===e||void 0!==t[1][e-1]&&Q("#"+Q.jgrid.jqID(t[1][e-1])).hasClass(W.disabled)?Q("#pData",S).addClass(W.disabled):Q("#pData",S).removeClass(W.disabled),e===i||void 0!==t[1][e+1]&&Q("#"+Q.jgrid.jqID(t[1][e+1])).hasClass(W.disabled)?Q("#nData",S).addClass(W.disabled):Q("#nData",S).removeClass(W.disabled)}function N(){var e=Q(E).jqGrid("getDataIDs"),t=Q("#id_g",g).val();if(E.p.multiselect&&X[E.p.id].editselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==Q.inArray(e[a],E.p.selarrrow)&&i.push(e[a]);return[Q.inArray(t,i),i]}return[Q.inArray(t,e),e]}function z(){if(X[E.p.id].checkOnSubmit||X[E.p.id].checkOnUpdate){var e,i=[],a={},i=Q.map(E.p.savedData,function(e,t){return t});for(var t in Q(".FormElement",q).each(function(){if(""!==Q.trim(this.name)&&-1===i.indexOf(this.name)){var e=Q(this).val(),t=Q(this).get(0).type;if("checkbox"===t)Q(this).is(":checked")||(e=Q(this).attr("offval"));else if("select-multiple"===t)e=e.join(",");else if("radio"===t){if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===Q(this).attr("offval")?"off":Q(this).attr("offval")}E.p.savedData[this.name]=e}}),a){a.hasOwnProperty(t)&&(e=Q('input[name="'+t+'"]:checked',q).val(),E.p.savedData[t]=void 0!==e?e:a[t])}}}E.grid&&H&&(E.p.savedData={},f=E.p.id,P="FrmGrid_"+f,e="TblGrid_"+f,g="#"+Q.jgrid.jqID(e),v={themodal:"editmod"+f,modalhead:"edithd"+f,modalcontent:"editcnt"+f,scrollelm:P},t=!0,i=1,a=0,y="string"==typeof X[E.p.id].template&&0<X[E.p.id].template.length,w=Q.jgrid.getRegional(this,"errors"),X[E.p.id].styleUI=E.p.styleUI||"jQueryUI",Q.jgrid.isMobile()&&(X[E.p.id].resize=!1),"new"===H?(H="_empty",j="add",V.caption=X[E.p.id].addCaption):(V.caption=X[E.p.id].editCaption,j="edit"),V.recreateForm||Q(E).data("formProp")&&Q.extend(X[Q(this)[0].p.id],Q(E).data("formProp")),d=!0,V.checkOnUpdate&&V.jqModal&&!V.modal&&(d=!1),r=isNaN(X[Q(this)[0].p.id].dataheight)?X[Q(this)[0].p.id].dataheight:X[Q(this)[0].p.id].dataheight+"px",o=isNaN(X[Q(this)[0].p.id].datawidth)?X[Q(this)[0].p.id].datawidth:X[Q(this)[0].p.id].datawidth+"px",q=Q("<form name='FormPost' id='"+P+"' class='FormGrid' onSubmit='return false;' style='width:"+o+";height:"+r+";'></form>").data("disabled",!1),S=y?(l=X[Q(this)[0].p.id].template,s="","string"==typeof l&&(s=l.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'})),n=s,g):(n=Q("<table id='"+e+"' class='EditTable ui-common-table'><tbody></tbody></table>"),g+"_2"),P="#"+Q.jgrid.jqID(P),Q(q).append("<div class='FormError "+W.error+"' style='display:none;'></div>"),Q(q).append("<div class='tinfo topinfo'>"+X[E.p.id].topinfo+"</div>"),Q(E.p.colModel).each(function(){var e=this.formoptions;i=Math.max(i,e&&e.colpos||0),a=Math.max(a,e&&e.rowpos||0)}),Q(q).append(n),void 0===(t=Q(E).triggerHandler("jqGridAddEditBeforeInitData",[q,j]))&&(t=!0),t&&Q.isFunction(X[E.p.id].beforeInitData)&&(t=X[E.p.id].beforeInitData.call(E,q,j)),!1!==t&&(function(){var e;if("_empty"!==H&&void 0!==E.p.savedRow&&0<E.p.savedRow.length&&Q.isFunction(Q.fn.jqGrid.restoreRow))for(e=0;e<E.p.savedRow.length;e++)if(E.p.savedRow[e].id===H){Q(E).jqGrid("restoreRow",H);break}}(),function(n,l,s,c){for(var p,u,h,m,f,g,v,e,b=0,j=[],w=!1,D="",t=1;t<=c;t++)D+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==n&&(w=Q(l).jqGrid("getInd",n)),Q(l.p.colModel).each(function(t){if(p=this.name,u=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,f=u?"style='display:none'":"","cb"!==p&&"subgrid"!==p&&!0===this.editable&&"rn"!==p){if(!1===w)m="";else if(p===l.p.ExpandColumn&&!0===l.p.treeGrid)m=Q("td[role='gridcell']:eq("+t+")",l.rows[w]).text();else{try{m=Q.unformat.call(l,Q("td[role='gridcell']:eq("+t+")",l.rows[w]),{rowId:n,colModel:this},t)}catch(e){m=this.edittype&&"textarea"===this.edittype?Q("td[role='gridcell']:eq("+t+")",l.rows[w]).text():Q("td[role='gridcell']:eq("+t+")",l.rows[w]).html()}m&&"&nbsp;"!==m&&"&#160;"!==m&&(1!==m.length||160!==m.charCodeAt(0))||(m="")}var e,i,a=Q.extend({},this.editoptions||{},{id:p,name:p,rowId:n,oper:"edit",module:"form",checkUpdate:X[E.p.id].checkOnSubmit||X[E.p.id].checkOnUpdate}),d=Q.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),r=parseInt(d.rowpos,10)||b+1,o=parseInt(2*(parseInt(d.colpos,10)||1),10);"_empty"===n&&a.defaultValue&&(m=Q.isFunction(a.defaultValue)?a.defaultValue.call(E):a.defaultValue),this.edittype||(this.edittype="text"),E.p.autoencode&&(m=Q.jgrid.htmlDecode(m)),g=Q.jgrid.createEl.call(E,this.edittype,a,m,!1,Q.extend({},Q.jgrid.ajaxOptions,l.p.ajaxSelectOptions||{})),"select"===this.edittype&&(m=Q(g).val(),"select-multiple"===Q(g).get(0).type&&m&&(m=m.join(","))),"checkbox"===this.edittype&&(m=Q(g).is(":checked")?Q(g).val():Q(g).attr("offval")),Q(g).addClass("FormElement"),-1<Q.inArray(this.edittype,["text","textarea","password","select","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])&&Q(g).addClass(L.inputClass),v=!0,y?(e=Q(q).find("#"+p)).length?e.replaceWith(g):v=!1:(h=Q(s).find("tr[rowpos="+r+"]"),d.rowabove&&(i=Q("<tr><td class='contentinfo' colspan='"+2*c+"'>"+d.rowcontent+"</td></tr>"),Q(s).append(i),i[0].rp=r),0===h.length&&(h=1<c?Q("<tr rowpos='"+r+"'></tr>").addClass("FormData").attr("id","tr_"+p):Q("<tr "+f+" rowpos='"+r+"'></tr>").addClass("FormData").attr("id","tr_"+p),Q(h).append(D),Q(s).append(h),h[0].rp=r),Q("td:eq("+(o-2)+")",h[0]).html("<label for='"+p+"'>"+(void 0===d.label?l.p.colNames[t]:d.label)+"</label>"),Q("td:eq("+(o-1)+")",h[0]).append(d.elmprefix).append(g).append(d.elmsuffix),1<c&&u&&(Q("td:eq("+(o-2)+")",h[0]).hide(),Q("td:eq("+(o-1)+")",h[0]).hide())),(X[E.p.id].checkOnSubmit||X[E.p.id].checkOnUpdate)&&v&&(E.p.savedData[p]=m),"custom"===this.edittype&&Q.isFunction(a.custom_value)&&a.custom_value.call(E,Q("#"+p,P),"set",m),Q.jgrid.bindEv.call(E,g,a),j[b]=t,b++}}),0<b&&(y?(e="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+l.p.id+"_id' value='"+n+"'/>",Q(q).append(e)):((e=Q("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*c-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+l.p.id+"_id' value='"+n+"'/></td></tr>"))[0].rp=b+999,Q(s).append(e)),(X[E.p.id].checkOnSubmit||X[E.p.id].checkOnUpdate)&&(E.p.savedData[l.p.id+"_id"]=n))}(H,E,n,i),p=(c="rtl"===E.p.direction)?"pData":"nData",u="<a id='"+(c?"nData":"pData")+"' class='fm-button "+W.button+"'><span class='"+W.icon_base+" "+L.icon_prev+"'></span></a>",h="<a id='"+p+"' class='fm-button "+W.button+"'><span class='"+W.icon_base+" "+L.icon_next+"'></span></a>",m="<a id='sData' class='fm-button "+W.button+"'>"+V.bSubmit+"</a>",D="<a id='cData' class='fm-button "+W.button+"'>"+V.bCancel+"</a>",x=Q.isArray(X[E.p.id].buttons)?Q.jgrid.buildButtons(X[E.p.id].buttons,m+D,W):m+D,_="<table style='height:auto' class='EditTable ui-common-table' id='"+e+"_2'><tbody><tr><td colspan='2'><hr class='"+W.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(c?h+u:u+h)+"</td><td class='EditButton'>"+x+"</td></tr>",_+="</tbody></table>",0<a&&(I=[],Q.each(Q(n)[0].rows,function(e,t){I[e]=t}),I.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),Q.each(I,function(e,t){Q("tbody",n).append(t)})),V.gbox="#gbox_"+Q.jgrid.jqID(f),!(k=!1)===V.closeOnEscape&&(V.closeOnEscape=!1,k=!0),C=y?(Q(q).find("#pData").replaceWith(u),Q(q).find("#nData").replaceWith(h),Q(q).find("#sData").replaceWith(m),Q(q).find("#cData").replaceWith(D),Q("<div id="+e+"></div>").append(q)):Q("<div></div>").append(q).append(_),Q(q).append("<div class='binfo topinfo bottominfo'>"+X[E.p.id].bottominfo+"</div>"),F=Q(".ui-jqgrid").css("font-size")||"11px",Q.jgrid.createModal(v,C,X[Q(this)[0].p.id],"#gview_"+Q.jgrid.jqID(E.p.id),Q("#gbox_"+Q.jgrid.jqID(E.p.id))[0],null,{"font-size":F}),c&&(Q("#pData, #nData",g+"_2").css("float","right"),Q(".EditButton",g+"_2").css("text-align","left")),X[E.p.id].topinfo&&Q(".tinfo",P).show(),X[E.p.id].bottominfo&&Q(".binfo",P).show(),_=C=null,Q("#"+Q.jgrid.jqID(v.themodal)).keydown(function(e){var t=e.target;if(!0===Q(P).data("disabled"))return!1;if(!0===X[E.p.id].savekey[0]&&e.which===X[E.p.id].savekey[1]&&"TEXTAREA"!==t.tagName)return Q("#sData",g+"_2").trigger("click"),!1;if(27===e.which)return U()&&k&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(v.themodal),{gb:V.gbox,jqm:V.jqModal,onClose:X[E.p.id].onClose,removemodal:X[E.p.id].removemodal,formprop:!X[E.p.id].recreateForm,form:X[E.p.id].form}),!1;if(!0===X[E.p.id].navkeys[0]){if("_empty"===Q("#id_g",g).val())return!0;if(e.which===X[E.p.id].navkeys[1])return Q("#pData",S).trigger("click"),!1;if(e.which===X[E.p.id].navkeys[2])return Q("#nData",S).trigger("click"),!1}}),V.checkOnUpdate&&(Q("a.ui-jqdialog-titlebar-close span","#"+Q.jgrid.jqID(v.themodal)).removeClass("jqmClose"),Q("a.ui-jqdialog-titlebar-close","#"+Q.jgrid.jqID(v.themodal)).off("click").click(function(){return U()&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(v.themodal),{gb:"#gbox_"+Q.jgrid.jqID(f),jqm:V.jqModal,onClose:X[E.p.id].onClose,removemodal:X[E.p.id].removemodal,formprop:!X[E.p.id].recreateForm,form:X[E.p.id].form}),!1})),V.saveicon=Q.extend([!0,"left",L.icon_save],V.saveicon),V.closeicon=Q.extend([!0,"left",L.icon_close],V.closeicon),!0===V.saveicon[0]&&Q("#sData",S).addClass("right"===V.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+W.icon_base+" "+V.saveicon[2]+"'></span>"),!0===V.closeicon[0]&&Q("#cData",S).addClass("right"===V.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+W.icon_base+" "+V.closeicon[2]+"'></span>"),(X[E.p.id].checkOnSubmit||X[E.p.id].checkOnUpdate)&&(m="<a id='sNew' class='fm-button "+W.button+"' style='z-index:1002'>"+V.bYes+"</a>",h="<a id='nNew' class='fm-button "+W.button+"' style='z-index:1002;margin-left:5px'>"+V.bNo+"</a>",D="<a id='cNew' class='fm-button "+W.button+"' style='z-index:1002;margin-left:5px;'>"+V.bExit+"</a>",G=V.zIndex||999,G++,Q("#"+v.themodal).append("<div class='"+V.overlayClass+" jqgrid-overlay confirm' style='z-index:"+G+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+W.content+"' style='z-index:"+(1+G)+"'>"+V.saveData+"<br/><br/>"+m+h+D+"</div>"),Q("#sNew","#"+Q.jgrid.jqID(v.themodal)).click(function(){return B(),Q(P).data("disabled",!1),Q(".confirm","#"+Q.jgrid.jqID(v.themodal)).hide(),!1}),Q("#nNew","#"+Q.jgrid.jqID(v.themodal)).click(function(){return Q(".confirm","#"+Q.jgrid.jqID(v.themodal)).hide(),Q(P).data("disabled",!1),setTimeout(function(){Q(":input:visible",P)[0].focus()},0),!1}),Q("#cNew","#"+Q.jgrid.jqID(v.themodal)).click(function(){return Q(".confirm","#"+Q.jgrid.jqID(v.themodal)).hide(),Q(P).data("disabled",!1),Q.jgrid.hideModal("#"+Q.jgrid.jqID(v.themodal),{gb:"#gbox_"+Q.jgrid.jqID(f),jqm:V.jqModal,onClose:X[E.p.id].onClose,removemodal:X[E.p.id].removemodal,formprop:!X[E.p.id].recreateForm,form:X[E.p.id].form}),!1})),Q(E).triggerHandler("jqGridAddEditInitializeForm",[Q(P),j]),Q.isFunction(X[E.p.id].onInitializeForm)&&X[E.p.id].onInitializeForm.call(E,Q(P),j),"_empty"!==H&&X[E.p.id].viewPagerButtons?Q("#pData,#nData",S).show():Q("#pData,#nData",S).hide(),Q(E).triggerHandler("jqGridAddEditBeforeShowForm",[Q(P),j]),Q.isFunction(X[E.p.id].beforeShowForm)&&X[E.p.id].beforeShowForm.call(E,Q(P),j),z(),Q("#"+Q.jgrid.jqID(v.themodal)).data("onClose",X[E.p.id].onClose),Q.jgrid.viewModal("#"+Q.jgrid.jqID(v.themodal),{gbox:"#gbox_"+Q.jgrid.jqID(f),jqm:V.jqModal,overlay:V.overlay,modal:V.modal,overlayClass:V.overlayClass,focusField:V.focusField,onHide:function(e){var t=Q("#editmod"+f)[0].style.height,i=Q("#editmod"+f)[0].style.width;-1<t.indexOf("px")&&(t=parseFloat(t)),-1<i.indexOf("px")&&(i=parseFloat(i)),Q(E).data("formProp",{top:parseFloat(Q(e.w).css("top")),left:parseFloat(Q(e.w).css("left")),width:i,height:t,dataheight:Q(P).height(),datawidth:Q(P).width()}),e.w.remove(),e.o&&e.o.remove()}}),d||Q("."+Q.jgrid.jqID(V.overlayClass)).click(function(){return U()&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(v.themodal),{gb:"#gbox_"+Q.jgrid.jqID(f),jqm:V.jqModal,onClose:X[E.p.id].onClose,removemodal:X[E.p.id].removemodal,formprop:!X[E.p.id].recreateForm,form:X[E.p.id].form}),!1}),Q(".fm-button","#"+Q.jgrid.jqID(v.themodal)).hover(function(){Q(this).addClass(W.hover)},function(){Q(this).removeClass(W.hover)}),Q("#sData",S).click(function(){return b={},Q(".FormError",P).hide(),M(),"_empty"!==b[E.p.id+"_id"]&&!0===V.checkOnSubmit&&R(b,E.p.savedData)?(Q(P).data("disabled",!0),Q(".confirm","#"+Q.jgrid.jqID(v.themodal)).show()):B(),!1}),Q("#cData",S).click(function(){return U()&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(v.themodal),{gb:"#gbox_"+Q.jgrid.jqID(f),jqm:V.jqModal,onClose:X[E.p.id].onClose,removemodal:X[E.p.id].removemodal,formprop:!X[E.p.id].recreateForm,form:X[E.p.id].form}),!1}),Q(S).find("[data-index]").each(function(){var t=parseInt(Q(this).attr("data-index"),10);0<=t&&V.buttons[t].hasOwnProperty("click")&&Q(this).on("click",function(e){V.buttons[t].click.call(E,Q(P)[0],X[E.p.id],e)})}),Q("#nData",S).click(function(){if(!U())return!1;Q(".FormError",P).hide();var e,t=N();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(Q(E).triggerHandler("jqGridAddEditClickPgButtons",["next",Q(P),t[1][t[0]]]),Q.isFunction(V.onclickPgButtons)&&void 0!==(e=V.onclickPgButtons.call(E,"next",Q(P),t[1][t[0]]))&&!1===e)return!1;if(Q("#"+Q.jgrid.jqID(t[1][t[0]+1])).hasClass(W.disabled))return!1;A(t[1][t[0]+1],E,P),E.p.multiselect&&X[E.p.id].editselected||Q(E).jqGrid("setSelection",t[1][t[0]+1]),Q(E).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",Q(P),t[1][t[0]]]),Q.isFunction(V.afterclickPgButtons)&&V.afterclickPgButtons.call(E,"next",Q(P),t[1][t[0]+1]),z(),T(t[0]+1,t)}return!1}),Q("#pData",S).click(function(){if(!U())return!1;Q(".FormError",P).hide();var e,t=N();if(-1!==t[0]&&t[1][t[0]-1]){if(Q(E).triggerHandler("jqGridAddEditClickPgButtons",["prev",Q(P),t[1][t[0]]]),Q.isFunction(V.onclickPgButtons)&&void 0!==(e=V.onclickPgButtons.call(E,"prev",Q(P),t[1][t[0]]))&&!1===e)return!1;if(Q("#"+Q.jgrid.jqID(t[1][t[0]-1])).hasClass(W.disabled))return!1;A(t[1][t[0]-1],E,P),E.p.multiselect&&X[E.p.id].editselected||Q(E).jqGrid("setSelection",t[1][t[0]-1]),Q(E).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",Q(P),t[1][t[0]]]),Q.isFunction(V.afterclickPgButtons)&&V.afterclickPgButtons.call(E,"prev",Q(P),t[1][t[0]-1]),z(),T(t[0]-1,t)}return!1}),Q(E).triggerHandler("jqGridAddEditAfterShowForm",[Q(P),j]),Q.isFunction(X[E.p.id].afterShowForm)&&X[E.p.id].afterShowForm.call(E,Q(P),j),T((O=N())[0],O)))})},viewGridRow:function(C,F){var e=Q.jgrid.getRegional(this[0],"view"),t=this[0].p.styleUI,G=Q.jgrid.styleUI[t].formedit,O=Q.jgrid.styleUI[t].common;return F=Q.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},e,F||{}),X[Q(this)[0].p.id]=F,this.each(function(){var e,t,n,i,a,d,r,o,l,s,c,p,u,h,m,f,g,v,b,j,w,D,y,q=this;function x(){!0!==X[q.p.id].closeOnEscape&&!0!==X[q.p.id].navkeys[0]||setTimeout(function(){Q(".ui-jqdialog-titlebar-close","#"+Q.jgrid.jqID(d.modalhead)).attr("tabindex","-1").focus()},0)}function _(e,t){var i,a,d,r=0,o=Q(t).jqGrid("getInd",e,!0);o&&(Q("td",o).each(function(e){i=t.p.colModel[e].name,a=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&(d=i===t.p.ExpandColumn&&!0===t.p.treeGrid?Q(this).text():Q(this).html(),i=Q.jgrid.jqID("v_"+i),Q("#"+i+" span","#"+n).html(d),a&&Q("#"+i,"#"+n).parents("tr:first").hide(),r++)}),0<r&&Q("#id_g","#"+n).val(e))}function I(e,t){var i=t[1].length-1;0===e?Q("#pData","#"+n+"_2").addClass(O.disabled):void 0!==t[1][e-1]&&Q("#"+Q.jgrid.jqID(t[1][e-1])).hasClass(O.disabled)?Q("#pData",n+"_2").addClass(O.disabled):Q("#pData","#"+n+"_2").removeClass(O.disabled),e===i?Q("#nData","#"+n+"_2").addClass(O.disabled):void 0!==t[1][e+1]&&Q("#"+Q.jgrid.jqID(t[1][e+1])).hasClass(O.disabled)?Q("#nData",n+"_2").addClass(O.disabled):Q("#nData","#"+n+"_2").removeClass(O.disabled)}function k(){var e=Q(q).jqGrid("getDataIDs"),t=Q("#id_g","#"+n).val();if(q.p.multiselect&&X[q.p.id].viewselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==Q.inArray(e[a],q.p.selarrrow)&&i.push(e[a]);return[Q.inArray(t,i),i]}return[Q.inArray(t,e),e]}q.grid&&C&&(e=q.p.id,t="ViewGrid_"+Q.jgrid.jqID(e),n="ViewTbl_"+Q.jgrid.jqID(e),i="ViewGrid_"+e,a="ViewTbl_"+e,d={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,scrollelm:t},r=!0,o=1,l=0,X[q.p.id].styleUI=q.p.styleUI||"jQueryUI",F.recreateForm||Q(q).data("viewProp")&&Q.extend(X[Q(this)[0].p.id],Q(q).data("viewProp")),s=isNaN(X[Q(this)[0].p.id].dataheight)?X[Q(this)[0].p.id].dataheight:X[Q(this)[0].p.id].dataheight+"px",c=isNaN(X[Q(this)[0].p.id].datawidth)?X[Q(this)[0].p.id].datawidth:X[Q(this)[0].p.id].datawidth+"px",p=Q("<form name='FormPost' id='"+i+"' class='FormGrid' style='width:"+c+";height:"+s+";'></form>"),u=Q("<table id='"+a+"' class='EditTable ViewTable'><tbody></tbody></table>"),Q(q.p.colModel).each(function(){var e=this.formoptions;o=Math.max(o,e&&e.colpos||0),l=Math.max(l,e&&e.rowpos||0)}),Q(p).append(u),void 0===(r=Q(q).triggerHandler("jqGridViewRowBeforeInitData",[p]))&&(r=!0),r&&Q.isFunction(X[q.p.id].beforeInitData)&&(r=X[q.p.id].beforeInitData.call(q,p)),!1!==r&&(function(e,r,o,n){for(var l,s,c,p,u,h,m,f,g,t,v=0,b=[],i="<td class='CaptionTD form-view-label "+O.content+"' width='"+F.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+O.content+"'></td>",j="",a="<td class='CaptionTD form-view-label "+O.content+"'></td><td class='DataTD form-view-data "+O.content+"'></td>",d=["integer","number","currency"],w=0,D=0,y=1;y<=n;y++)j+=1===y?i:a;Q(r.p.colModel).each(function(){(s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==Q.inArray(this.formatter,d)?w=Math.max(w,parseInt(this.width,10)):D=Math.max(D,parseInt(this.width,10)))}),m=0!==w?w:0!==D?D:0,h=Q(r).jqGrid("getInd",e),Q(r.p.colModel).each(function(e){var t,i,a,d;l=this.name,f=!1,s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,u=s?"style='display:none'":"",g="boolean"!=typeof this.viewable||this.viewable,"cb"!==l&&"subgrid"!==l&&"rn"!==l&&g&&(p=!1===h?"":l===r.p.ExpandColumn&&!0===r.p.treeGrid?Q("td:eq("+e+")",r.rows[h]).text():Q("td:eq("+e+")",r.rows[h]).html(),f="right"===this.align&&0!==m,t=Q.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(t.rowpos,10)||v+1,a=parseInt(2*(parseInt(t.colpos,10)||1),10),t.rowabove&&(d=Q("<tr><td class='contentinfo' colspan='"+2*n+"'>"+t.rowcontent+"</td></tr>"),Q(o).append(d),d[0].rp=i),0===(c=Q(o).find("tr[rowpos="+i+"]")).length&&(c=Q("<tr "+u+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+l),Q(c).append(j),Q(o).append(c),c[0].rp=i),Q("td:eq("+(a-2)+")",c[0]).html("<b>"+(void 0===t.label?r.p.colNames[e]:t.label)+"</b>"),Q("td:eq("+(a-1)+")",c[0]).append("<span>"+p+"</span>").attr("id","v_"+l),f&&Q("td:eq("+(a-1)+") span",c[0]).css({"text-align":"right",width:m+"px"}),b[v]=e,v++)}),0<v&&((t=Q("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>"))[0].rp=v+99,Q(o).append(t))}(C,q,u,o),m=(h="rtl"===q.p.direction)?"pData":"nData",f="<a id='"+(h?"nData":"pData")+"' class='fm-button "+O.button+"'><span class='"+O.icon_base+" "+G.icon_prev+"'></span></a>",g="<a id='"+m+"' class='fm-button "+O.button+"'><span class='"+O.icon_base+" "+G.icon_next+"'></span></a>",v="<a id='cData' class='fm-button "+O.button+"'>"+F.bClose+"</a>",b=Q.isArray(X[q.p.id].buttons)?Q.jgrid.buildButtons(X[q.p.id].buttons,v,O):v,0<l&&(j=[],Q.each(Q(u)[0].rows,function(e,t){j[e]=t}),j.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),Q.each(j,function(e,t){Q("tbody",u).append(t)})),F.gbox="#gbox_"+Q.jgrid.jqID(e),w=Q("<div></div>").append(p).append("<table border='0' class='EditTable' id='"+n+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+F.labelswidth+"'>"+(h?g+f:f+g)+"</td><td class='EditButton'>"+b+"</td></tr></tbody></table>"),D=Q(".ui-jqgrid").css("font-size")||"11px",Q.jgrid.createModal(d,w,X[Q(this)[0].p.id],"#gview_"+Q.jgrid.jqID(q.p.id),Q("#gview_"+Q.jgrid.jqID(q.p.id))[0],null,{"font-size":D}),h&&(Q("#pData, #nData","#"+n+"_2").css("float","right"),Q(".EditButton","#"+n+"_2").css("text-align","left")),F.viewPagerButtons||Q("#pData, #nData","#"+n+"_2").hide(),w=null,Q("#"+d.themodal).keydown(function(e){if(27===e.which)return X[q.p.id].closeOnEscape&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(d.themodal),{gb:F.gbox,jqm:F.jqModal,onClose:F.onClose,removemodal:X[q.p.id].removemodal,formprop:!X[q.p.id].recreateForm,form:X[q.p.id].form}),!1;if(!0===F.navkeys[0]){if(e.which===F.navkeys[1])return Q("#pData","#"+n+"_2").trigger("click"),!1;if(e.which===F.navkeys[2])return Q("#nData","#"+n+"_2").trigger("click"),!1}}),F.closeicon=Q.extend([!0,"left",G.icon_close],F.closeicon),!0===F.closeicon[0]&&Q("#cData","#"+n+"_2").addClass("right"===F.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+O.icon_base+" "+F.closeicon[2]+"'></span>"),Q(q).triggerHandler("jqGridViewRowBeforeShowForm",[Q("#"+t)]),Q.isFunction(F.beforeShowForm)&&F.beforeShowForm.call(q,Q("#"+t)),Q.jgrid.viewModal("#"+Q.jgrid.jqID(d.themodal),{gbox:"#gbox_"+Q.jgrid.jqID(e),jqm:F.jqModal,overlay:F.overlay,modal:F.modal,onHide:function(e){Q(q).data("viewProp",{top:parseFloat(Q(e.w).css("top")),left:parseFloat(Q(e.w).css("left")),width:Q(e.w).width(),height:Q(e.w).height(),dataheight:Q("#"+t).height(),datawidth:Q("#"+t).width()}),e.w.remove(),e.o&&e.o.remove()}}),Q(".fm-button:not(."+O.disabled+")","#"+n+"_2").hover(function(){Q(this).addClass(O.hover)},function(){Q(this).removeClass(O.hover)}),x(),Q("#cData","#"+n+"_2").click(function(){return Q.jgrid.hideModal("#"+Q.jgrid.jqID(d.themodal),{gb:"#gbox_"+Q.jgrid.jqID(e),jqm:F.jqModal,onClose:F.onClose,removemodal:X[q.p.id].removemodal,formprop:!X[q.p.id].recreateForm,form:X[q.p.id].form}),!1}),Q("#"+n+"_2").find("[data-index]").each(function(){var t=parseInt(Q(this).attr("data-index"),10);0<=t&&F.buttons[t].hasOwnProperty("click")&&Q(this).on("click",function(e){F.buttons[t].click.call(q,Q("#"+i)[0],X[q.p.id],e)})}),Q("#nData","#"+n+"_2").click(function(){Q("#FormError","#"+n).hide();var e=k();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&(Q(q).triggerHandler("jqGridViewRowClickPgButtons",["next",Q("#"+t),e[1][e[0]]]),Q.isFunction(F.onclickPgButtons)&&F.onclickPgButtons.call(q,"next",Q("#"+t),e[1][e[0]]),_(e[1][e[0]+1],q),q.p.multiselect&&X[q.p.id].viewselected||Q(q).jqGrid("setSelection",e[1][e[0]+1]),Q(q).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",Q("#"+t),e[1][e[0]+1]]),Q.isFunction(F.afterclickPgButtons)&&F.afterclickPgButtons.call(q,"next",Q("#"+t),e[1][e[0]+1]),I(e[0]+1,e)),x(),!1}),Q("#pData","#"+n+"_2").click(function(){Q("#FormError","#"+n).hide();var e=k();return-1!==e[0]&&e[1][e[0]-1]&&(Q(q).triggerHandler("jqGridViewRowClickPgButtons",["prev",Q("#"+t),e[1][e[0]]]),Q.isFunction(F.onclickPgButtons)&&F.onclickPgButtons.call(q,"prev",Q("#"+t),e[1][e[0]]),_(e[1][e[0]-1],q),q.p.multiselect&&X[q.p.id].viewselected||Q(q).jqGrid("setSelection",e[1][e[0]-1]),Q(q).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",Q("#"+t),e[1][e[0]-1]]),Q.isFunction(F.afterclickPgButtons)&&F.afterclickPgButtons.call(q,"prev",Q("#"+t),e[1][e[0]-1]),I(e[0]-1,e)),x(),!1}),I((y=k())[0],y)))})},delGridRow:function(b,j){var e=Q.jgrid.getRegional(this[0],"del"),t=this[0].p.styleUI,w=Q.jgrid.styleUI[t].formedit,D=Q.jgrid.styleUI[t].common;return j=Q.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,j||{}),X[Q(this)[0].p.id]=j,this.each(function(){var o=this;if(o.grid&&b){var n,a,l,s,c=o.p.id,p={},e=!0,u="DelTbl_"+Q.jgrid.jqID(c),i="DelTbl_"+c,h={themodal:"delmod"+c,modalhead:"delhd"+c,modalcontent:"delcnt"+c,scrollelm:u};if(X[o.p.id].styleUI=o.p.styleUI||"jQueryUI",Q.isArray(b)&&(b=b.join()),void 0!==Q("#"+Q.jgrid.jqID(h.themodal))[0]){if(void 0===(e=Q(o).triggerHandler("jqGridDelRowBeforeInitData",[Q("#"+u)]))&&(e=!0),e&&Q.isFunction(X[o.p.id].beforeInitData)&&(e=X[o.p.id].beforeInitData.call(o,Q("#"+u))),!1===e)return;Q("#DelData>td","#"+u).text(b),Q("#DelError","#"+u).hide(),!0===X[o.p.id].processing&&(X[o.p.id].processing=!1,Q("#dData","#"+u).removeClass(D.active)),Q(o).triggerHandler("jqGridDelRowBeforeShowForm",[Q("#"+u)]),Q.isFunction(X[o.p.id].beforeShowForm)&&X[o.p.id].beforeShowForm.call(o,Q("#"+u)),Q.jgrid.viewModal("#"+Q.jgrid.jqID(h.themodal),{gbox:"#gbox_"+Q.jgrid.jqID(c),jqm:X[o.p.id].jqModal,overlay:X[o.p.id].overlay,modal:X[o.p.id].modal}),Q(o).triggerHandler("jqGridDelRowAfterShowForm",[Q("#"+u)]),Q.isFunction(X[o.p.id].afterShowForm)&&X[o.p.id].afterShowForm.call(o,Q("#"+u))}else{var t=isNaN(X[o.p.id].dataheight)?X[o.p.id].dataheight:X[o.p.id].dataheight+"px",d=isNaN(j.datawidth)?j.datawidth:j.datawidth+"px",r="<div id='"+i+"' class='formdata' style='width:"+d+";overflow:auto;position:relative;height:"+t+";'>";r+="<table class='DelTable'><tbody>",r+="<tr id='DelError' style='display:none'><td class='"+D.error+"'></td></tr>",r+="<tr id='DelData' style='display:none'><td >"+b+"</td></tr>",r+='<tr><td class="delmsg" style="white-space:pre;">'+X[o.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",r+="</tbody></table></div>";var m="<a id='dData' class='fm-button "+D.button+"'>"+j.bSubmit+"</a>",f="<a id='eData' class='fm-button "+D.button+"'>"+j.bCancel+"</a>",g=Q.isArray(X[o.p.id].buttons)?Q.jgrid.buildButtons(X[o.p.id].buttons,m+f,D):m+f,v=Q(".ui-jqgrid").css("font-size")||"11px";if(r+="<table class='EditTable ui-common-table' id='"+u+"_2'><tbody><tr><td><hr class='"+D.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+g+"</td></tr></tbody></table>",j.gbox="#gbox_"+Q.jgrid.jqID(c),Q.jgrid.createModal(h,r,X[o.p.id],"#gview_"+Q.jgrid.jqID(o.p.id),Q("#gview_"+Q.jgrid.jqID(o.p.id))[0],null,{"font-size":v}),Q(".fm-button","#"+u+"_2").hover(function(){Q(this).addClass(D.hover)},function(){Q(this).removeClass(D.hover)}),j.delicon=Q.extend([!0,"left",w.icon_del],X[o.p.id].delicon),j.cancelicon=Q.extend([!0,"left",w.icon_cancel],X[o.p.id].cancelicon),!0===j.delicon[0]&&Q("#dData","#"+u+"_2").addClass("right"===j.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+D.icon_base+" "+j.delicon[2]+"'></span>"),!0===j.cancelicon[0]&&Q("#eData","#"+u+"_2").addClass("right"===j.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+D.icon_base+" "+j.cancelicon[2]+"'></span>"),Q("#dData","#"+u+"_2").click(function(){var e,d=[!0,""],r=Q("#DelData>td","#"+u).text();if(p={},void 0===(p=Q(o).triggerHandler("jqGridDelRowClickSubmit",[X[o.p.id],r]))&&Q.isFunction(X[o.p.id].onclickSubmit)&&(p=X[o.p.id].onclickSubmit.call(o,X[o.p.id],r)||{}),void 0===(d=Q(o).triggerHandler("jqGridDelRowBeforeSubmit",[r]))&&(d=[!0,"",""]),d[0]&&Q.isFunction(X[o.p.id].beforeSubmit)&&(d=X[o.p.id].beforeSubmit.call(o,r)),d[0]&&!X[o.p.id].processing){if(X[o.p.id].processing=!0,l=o.p.prmNames,n=Q.extend({},X[o.p.id].delData,p),s=l.oper,n[s]=l.deloper,a=l.id,!(r=String(r).split(",")).length)return!1;for(e in r)r.hasOwnProperty(e)&&(r[e]=Q.jgrid.stripPref(o.p.idPrefix,r[e]));n[a]=r.join(),Q(this).addClass(D.active);var t,i=Q.extend({url:X[o.p.id].url||Q(o).jqGrid("getGridParam","editurl"),type:X[o.p.id].mtype,data:Q.isFunction(X[o.p.id].serializeDelData)?X[o.p.id].serializeDelData.call(o,n):n,complete:function(e,t){var i,a;if(Q("#dData","#"+u+"_2").removeClass(D.active),300<=e.status&&304!==e.status?(d[0]=!1,d[1]=Q(o).triggerHandler("jqGridDelRowErrorTextFormat",[e]),Q.isFunction(X[o.p.id].errorTextFormat)&&(d[1]=X[o.p.id].errorTextFormat.call(o,e)),void 0===d[1]&&(d[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status)):(void 0===(d=Q(o).triggerHandler("jqGridDelRowAfterSubmit",[e,n]))&&(d=[!0,"",""]),d[0]&&Q.isFunction(X[o.p.id].afterSubmit)&&(d=X[o.p.id].afterSubmit.call(o,e,n))),!1===d[0])Q("#DelError>td","#"+u).html(d[1]),Q("#DelError","#"+u).show();else{if(X[o.p.id].reloadAfterSubmit&&"local"!==o.p.datatype)Q(o).trigger("reloadGrid");else{if(!0===o.p.treeGrid)try{Q(o).jqGrid("delTreeNode",o.p.idPrefix+r[0])}catch(e){}else for(i=0;i<r.length;i++)Q(o).jqGrid("delRowData",o.p.idPrefix+r[i]);o.p.selrow=null,o.p.selarrrow=[]}(Q.isFunction(X[o.p.id].afterComplete)||Q._data(Q(o)[0],"events").hasOwnProperty("jqGridDelRowAfterComplete"))&&(a=e,setTimeout(function(){Q(o).triggerHandler("jqGridDelRowAfterComplete",[a,n]);try{X[o.p.id].afterComplete.call(o,a,n)}catch(e){}},500))}X[o.p.id].processing=!1,d[0]&&Q.jgrid.hideModal("#"+Q.jgrid.jqID(h.themodal),{gb:"#gbox_"+Q.jgrid.jqID(c),jqm:j.jqModal,onClose:X[o.p.id].onClose})}},Q.jgrid.ajaxOptions,X[o.p.id].ajaxDelOptions);i.url||X[o.p.id].useDataProxy||(Q.isFunction(o.p.dataProxy)?X[o.p.id].useDataProxy=!0:(d[0]=!1,d[1]+=" "+Q.jgrid.getRegional(o,"errors.nourl"))),d[0]&&(X[o.p.id].useDataProxy?(void 0===(t=o.p.dataProxy.call(o,i,"del_"+o.p.id))&&(t=[!0,""]),!1===t[0]?(d[0]=!1,d[1]=t[1]||"Error deleting the selected row!"):Q.jgrid.hideModal("#"+Q.jgrid.jqID(h.themodal),{gb:"#gbox_"+Q.jgrid.jqID(c),jqm:j.jqModal,onClose:X[o.p.id].onClose})):"clientArray"===i.url?(n=i.data,i.complete({status:200,statusText:""},"")):Q.ajax(i))}return!1===d[0]&&(Q("#DelError>td","#"+u).html(d[1]),Q("#DelError","#"+u).show()),!1}),Q("#eData","#"+u+"_2").click(function(){return Q.jgrid.hideModal("#"+Q.jgrid.jqID(h.themodal),{gb:"#gbox_"+Q.jgrid.jqID(c),jqm:X[o.p.id].jqModal,onClose:X[o.p.id].onClose}),!1}),Q("#"+u+"_2").find("[data-index]").each(function(){var t=parseInt(Q(this).attr("data-index"),10);0<=t&&j.buttons[t].hasOwnProperty("click")&&Q(this).on("click",function(e){j.buttons[t].click.call(o,Q("#"+i)[0],X[o.p.id],e)})}),void 0===(e=Q(o).triggerHandler("jqGridDelRowBeforeInitData",[Q("#"+u)]))&&(e=!0),e&&Q.isFunction(X[o.p.id].beforeInitData)&&(e=X[o.p.id].beforeInitData.call(o,Q("#"+u))),!1===e)return;Q(o).triggerHandler("jqGridDelRowBeforeShowForm",[Q("#"+u)]),Q.isFunction(X[o.p.id].beforeShowForm)&&X[o.p.id].beforeShowForm.call(o,Q("#"+u)),Q.jgrid.viewModal("#"+Q.jgrid.jqID(h.themodal),{gbox:"#gbox_"+Q.jgrid.jqID(c),jqm:X[o.p.id].jqModal,overlay:X[o.p.id].overlay,modal:X[o.p.id].modal}),Q(o).triggerHandler("jqGridDelRowAfterShowForm",[Q("#"+u)]),Q.isFunction(X[o.p.id].afterShowForm)&&X[o.p.id].afterShowForm.call(o,Q("#"+u))}!0===X[o.p.id].closeOnEscape&&setTimeout(function(){Q(".ui-jqdialog-titlebar-close","#"+Q.jgrid.jqID(h.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(g,v,b,j,w,D,y){var q=Q.jgrid.getRegional(this[0],"nav"),x=this[0].p.styleUI,e=Q.jgrid.styleUI[x].navigator,_=Q.jgrid.styleUI[x].common;return v=Q.extend({edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,del:!0,delicon:e.icon_del_nav,search:!0,searchicon:e.icon_search_nav,refresh:!0,refreshicon:e.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:e.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},q,v||{}),this.each(function(){if(!this.p.navGrid){var e,t,i,a,d,r={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},o=this;if(o.grid&&"string"==typeof g){Q(o).data("navGrid")||Q(o).data("navGrid",v),i=Q(o).data("navGrid"),o.p.force_regional&&(i=Q.extend(i,q)),void 0===Q("#"+r.themodal)[0]&&(i.alerttop||i.alertleft||((a=Q.jgrid.findPos(this))[0]=Math.round(a[0]),a[1]=Math.round(a[1]),i.alertleft=a[0]+this.p.width/2-parseInt(i.alertwidth,10)/2,i.alerttop=a[1]+this.p.height/2-25),d=Q(".ui-jqgrid").css("font-size")||"11px",Q.jgrid.createModal(r,"<div>"+i.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+Q.jgrid.jqID(o.p.id),jqModal:!0,drag:!0,resize:!0,caption:i.alertcap,top:i.alerttop,left:i.alertleft,width:i.alertwidth,height:i.alertheight,closeOnEscape:i.closeOnEscape,zIndex:i.alertzIndex,styleUI:o.p.styleUI},"#gview_"+Q.jgrid.jqID(o.p.id),Q("#gbox_"+Q.jgrid.jqID(o.p.id))[0],!0,{"font-size":d}));var n,l=1,s=function(){Q(this).hasClass(_.disabled)||Q(this).addClass(_.hover)},c=function(){Q(this).removeClass(_.hover)};for(i.cloneToTop&&o.p.toppager&&(l=2),n=0;n<l;n++){var p,u,h,m=Q("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),f="<td class='ui-pg-button "+_.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===n?(0===(u=g).indexOf("#")&&(u=u.substring(1),u="#"+Q.jgrid.jqID(u)),h=o.p.id,u===o.p.toppager&&(h+="_top",l=1)):(u=o.p.toppager,h=o.p.id+"_top"),"rtl"===o.p.direction&&Q(m).attr("dir","rtl").css("float","right"),j=j||{},i.add&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.addicon+"'></span>"+i.addtext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.addtitle||"",id:j.id||"add_"+h}).click(function(){return Q(this).hasClass(_.disabled)||(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.addfunc)?i.addfunc.call(o):Q(o).jqGrid("editGridRow","new",j)),!1}).hover(s,c),p=null),b=b||{},i.edit&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.editicon+"'></span>"+i.edittext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.edittitle||"",id:b.id||"edit_"+h}).click(function(){var e;return Q(this).hasClass(_.disabled)||((e=o.p.selrow)?(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.editfunc)?i.editfunc.call(o,e):Q(o).jqGrid("editGridRow",e,b)):(Q.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+Q.jgrid.jqID(o.p.id),jqm:!0}),Q("#jqg_alrt").focus())),!1}).hover(s,c),p=null),y=y||{},i.view&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.viewicon+"'></span>"+i.viewtext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.viewtitle||"",id:y.id||"view_"+h}).click(function(){var e;return Q(this).hasClass(_.disabled)||((e=o.p.selrow)?(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.viewfunc)?i.viewfunc.call(o,e):Q(o).jqGrid("viewGridRow",e,y)):(Q.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+Q.jgrid.jqID(o.p.id),jqm:!0}),Q("#jqg_alrt").focus())),!1}).hover(s,c),p=null),w=w||{},i.del&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.delicon+"'></span>"+i.deltext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.deltitle||"",id:w.id||"del_"+h}).click(function(){var e;return Q(this).hasClass(_.disabled)||(o.p.multiselect?0===(e=o.p.selarrrow).length&&(e=null):e=o.p.selrow,e?(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.delfunc)?i.delfunc.call(o,e):Q(o).jqGrid("delGridRow",e,w)):(Q.jgrid.viewModal("#"+r.themodal,{gbox:"#gbox_"+Q.jgrid.jqID(o.p.id),jqm:!0}),Q("#jqg_alrt").focus())),!1}).hover(s,c),p=null),(i.add||i.edit||i.del||i.view)&&Q("tr",m).append(f),D=D||{},i.search&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.searchicon+"'></span>"+i.searchtext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.searchtitle||"",id:D.id||"search_"+h}).click(function(){return Q(this).hasClass(_.disabled)||(Q.jgrid.setSelNavIndex(o,this),Q.isFunction(i.searchfunc)?i.searchfunc.call(o,D):Q(o).jqGrid("searchGrid",D)),!1}).hover(s,c),D.showOnLoad&&!0===D.showOnLoad&&Q(p,m).click(),p=null),i.refresh&&(p=Q("<td class='ui-pg-button "+_.cornerall+"'></td>"),Q(p).append("<div class='ui-pg-div'><span class='"+_.icon_base+" "+i.refreshicon+"'></span>"+i.refreshtext+"</div>"),Q("tr",m).append(p),Q(p,m).attr({title:i.refreshtitle||"",id:"refresh_"+h}).click(function(){if(!Q(this).hasClass(_.disabled)){Q.isFunction(i.beforeRefresh)&&i.beforeRefresh.call(o),o.p.search=!1,o.p.resetsearch=!0;try{if("currentfilter"!==i.refreshstate){var e=o.p.id;o.p.postData.filters="";try{Q("#fbox_"+Q.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}Q.isFunction(o.clearToolbar)&&o.clearToolbar.call(o,!1)}}catch(e){}switch(i.refreshstate){case"firstpage":Q(o).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":Q(o).trigger("reloadGrid",[{current:!0}])}Q.isFunction(i.afterRefresh)&&i.afterRefresh.call(o),Q.jgrid.setSelNavIndex(o,this)}return!1}).hover(s,c),p=null),t=Q(".ui-jqgrid").css("font-size")||"11px",Q("body").append("<div id='testpg2' class='ui-jqgrid "+Q.jgrid.styleUI[x].base.entrieBox+"' style='font-size:"+t+";visibility:hidden;' ></div>"),e=Q(m).clone().appendTo("#testpg2").width(),Q("#testpg2").remove(),o.p._nvtd&&(i.dropmenu?(m=null,Q(o).jqGrid("_buildNavMenu",u,h,v,b,j,w,D,y)):e>o.p._nvtd[0]?(o.p.responsive?(m=null,Q(o).jqGrid("_buildNavMenu",u,h,v,b,j,w,D,y)):Q(u+"_"+i.position,u).append(m).width(e),o.p._nvtd[0]=e):Q(u+"_"+i.position,u).append(m),o.p._nvtd[1]=e),o.p.navGrid=!0}o.p.storeNavOptions&&(o.p.navOptions=i,o.p.editOptions=b,o.p.addOptions=j,o.p.delOptions=w,o.p.searchOptions=D,o.p.viewOptions=y,o.p.navButtons=[])}}})},navButtonAdd:function(c,p){var u=this[0].p.styleUI,e=Q.jgrid.styleUI[u].navigator;return p=Q.extend({caption:"newButton",title:"",buttonicon:e.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},p||{}),this.each(function(){if(this.grid&&"string"==typeof c){0===c.indexOf("#")&&(c=c.substring(1)),c="#"+Q.jgrid.jqID(c);var t,e,i,a=Q(".navtable",c)[0],d=this,r=Q.jgrid.styleUI[u].common.disabled,o=Q.jgrid.styleUI[u].common.hover,n=Q.jgrid.styleUI[u].common.cornerall,l=Q.jgrid.styleUI[u].common.icon_base;if(d.p.storeNavOptions&&!p.internal&&d.p.navButtons.push([c,p]),a){if(p.id&&void 0!==Q("#"+Q.jgrid.jqID(p.id),a)[0])return;var s=Q("<td></td>");"NONE"===p.buttonicon.toString().toUpperCase()?Q(s).addClass("ui-pg-button "+n).append("<div class='ui-pg-div'>"+p.caption+"</div>"):Q(s).addClass("ui-pg-button "+n).append("<div class='ui-pg-div'><span class='"+l+" "+p.buttonicon+"'></span>"+p.caption+"</div>"),p.id&&Q(s).attr("id",p.id),"first"!==p.position||0===a.rows[0].cells.length?Q("tr",a).append(s):Q("tr td:eq(0)",a).before(s),Q(s,a).attr("title",p.title||"").click(function(e){return Q(this).hasClass(r)||(Q.jgrid.setSelNavIndex(d,this),Q.isFunction(p.onClickButton)&&p.onClickButton.call(d,e)),!1}).hover(function(){Q(this).hasClass(r)||Q(this).addClass(o)},function(){Q(this).removeClass(o)})}else{(a=Q(".dropdownmenu",c)[0])&&(t=Q(a).val(),e=p.id||Q.jgrid.randId(),i=Q('<li class="ui-menu-item" role="presentation"><a class="'+n+' g-menu-item" tabindex="0" role="menuitem" id="'+e+'">'+(p.caption||p.title)+"</a></li>"),t&&("first"===p.position?Q("#"+t).prepend(i):Q("#"+t).append(i),Q(i).on("click",function(e){return Q(this).hasClass(r)||(Q("#"+t).hide(),Q.isFunction(p.onClickButton)&&p.onClickButton.call(d,e)),!1}).find("a").hover(function(){Q(this).hasClass(r)||Q(this).addClass(o)},function(){Q(this).removeClass(o)})))}}})},navSeparatorAdd:function(a,d){var e=this[0].p.styleUI,r=Q.jgrid.styleUI[e].common;return d=Q.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},d||{}),this.each(function(){var e,t,i;this.grid&&("string"==typeof a&&0!==a.indexOf("#")&&(a="#"+Q.jgrid.jqID(a)),e=Q(".navtable",a)[0],this.p.storeNavOptions&&this.p.navButtons.push([a,d]),e?(t="<td class='ui-pg-button "+r.disabled+"' style='width:4px;'><span class='"+d.sepclass+"'></span>"+d.sepcontent+"</td>","first"!==d.position||0===e.rows[0].cells.length?Q("tr",e).append(t):Q("tr td:eq(0)",e).before(t)):(e=Q(".dropdownmenu",a)[0],t="<li class='ui-menu-item "+r.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",e&&(i=Q(e).val())&&("first"===d.position?Q("#"+i).prepend(t):Q("#"+i).append(t))))})},_buildNavMenu:function(h,m,f,g,v,b,j,w){return this.each(function(){var t=this,e=Q.jgrid.getRegional(t,"nav"),i=t.p.styleUI,a=(Q.jgrid.styleUI[i].navigator,Q.jgrid.styleUI[i].filter),d=Q.jgrid.styleUI[i].common,r="form_menu_"+Q.jgrid.randId(),o=f.navButtonText?f.navButtonText:e.selectcaption||"Actions",n="<button class='dropdownmenu "+d.button+"' value='"+r+"'>"+o+"</button>";Q(h+"_"+f.position,h).append(n);var l,s,c,p,u="alertmod_"+this.p.id;this.p.id,this.p.id;c=Q(".ui-jqgrid").css("font-size")||"11px",p=Q('<ul id="'+r+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+c+'"></ul>'),f.add&&(l=(v=v||{}).id||"add_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.addtext||f.addtitle)+"</a></li>").click(function(){return Q(this).hasClass(d.disabled)||(Q.isFunction(f.addfunc)?f.addfunc.call(t):Q(t).jqGrid("editGridRow","new",v),Q(p).hide()),!1}),Q(p).append(s)),f.edit&&(l=(g=g||{}).id||"edit_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.edittext||f.edittitle)+"</a></li>").click(function(){var e;return Q(this).hasClass(d.disabled)||((e=t.p.selrow)?Q.isFunction(f.editfunc)?f.editfunc.call(t,e):Q(t).jqGrid("editGridRow",e,g):(Q.jgrid.viewModal("#"+u,{gbox:"#gbox_"+Q.jgrid.jqID(t.p.id),jqm:!0}),Q("#jqg_alrt").focus()),Q(p).hide()),!1}),Q(p).append(s)),f.view&&(l=(w=w||{}).id||"view_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.viewtext||f.viewtitle)+"</a></li>").click(function(){var e;return Q(this).hasClass(d.disabled)||((e=t.p.selrow)?Q.isFunction(f.editfunc)?f.viewfunc.call(t,e):Q(t).jqGrid("viewGridRow",e,w):(Q.jgrid.viewModal("#"+u,{gbox:"#gbox_"+Q.jgrid.jqID(t.p.id),jqm:!0}),Q("#jqg_alrt").focus()),Q(p).hide()),!1}),Q(p).append(s)),f.del&&(l=(b=b||{}).id||"del_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.deltext||f.deltitle)+"</a></li>").click(function(){var e;return Q(this).hasClass(d.disabled)||(t.p.multiselect?0===(e=t.p.selarrrow).length&&(e=null):e=t.p.selrow,e?Q.isFunction(f.delfunc)?f.delfunc.call(t,e):Q(t).jqGrid("delGridRow",e,b):(Q.jgrid.viewModal("#"+u,{gbox:"#gbox_"+Q.jgrid.jqID(t.p.id),jqm:!0}),Q("#jqg_alrt").focus()),Q(p).hide()),!1}),Q(p).append(s)),(f.add||f.edit||f.del||f.view)&&Q(p).append("<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),f.search&&(l=(j=j||{}).id||"search_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.searchtext||f.searchtitle)+"</a></li>").click(function(){return Q(this).hasClass(d.disabled)||(Q.isFunction(f.searchfunc)?f.searchfunc.call(t,j):Q(t).jqGrid("searchGrid",j),Q(p).hide()),!1}),Q(p).append(s),j.showOnLoad&&!0===j.showOnLoad&&Q(s).click()),f.refresh&&(l=j.id||"search_"+m,s=Q('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+l+'">'+(f.refreshtext||f.refreshtitle)+"</a></li>").click(function(){if(!Q(this).hasClass(d.disabled)){Q.isFunction(f.beforeRefresh)&&f.beforeRefresh.call(t),t.p.search=!1,t.p.resetsearch=!0;try{if("currentfilter"!==f.refreshstate){var e=t.p.id;t.p.postData.filters="";try{Q("#fbox_"+Q.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}Q.isFunction(t.clearToolbar)&&t.clearToolbar.call(t,!1)}}catch(e){}switch(f.refreshstate){case"firstpage":Q(t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":Q(t).trigger("reloadGrid",[{current:!0}])}Q.isFunction(f.afterRefresh)&&f.afterRefresh.call(t),Q(p).hide()}return!1}),Q(p).append(s)),Q(p).hide(),Q("body").append(p),Q("#"+r).addClass("ui-menu "+a.menu_widget),Q("#"+r+" > li > a").hover(function(){Q(this).addClass(d.hover)},function(){Q(this).removeClass(d.hover)}),Q(".dropdownmenu",h+"_"+f.position).on("click",function(e){var t=Q(this).offset(),i=t.left,a=parseInt(t.top),d=Q(this).val();Q("#"+d).show().css({top:a-(Q("#"+d).height()+10)+"px",left:i+"px"}),e.stopPropagation()}),Q("body").on("click",function(e){Q(e.target).hasClass("dropdownmenu")||Q("#"+r).hide()})})},GridToForm:function(a,d){return this.each(function(){var e,t=this;if(t.grid){var i=Q(t).jqGrid("getRowData",a);if(i)for(e in i)i.hasOwnProperty(e)&&(Q("[name="+Q.jgrid.jqID(e)+"]",d).is("input:radio")||Q("[name="+Q.jgrid.jqID(e)+"]",d).is("input:checkbox")?Q("[name="+Q.jgrid.jqID(e)+"]",d).each(function(){Q(this).val()==i[e]?Q(this)[t.p.useProp?"prop":"attr"]("checked",!0):Q(this)[t.p.useProp?"prop":"attr"]("checked",!1)}):Q("[name="+Q.jgrid.jqID(e)+"]",d).val(i[e]))}})},FormToGrid:function(t,a,d,r){return this.each(function(){var e,i;this.grid&&(d=d||"set",r=r||"first",e=Q(a).serializeArray(),i={},Q.each(e,function(e,t){i[t.name]=t.value}),"add"===d?Q(this).jqGrid("addRowData",t,i,r):"set"===d&&Q(this).jqGrid("setRowData",t,i))})}})});