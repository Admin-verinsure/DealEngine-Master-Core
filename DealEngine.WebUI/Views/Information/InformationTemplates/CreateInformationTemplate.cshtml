@model DealEngine.WebUI.Models.InformationBuilderViewModel

<div id="content" class="container">
    <form class="needs-validation">
        <div class="card">
            <div class="card-header">
                <span class="widget-icon">
                    <h2><i class="fa fa-list-alt"></i> Information Sheet Templates</h2>
                </span>
            </div>
            <div class="card-body">
                <div class="form-group">

                    <div class="accordion" id="accordion">
                        <div class="card">
                            <div class="card-header" id="createtemplate">
                                <h2 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#create" aria-expanded="true" aria-controls="create">
                                        Create Template
                                    </button>
                                </h2>
                            </div>

                            <div id="create" class="collapse show" aria-labelledby="createtemplate" data-parent="#accordion">
                                <div class="card-body">
                                    <div class="form-group">
                                        <input placeholder="Template Name" type="text" id="templatename" required class="form-control" />
                                    </div>
                                    <div class="form-group">
                                        <input placeholder="Template Name" type="text" id="templatename" required class="form-control" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        @for (int x = 0; x < Model.InformationTemplates.Count(); x++)
                        {
                            <div class="card">
                                <div class="card-header" id="heading_@Model.InformationTemplates.ElementAt(x).Id">
                                    <h2 class="mb-0">
                                        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#accordion_@Model.InformationTemplates.ElementAt(x).Id" aria-expanded="true" aria-controls="accordion_@Model.InformationTemplates.ElementAt(x).Id">
                                            @Model.InformationTemplates.ElementAt(x).Name
                                        </button>
                                    </h2>
                                </div>

                                <div id="accordion_@Model.InformationTemplates.ElementAt(x).Id" class="collapse" aria-labelledby="heading_@Model.InformationTemplates.ElementAt(x).Id" data-parent="#accordion">
                                    <div class="card-body">
                                        <table>
                                            <tbody>
                                                @for (int i = 0; i < @Model.InformationTemplates.ElementAt(x).Sections.Count(); i++)
                                                {
                                                    <tr>
                                                        <td>
                                                            <div class="form-group">
                                                                <div class="form-check">
                                                                    <input class="form-check-input" type="checkbox" value="" id="@Model.InformationTemplates.ElementAt(x).Sections.ElementAt(i).Id" required>
                                                                    <label class="form-check-label" for="@Model.InformationTemplates.ElementAt(x).Sections.ElementAt(i).Id">
                                                                        Add Section: @Model.InformationTemplates.ElementAt(x).Sections.ElementAt(i).Name
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>

                </div>
            </div>
        </div>
    </form>
</div>


@section pagespecific {
    <script type="text/javascript">

        $(document).ready(function () {

            // Accordian
            //    var accordionIcons = {
            //        header: "fa fa-circle-o",           // custom icon class
            //        activeHeader: "fa fa-dot-circle-o"  // custom icon class
            //    };

            //    $("#accordion").accordion({
            //        autoHeight: false,
            //        heightStyle: "content",
            //        collapsible: false,
            //        animate: 300,
            //        icons: accordionIcons,
            //        header: "h4",
            //        activate: function (event, ui) { }
            //    });


            //})

            //$("#accordion").on("accordionactivate", function (event, ui) {

            //    if (ui.oldPanel != null) {
            //        alert("Saving");
            //    }
            //});

            function AddBusinessActivity(caller, dropDownId, tableId) {

                var dropDownText = $(dropDownId + " option:selected").text();
                var tBody = $(tableId).find('tbody:last');

                var tableRow = $(tableId + " tr td").filter(function () {
                    return $(this).text() == dropDownText;
                }).closest("tr");

                if (tableRow != null && tableRow.length == 0)
                    tBody.append("<tr class = \"row\"><td class = \"col\" style=\"padding-top: 10px;\">" + dropDownText + "</td><td style=\"padding-top: 10px;\"><label class=\"input\"><input type = \"number\" /></label></td><td style=\"padding-top: 10px;\"> % </td></tr>");
            };


    </script>
}








