@model DealEngine.WebUI.Models.InformationViewModel
@using System.Linq

<div class="padding-10">
    <div id="proposalcreate-form" class="smart-form" novalidate="novalidate">

        @*@tabs.Tab("List All")
            @tabs.Tab("Edit")
            @tabs.Tab("Add")*@
        <div id="DANZNamedPartiestabs" class="AccordionTab">
            <ul id="tab" class="nav nav-tabs">
                <li class="nav nav-tabs active"> <a href="#DANZNamedPartyTabs1"> List All </a> </li>
                <li class="nav nav-tabs"> <a href="#DANZNamedPartyTabs2"> Edit </a> </li>
                <li class="nav nav-tabs"> <a href="#DANZNamedPartyTabs3"> Add </a> </li>
                <li class="nav nav-tabs DANZNamedPArtyRemoved"> <a href="#DANZNamedPartyTabs4"> Removed </a> </li>

            </ul>

            <div id="DANZNamedPartyTabs1" class="tab-content">
                <fieldset>
                    <div class="row">
                        <section class="col col-xs-12">
                            @*<script src="~/jquery/jquery.min.js"></script>*@
                            <script type="text/javascript">
                                $(window).on('load',function () {
                            $("#DANZNamedParties").jqGrid({
                                url: "/Services/GetPminzNamedParties?informationId=@Model.AnswerSheetId&validated=true&removed=false&ceased=false",
						        datatype: "xml",
                                mtype: "GET",
                                async: true,
                                colNames: ["","Organisation Name","Organisation Type",""],
                                colModel: [
                                    {
                                        name: "update", align: 'center', search: false, formatter: function (cellvalue, options, rowobject) {
                                            return ('<button onclick="EditDANZNamedParties(\'bu\', \'' + cellvalue + '\'); SetCurrentTab(\'DANZNamedPartyTabs2\');" type="button" class="btn btn-success btn-sm"><i class="fa fa-edit"></i></button>' );
                                        }
                                    },
                                    { name: "OrganisationName", align: 'center' },
                                    { name: "OrganisationType", align: 'center' },
                                    {
                                         name: "update", align: 'center', width: 120, search: false, formatter: function (cellvalue, options, rowobject) {

                                                        return ('<button onclick="SetPMINZNamedPartyRemovedStatus(\'' + cellvalue + '\', \'true\', \'#DANZNamedParties\', \'#tblDANZRemovedPrincipalDirectors\');" type="button"  class=" btn btn-danger btn-sm" id="trash"><span class="fa fa-trash"></span></button>');
                                         }
                                     }

								],
						        autowidth: true,
                                pager: "#pagerDANZNamedParty",
						        rowNum: 10,
						        rowList: [10, 20, 30],
                                sortname: "Name",
						        sortorder: "desc",
						        viewrecords: true,
						        gridview: true,
						        autoencode: true
						    });
						    $("#DANZNamedParties").jqGrid('navGrid',
						    	'#pagerDANZNamedParty',
						    	{edit: false, add: false, del: false},
						    	//options
						    	{height:280,reloadAfterSubmit:false},
						    	// edit options
						    	{height:280,reloadAfterSubmit:false},
						    	// add options
						    	{reloadAfterSubmit:false},
						    	// del options
						    	{sopt:['eq','bw','cn']}
						    	// search options
						    );
						});
                            </script>
                            <table id="DANZNamedParties"><tr><td></td></tr></table>
                            <div id="DANZNamedParty"></div>
                        </section>
                    </div>
                </fieldset>
            </div>
            <div id="DANZNamedPartyTabs2" class="tab-content">
                <fieldset id="fieldset">
                    <input id="DANZNamedPartyOrganisationId" class="b" name="ID" type="hidden">
                    <!-- 1st row -->
                    @*<div class="row">*@
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class=" label required">Type</label>
                        <label class="input">
                            <select id="EditDANZType" onchange="DANZTypeSelected('DANZType', 'Edit' )" class="form-control b" name="Type">
                                <option selected="selected" value="">-- Select --</option>
                                <option value="project management personnel"> Personnel</option>
                                <option value="Subsidiary">Subsidiary</option>
                                <option value="PreviousConsultingBusiness">Previous Consulting Business</option>
                                <option value="Mergers">Mergers</option>
                                <option value="JointVenture">Joint Venture</option>


                            </select>
                        </label>
                        <p class="validationContainer" id="ValidateAddPMINZType"></p>

                    </section>

                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 EditNonProjectPersonnelSec">
                        <label class=" label required">Organisation Type</label>
                        <label class="input">
                            <select id="EditDANZOrgTypeName" onchange="DANZOrgTypeSelected('DANZOrgTypeName', 'Edit')" class="form-control b" name="OrganisationTypeName">
                                <option selected="selected" value="">-- Select --</option>
                                <option value="Person - Individual">Private/Soletrader</option>
                                <option value="Corporation – Limited liability">Limited Liability Company</option>
                                <option value="Trust">Trust</option>
                                <option value="Partnership">Partnership</option>

                            </select>
                        </label>
                        <p class="validationContainer" id="validateAddPMINZOrgTypeName"></p>

                    </section>


                    <div class="hidden nonprivate">

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">Organisation Name</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" data-name="sharedOrgName" id="EditDANZOrgName" name="OrganisationName" placeholder="Organisation Name" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZOrgName"></p>
                        </section>
                    </div>

                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 hidden Editprivate" id="Addfirstnamesec">
                        <label class="label required">First name:</label>
                        <label class="input">
                            <i></i>
                            <input data-type="TEXTBOX" id="EditDANZFirstName" name="FirstName" placeholder="First Name" value="">
                        </label>
                        <p class="validationContainer" id="validateAddPMINZFirstName"></p>

                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 hidden Editprivate" id="Addlastnamesec">
                        <label class="label required">Last name:</label>
                        <label class="input">
                            <i></i>
                            <input data-type="TEXTBOX" id="EditDANZLastName" name="LastName" placeholder="Last Name" value="">
                        </label>
                        <p class="validationContainer" id="validateAddPMINZLastName"></p>

                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 hidden EditPersonnelSec">
                        <label class="label required">Email:</label>
                        <label class="input">
                            <i></i>
                            <input data-type="TEXTBOX" id="EditDANZEmail" name="Email" placeholder="E-mail" value="" required>
                        </label>
                        <p class="validationContainer" id="validateAddPMINZEmail"></p>

                    </section>


                    <div class="hidden EditPersonnelSec">
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">Relation to insured entity:</label>

                            <label class="input w100" required>
                                <select class="form-control oper" id="EditDANZInsuredEntity" name="InsuredEntityRelation">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="Director">Director</option>
                                    <option value="Employee">Employee</option>
                                    <option value="Contractor">Contractor</option>
                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZInsuredEntity"></p>

                        </section>



                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label ">Qualifications:</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" id="EditDANZQualifications" name="Qualifications" placeholder="Qualifications" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZQualifications"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label ">Date Qualified :</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" id="EditDANZDateQualified" name="DateQualified" placeholder="Date Qualified" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZProfAffiliation"></p>

                        </section>
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6" id="EditisContractorInsuredsec" style="display:none" required>
                            <label class="label required">Is this personnel registered as a licensed building practioner?</label>

                            <label class="input w100" required>
                                <select class="form-control oper" id="EditDANZIsRegisteredLicensed" name="IsRegisteredLicensed">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZIsContractorInsured"></p>

                        </section>
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">Design Licensed:</label>

                            <label class="input w100" required>
                                <select class="form-control oper" id="EditDANZDesignLicensed" name="DesignLicensed">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="None">None</option>
                                    <option value="Category 1">Category 1</option>
                                    <option value="Category 2">Category 2</option>
                                    <option value="Category 3">Category 3</option>

                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZInsuredEntity"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">Site Licensed:</label>

                            <label class="input w100" required>
                                <select class="form-control oper" id="EditDANZSiteLicensed" name="SiteLicensed">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="None">None</option>
                                    <option value="Category 1">Category 1</option>
                                    <option value="Category 2">Category 2</option>
                                    <option value="Category 3">Category 3</option>

                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZInsuredEntity"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6" id="AddisContractorInsuredsec" style="display:none" required>
                            <label class="label required">Does this person have an association membership?</label>

                            <label class="input w100" required>
                                <select class="form-control oper" onchange="AssociationMembershipSelected('DANZIsCurrentMembership' , 'Add')" id="EditDANZIsCurrentMembership" name="IsCurrentMembership">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZIsContractorInsured"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 hidden EditAssociationsec">
                            <label class="label ">Association:</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" id="EditDANZAssociation" name="Othercompanyname" placeholder="Association" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZQualifications"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 hidden EditAssociationsec">
                            <label class="label ">years as member :</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" id="EditDANZYearsOfExp" name="YearofPractice" placeholder="years as member" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZProfAffiliation"></p>

                        </section>
                    </div>
                        <br />


                        <section class="col col-xs-12 col-sm-8 col-md-8 col-lg-8">
                            <button onclick="ValidateDANZNamedParty(event, '#DANZNamedPartyTabs2', '#DANZNamedParties', 'DANZNamedPartyTabs1','AddEdit')" class="btn-sm AddupdateBoat" id="updateBoat">Update</button>
                            <button onclick="ClearBoats(event,'#DANZNamedPartyTabs2','DANZNamedPartyTabs1')" class="btn-sm AddClearBoat" id="ClearBoat">Cancel Update</button>
                        </section>


                </fieldset>
            </div>
            <div id="DANZNamedPartyTabs3" class="tab-content">
                <fieldset id="fieldset">
                    <input id="AddPMINZNamedPartyOrganisationId" class="b" name="ID" type="hidden">
                    <!-- 1st row -->
                    @*<div class="row">*@
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class=" label required">Type</label>
                        <label class="input">
                            <select id="AddDANZType" onchange="DANZTypeSelected('DANZType', 'Add' )" class="form-control b" name="Type">
                                <option selected="selected" value="">-- Select --</option>
                                <option value="project management personnel"> Personnel</option>
                                <option value="Subsidiary">Subsidiary</option>
                                <option value="PreviousConsultingBusiness">Previous Consulting Business</option>
                                <option value="Mergers">Mergers</option>
                                <option value="JointVenture">Joint Venture</option>


                            </select>
                        </label>
                        <p class="validationContainer" id="ValidateAddPMINZType"></p>

                    </section>

                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 AddNonProjectPersonnelSec">
                        <label class=" label required">Organisation Type</label>
                        <label class="input">
                            <select id="AddDANZOrgTypeName" onchange="DANZOrgTypeSelected('DANZOrgTypeName', 'Add')" class="form-control b" name="OrganisationTypeName">
                                <option selected="selected" value="">-- Select --</option>
                                <option value="Person - Individual">Private/Soletrader</option>
                                <option value="Corporation – Limited liability">Limited Liability Company</option>
                                <option value="Trust">Trust</option>
                                <option value="Partnership">Partnership</option>

                            </select>
                        </label>
                        <p class="validationContainer" id="validateAddPMINZOrgTypeName"></p>

                    </section>

                    <div class="hidden nonprivate">

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">Organisation Name</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" data-name="sharedOrgName" id="AddDANZOrgName" name="OrganisationName" placeholder="Organisation Name" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZOrgName"></p>
                        </section>
                    </div>

                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 hidden Addprivate" id="Addfirstnamesec">
                        <label class="label required">First name:</label>
                        <label class="input">
                            <i></i>
                            <input data-type="TEXTBOX" data-name="FirstName" id="AddDANZFirstName" name="FirstName" placeholder="First Name" value="">
                        </label>
                        <p class="validationContainer" id="validateAddPMINZFirstName"></p>

                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 hidden Addprivate" id="Addlastnamesec">
                        <label class="label required">Last name:</label>
                        <label class="input">
                            <i></i>
                            <input data-type="TEXTBOX" data-name="LastName" id="AddDANZLastName" name="LastName" placeholder="Last Name" value="">
                        </label>
                        <p class="validationContainer" id="validateAddPMINZLastName"></p>

                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 hidden AddPersonnelSec">
                        <label class="label required">Email:</label>
                        <label class="input">
                            <i></i>
                            <input data-type="TEXTBOX" data-name="Email" id="AddDANZEmail" name="Email" placeholder="E-mail" value="" required>
                        </label>
                        <p class="validationContainer" id="validateAddPMINZEmail"></p>

                    </section>


                    <div class="hidden AddPersonnelSec">

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">Relation to insured entity:</label>

                            <label class="input w100" required>
                                <select class="form-control oper" id="AddDANZInsuredEntity" name="InsuredEntityRelation">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="Director">Director</option>
                                    <option value="Employee">Employee</option>
                                    <option value="Contractor">Contractor</option>
                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZInsuredEntity"></p>

                        </section>



                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label ">Qualifications:</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" data-name="Qualifications" id="AddDANZQualifications" name="Qualifications" placeholder="Qualifications" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZQualifications"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label ">Date Qualified :</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" data-name="ProfAffiliation" id="AddDANZDateQualified" name="DateQualified" placeholder="Date Qualified" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZProfAffiliation"></p>

                        </section>
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6" id="AddisContractorInsuredsec" style="display:none" required>
                            <label class="label required">Is this personnel registered as a licensed building practioner?</label>

                            <label class="input w100" required>
                                <select class="form-control oper" id="AddDANZIsRegisteredLicensed" name="IsRegisteredLicensed">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZIsContractorInsured"></p>

                        </section>
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">Design Licensed:</label>

                            <label class="input w100" required>
                                <select class="form-control oper" id="AddDANZDesignLicensed" name="DesignLicensed">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="None">None</option>
                                    <option value="Category 1">Category 1</option>
                                    <option value="Category 2">Category 2</option>
                                    <option value="Category 3">Category 3</option>

                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZInsuredEntity"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">Site Licensed:</label>

                            <label class="input w100" required>
                                <select class="form-control oper" id="AddDANZSiteLicensed" name="SiteLicensed">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="None">None</option>
                                    <option value="Category 1">Category 1</option>
                                    <option value="Category 2">Category 2</option>
                                    <option value="Category 3">Category 3</option>

                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZInsuredEntity"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6" id="AddisContractorInsuredsec" required>
                            <label class="label required">Does this person have an association membership?</label>

                            <label class="input w100" required>
                                <select class="form-control oper" onchange="AssociationMembershipSelected('DANZIsCurrentMembership' , 'Add')" id="AddDANZIsCurrentMembership" name="IsCurrentMembership">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                            </label>
                            <p class="validationContainer" id="validateAddPMINZIsContractorInsured"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6 hidden AddAssociationsec">
                            <label class="label ">Association:</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" data-name="Qualifications" id="AddDANZAssociation" name="Othercompanyname" placeholder="Qualifications" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZQualifications"></p>

                        </section>

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6  hidden AddAssociationsec">
                            <label class="label ">years as member :</label>
                            <label class="input">
                                <i></i>
                                <input data-type="TEXTBOX" data-name="ProfAffiliation" id="AddDANZYearsOfExp" name="YearofPractice" placeholder="Professional Affiliations" value="">
                            </label>
                            <p class="validationContainer" id="validateAddPMINZProfAffiliation"></p>

                        </section>
                     </div>
                        <br />



                        <section class="col col-xs-12 col-sm-8 col-md-8 col-lg-8">
                            <p class="validationContainer" id="validatenamedparty"></p>
                            @*<button onclick="ValidateDANZNamedParty(event,'#DANZNamedPartyTabs3', '#DANZNamedParties','DANZNamedPartyTabs1','AddDANZ')" class="btn-sm AddupdateBoat" id="updateBoat">Add</button>*@
                            <button onclick="AddDANZNamedParty(event,'#DANZNamedPartyTabs3', '#DANZNamedParties','DANZNamedPartyTabs1','AddDANZ')" class="btn-sm AddupdateBoat" id="updateBoat">Add</button>

                            <button onclick="ClearBoats(event,'#DANZNamedPartyTabs3','DANZNamedPartyTabs1')" class="btn-sm AddClearBoat" id="ClearNamedParty">Cancel Add</button>
                        </section>

                </fieldset>
            </div>
            <div id="DANZNamedPartyTabs4" class="tab-content">

                <fieldset>
                    <div class="row">
                        <section class="col col-xs-12">
                            <script type="text/javascript">
                                 $(".DANZPrincipalRemoved").click(function () {
                               $("#tblDANZRemovedPrincipalDirectors").jqGrid({
                                url: "/Services/GetDeletedPartners?informationId=@Model.AnswerSheetId&validated=true&removed=true&ceased=false",
                                datatype: "xml",
                                   mtype: "GET",
                                async: true,
                                   colNames: ["","Organisation Name", "Organisation Type"],
                                    colModel: [

                                    {
                                        name: "update", align: 'center' ,width: 60, search: false, formatter: function (cellvalue, options, rowobject) {/*{ class=" btn btn-danger btn-sm"><span class="glyphicon glyphicon-trash*/
                                            return '<button onclick="SetPMINZNamedPartyRemovedStatus(\'' + cellvalue + '\', \'false\', \'#tblDANZRemovedPrincipalDirectors\', \'#DANZNamedParties\');" type="button" class=" btn btn-success btn-sm" ><i class="fa fa-undo"></i></button>';

                                        }
                                    },
                                     { name: "OrganisationName", align: 'center' },
                                    { name: "OrganisationType", align: 'center' },
                                   ],
                                autowidth: true,
                                pager: "DANZRemovedpagerNamedParty",
                                rowNum: 10,
                                rowList: [10, 20, 30],
                                sortname: "OrganisationName",
                                sortorder: "desc",
                                viewrecords: true,
                                gridview: true,
                                autoencode: true
                            });
                            $("#tblDANZRemovedPrincipalDirectors").jqGrid('navGrid',
                                '#DANZRemovedpagerNamedParty',
                                { edit: false, add: false, del: false },
                                //options
                                { height: 280, reloadAfterSubmit: false },
                                // edit options
                                { height: 280, reloadAfterSubmit: false },
                                // add options
                                { reloadAfterSubmit: false },
                                // del options
                                { sopt: ['eq', 'bw', 'cn'] }
                                // search options
                                 );
                                });
                            </script>
                            <table id="tblDANZRemovedPrincipalDirectors"><tr><td></td></tr></table>
                            <div id="DANZRemovedpagerNamedParty"></div>
                        </section>
                    </div>
                </fieldset>
            </div>

        </div>
    </div>
</div>



<script type="text/javascript">

      function ValidateDANZNamedParty(event, tabId, tableId, currentTab,type) {
         debugger;
         event.preventDefault();
         var validity = true;
         var validatortype = type;
         
             var pminzType = $('#' + validatortype + 'Type').val();
             var pminzorgType = $('#' + validatortype + 'OrgTypeName').val();
             var pminzfname = $('#' + validatortype + 'FirstName').val();
             //var pminzorgname = $('#' + validatortype + 'OrgName').val();
             var pminzlname = $('#' + validatortype + 'LastName').val();
             var pminzemail = $('#' + validatortype + 'Email').val();
             var pminzinsuredentity = $('#' + validatortype + 'InsuredEntity').val();

             var pminziscontractorinsured = $('#' + validatortype + 'Qualifications').val();
             var pminzisinsuredrequired = $('#' + validatortype + 'DateQualified').val();
             var pminziscurrentmembership = $('#' + validatortype + 'DesignLicensed').val();
             var pminzcurrentmembershipno = $('#' + validatortype + 'SiteLicensed').val();
             var pminzcerttype = $('#' + validatortype + 'IsCurrentMembership').val();
             var pminzcurrentmembershipno = $('#' + validatortype + 'Association').val();
             var pminzcerttype = $('#' + validatortype + 'YearsOfExp').val();


         if (pminzType != null) {

             if (pminzType == "") {
                 $("#validate" + type + "Type").html("<font color='red'>Field is required</font>");
                 if (validity) {
                     validity = false;
                 }
             } else {
                 $("#validate" + type + "Type").html("<i></i>");
             }

             if (pminzorgType == "" && pminzType != "project management personnel") {
                 $("#validate" + type + "OrgTypeName").html("<font color='red'>Field is required</font>");
                 if (validity) {
                     validity = false;
                 }
             } else {
                 $("#validate" + type + "OrgTypeName").html("<i></i>");
             }

             if (pminzfname == "" && (pminzorgType == "Person - Individual" || pminzType == "project management personnel")) {
                 $("#validate" + type + "FirstName").html("<font color='red'>Field is required</font>");
                 if (validity) {
                     validity = false;
                 }
             } else {
                 $("#validate" + type + "FirstName").html("<i></i>");
             }

             if (pminzlname == "" && (pminzorgType == "Person - Individual" || pminzType == "project management personnel")) {
                 $("#validate" + type + "LastName").html("<font color='red'>Field is required</font>");
                 if (validity) {
                     validity = false;
                 }
             } else {
                 $("#validate" + type + "LastName").html("<i></i>");
             }


             if (pminzorgname == "" && pminzorgType != "Person - Individual" && pminzType != "project management personnel") {
                 $("#validate" + type + "OrgName").html("<font color='red'>Field is required</font>");
                 if (validity) {
                     validity = false;
                 }
             } else {
                 $("#validate" + type + "OrgName").html("<i></i>");
             }

             if (pminzType == "project management personnel") {
                 if (pminzemail == "") {
                     $("#validate" + type + "Email").html("<font color='red'>Field is required</font>");
                     if (validity) {
                         validity = false;
                     }
                 } else {
                     $("#validate" + type + "Email").html("<i></i>");
                 }


                 if (pminzinsuredentity == "") {
                     $("#validate" + type + "InsuredEntity").html("<font color='red'>Field is required</font>");
                     if (validity) {
                         validity = false;
                     }
                 } else {
                     $("#validate" + type + "InsuredEntity").html("<i></i>");
                 }

                 if (pminziscontractorinsured == "" && pminzinsuredentity == "Contractor") {
                     $("#validate" + type + "IsContractorInsured").html("<font color='red'>Field is required</font>");
                     if (validity) {
                         validity = false;
                     }
                 } else {
                     $("#validate" + type + "IsContractorInsured").html("<i></i>");
                 }

                 if (pminzisinsuredrequired == "" && pminziscontractorinsured == "false") {
                     $("#validate" + type + "IsInsuredRequired").html("<font color='red'>Field is required</font>");
                     if (validity) {
                         validity = false;
                     }
                 } else {
                     $("#validate" + type + "IsInsuredRequired").html("<i></i>");
                 }


                 if (pminziscurrentmembership == "") {
                     $("#validate" + type + "IsCurrentMembership").html("<font color='red'>Field is required</font>");
                     if (validity) {
                         validity = false;
                     }
                 } else {
                     $("#validate" + type + "IsCurrentMembership").html("<i></i>");
                 }

                 if (pminzcurrentmembershipno == "" && pminziscurrentmembership == "true") {
                     $("#validate" + type + "CurrentMembershipNo").html("<font color='red'>Field is required</font>");
                     if (validity) {
                         validity = false;
                     }
                 } else {
                     $("#validate" + type + "CurrentMembershipNo").html("<i></i>");
                 }

                 if (pminzcerttype == "") {
                     $("#validate" + type + "CertType").html("<font color='red'>Field is required</font>");
                     if (validity) {
                         validity = false;
                     }
                 } else {
                     $("#validate" + type + "CertType").html("<i></i>");
                 }
             }
             if (validity == false) {
                 return false;
             } else {
                 if (type == "AddPMINZ") {
                    AddPMINZNamedParty(event, tabId, tableId, currentTab);
                 }
                 else {
                        if (type == "PMINZ")
                    EditPMINZNamedParty(event, tabId, tableId, currentTab);

                 }
             }
         } else {
                 if (pminzorgname == "") {
                     $("#validate" + type + "OrgName").html("<font color='red'>Field is required</font>");
                     if (validity) {
                         validity = false;
                     }
                 } else {
                     $("#validate" + type + "OrgName").html("<i></i>");
                 }

                 if (pminzemail == "") {
                     $("#validate" + type + "Email").html("<font color='red'>Field is required</font>");
                     if (validity) {
                         validity = false;
                     }
                 } else {
                     $("#validate" + type + "Email").html("<i></i>");
                 }

                 if (validity == false) {
                     return false;
                 } else {
                     EditPMINZNamedParty(event, tabId, tableId, currentTab);
                 }
             
         }
      };


    function AssociationMembershipSelected(typeselected, mode) {
        var selector = mode + typeselected;
        var addTypeselected = document.getElementById(selector);
        if (addTypeselected.options[addTypeselected.selectedIndex].value == "true") {
            debugger;
            $('.'+mode+'Associationsec').removeClass('hidden');
        } else {
           $('.'+mode+'Associationsec').addClass('hidden');
        }
    }

    function DANZOrgTypeSelected(typeselected, mode) {
        var selector = mode + typeselected;
        var addTypeselected = document.getElementById(selector);
        if (addTypeselected.options[addTypeselected.selectedIndex].value == "Person - Individual") {
            debugger;
            $('.private').removeClass('hidden');
            $('.nonprivate').addClass('hidden');

        } else {
             $('.private').addClass('hidden');
            $('.nonprivate').removeClass('hidden');
        }
    }

     function DANZTypeSelected(typeselected, mode) {
        var selector =  mode + typeselected;
         var addTypeselected = document.getElementById(selector);
         var hh = addTypeselected.options[addTypeselected.selectedIndex].value;
        if (addTypeselected.options[addTypeselected.selectedIndex].value == "project management personnel") {
            debugger;
          
            $("." + mode + "PersonnelSec").removeClass('hidden');
            $("." + mode +"Addprivate").removeClass('hidden');
            $("." + mode + "NonProjectPersonnelSec").addClass('hidden');
            

        } else {
            $("." + mode + "PersonnelSec").addClass('hidden');
            $("." + mode +"Addprivate").addClass('hidden');
            $("." + mode + "NonProjectPersonnelSec").removeClass('hidden');
        }
     }

    
    function AddDANZNamedParty(event, tabId, tableId, currenttab) {
        debugger;
        event.preventDefault();
        var informationId = $('#AnswerSheetId').serialize();
        var proddata = $.grep([$(tabId + " :input").serialize(), informationId], Boolean).join("&");
        $.ajax({
            url: '@Url.Action("AddPMINZNamedParty", "Services")',
            type: "POST",
            data: proddata
        })
            .done(function (data) {
                        debugger;
                SetCurrentTab(currenttab);
                 $(tableId).trigger('reloadGrid');
                $(tabId + " :input").val("");
                $('#IsInsuredRequired').val('');
                $('#IsContractorInsured').val('');
                $('#isContractorInsuredsec').hide();
                $('#isInsuredrequiredsec').hide();

            })
            .fail(function (jqXHR, textStatus, errorThrown) {
                        debugger;
                alert("There was an error while trying to save the Vehicle.");
            });
    };



    function EditDANZNamedParties(classId, PMINZNamedPartyId) {
        debugger;
        event.preventDefault();
        var _sheetId = $('#AnswerSheetId').val();
        var postData = {
		'partyID': PMINZNamedPartyId,
            'answerSheetId': _sheetId
        };
        $.ajax({
            url: '@Url.Action("GetPMINZNamedParties", "Services")',
            type: "Post",
            data: postData
        })
            .done(function (data) {
                debugger;
                $('#DANZNamedPartyOrganisationId').val(data.id);

                if (data.type == "Owner") {

                    $('.nonOwnerSec').addClass('hidden');
                    $('.OwnerSec').removeClass('hidden');
                    $('.PMINZOrganisationTypesec').addClass('hidden');
                    
                } else {
                    $('.nonOwnerSec').removeClass('hidden');
                    $('.OwnerSec').addClass('hidden');
                      $('.PMINZOrganisationTypesec').removeClass('hidden');
                }

              
                 $('#EditDANZType').val(data.type);
                 $('#EditDANZOrgTypeName').val(data.organisationTypeName);
                 $('#EditDANZFirstName').val(data.firstName);
                 $('#EditDANZLastName').val("" + data.lastName);
                 $('#EditDANZQualifications').val(data.qualifications);
                 $('#EditDANZEmail').val(data.email);
                 $('#EditDANZInsuredEntity').val(data.insuredEntityRelation);
                 $('#EditDANZDateQualified').val(""+data.dateQualified);
                 $('#EditDANZIsRegisteredLicensed').val(""+data.isRegisteredLicensed);
                 $('#EditDANZDesignLicensed').val(data.designLicensed);
                 $('#EditDANZIsCurrentMembership').val("" + data.isCurrentMembership);
                 $('#EditDANZSiteLicensed').val(data.siteLicensed);
                 $('#EditDANZAssociation').val(data.Othercompanyname);
                $('#EditDANZYearsOfExp').val(data.YearofPractice);

                  if (data.type == "project management personnel") {
                   DANZTypeSelected('DANZType', 'Edit' );
                }

                //if (data.type != "Owner") {
                //    EditPMINZOrgTyprselected('PMINZOrganisationType');
                //    EditPMINZTypeSelected('PMINZType');
                //}

                  UpdateChosen();
            });
    };


    function EditPMINZNamedParty(event, tabId, tableId, currenttab) {
                debugger;
        event.preventDefault();
        var informationId = $('#AnswerSheetId').serialize();
        var proddata = $.grep([$(tabId + " :input").serialize(), informationId], Boolean).join("&");
        $.ajax({
            url: '@Url.Action("EditPMINZNamedParty", "Services")',
            type: "POST",
            data: proddata
        })
            .done(function (data) {
                        debugger;
                SetCurrentTab(currenttab);
                 $(tableId).trigger('reloadGrid');
                $(tabId + " :input").val("");
                $('#IsInsuredRequired').val('');
            $('#IsContractorInsured').val('');
              $('#isContractorInsuredsec').hide();
              $('#isInsuredrequiredsec').hide();

            })
            .fail(function (jqXHR, textStatus, errorThrown) {
                        debugger;
                alert("There was an error while trying to save the Vehicle.");
            });
    };

     function SetPMINZNamedPartyRemovedStatus(PrincipalId, status, sourceTable, destTable) {
        var AnswersheetId = $('#AnswerSheetId').val();
        var postData = {
            'answersheetId': AnswersheetId,
            'principalId': PrincipalId,
            'status': status
        };

        $.ajax({
            url: '@Url.Action("SetPrincipalRemovedStatus", "Services")',
            type: "Post",
            data: postData
        })
            .done(function (data) {
                if (data === true) {
                    $(sourceTable).trigger('reloadGrid');
                    $(destTable).trigger('reloadGrid');
                }
            });
    }


   

</script>


<style>

    .required:after {
        content: " *";
        color: red;
        font-size: 20px;
    }

    .selectuse option {
        background-color: white;
    }
</style>