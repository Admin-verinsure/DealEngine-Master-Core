@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<script type="text/javascript">
    /*add data*/
    $('#updateTypeDelete').on('show.bs.modal', function (e) {
        $('.modal .modal-body').css('height', 'auto');
        var updateTypeId = $(e.relatedTarget).data('updateType-id');
        $(e.currentTarget).find('input[name="UpdateTypeId"]').val(updateTypeId);
    });

    $("#btnUpdateTypeSubmit").click(function () {
        var valid = ValidateUpdateType();
        if (valid) {
            updateTypeSubmit();
        }

    });



    function ValidateUpdateType() {
        var updateTypeName = $("#NameType").val();
        var updateTypeValue = $("#ValueType").val();
        var validation = true;
    
        if (updateTypeValue == "") {
            $('#validateUpdateTypeName').html("<font color='red'>Field is required</font>");
            if (validation) {
                validation = false;
            }
        } else {
            $('#validateUpdateTypeName').html("");
        }
        if (updateTypeName == "") {
            $('#validateUpdateTypeValue').html("<font color='red'>Field is required</font>");
            if (validation) {
                validation = false;
            }
        } else {
            $('#validateUpdateTypeValue').html("");
        }
     
        return validation;
    }



    function updateTypeSubmit() {
        //var agreement = $("#ClientAgreementId").val();
        var nameType = $("#NameType").val();
        var valueType = $("#ValueType").val();
        var TcCheckbox = document.getElementById("tc");
        var Tc = TcCheckbox.checked;
        //console.log("TcCheckbox=" + Tc);

        var BrokerCheckbox = document.getElementById("broker");
        var Broker = BrokerCheckbox.checked;
        //console.log("Broker=" + Broker);

        var InsurerCheckbox = document.getElementById("insurer");
        var Insurer = InsurerCheckbox.checked;
        //console.log("Insurer=" + Insurer);

        var ClientCheckbox = document.getElementById("client");
        var Client = ClientCheckbox.checked;
        //console.log("Client=" + Client);
     
        var id = $("#UpdateTypeId").val();
        console.log("id=" + id);
        var postData = {
            "UpdateTypeId": id,
            "NameType": nameType,
            "ValueType": valueType,
            "TypeIsTc": Tc,
            "TypeIsBroker": Broker,
            "TypeIsInsurer": Insurer,
            "TypeIsClient": Client
        };
        $.ajax({
            type: "Post",
            //data: JSON.stringify({ clientAgreementId: agreement, clientAgreementMVTerm: prodData }),
            url: "/Admin/EditUpdateType",
            //contentType: "application/json; charset=utf-8",
            data: postData,
            async: true,
            success: function () {
                $("#UpdateTypeModal").modal("hide");
                alert("Saved Successfully!");
                location.reload(true);

            }
        });


    }



    /*edit data*/
    $('#UpdateTypeModal').on('show.bs.modal', function (e) {
       // debugger;
        $('.modal').css('width', '600px');
        var nameType = $(e.relatedTarget).data('subNametype');
        console.log($(e.relatedTarget));
        var valueType = $(e.relatedTarget).data('subValuetype');
        var broker = $(e.relatedTarget).data('subBroker');
        var client = $(e.relatedTarget).data('subClient');
        var insurer = $(e.relatedTarget).data('subInsurer');
        var tc = $(e.relatedTarget).data('subTc');
        var updateTypeId = $(e.relatedTarget).data('sub-id');
        $(e.currentTarget).find('input[name="Id"]').val(updateTypeId);
        $(e.currentTarget).find('input[name="NameType"]').val(nameType);
        $(e.currentTarget).find('input[name="ValueType"]').val(valueType);
        $(e.currentTarget).find('input[name="tc"]').val(tc);
        $(e.currentTarget).find('input[name="broker"]').val(broker);
        $(e.currentTarget).find('input[name="insurer"]').val(insurer);
        $(e.currentTarget).find('input[name="client"]').val(client);

        if (client == "True") {
           // document.getElementById("client").checked = "true";
            document.getElementById('client').checked = "checked"
            $("#tc").removeAttr('checked');
            $("#broker").removeAttr('checked');
            $("#insurer").removeAttr('checked');
        }
        if (broker == "True") {
            document.getElementById('broker').checked = "checked"
            $("#tc").removeAttr('checked');
            $("#client").removeAttr('checked');
            $("#insurer").removeAttr('checked');
        }
        if (insurer == "True") {
            document.getElementById('insurer').checked = "checked"
            $("#tc").removeAttr('checked');
            $("#client").removeAttr('checked');
            $("#broker").removeAttr('checked');
        }
        if (tc == "True") {
            document.getElementById('tc').checked = "checked"
            $("#insurer").removeAttr('checked');
            $("#client").removeAttr('checked');
            $("#broker").removeAttr('checked');
        }

    });

    /*delete data*/
    $('#UpdateTypeDelete').on('show.bs.modal', function (e) {
        $('.modal .modal-body').css('height', 'auto');
        var termId = $(e.relatedTarget).data('term-id');
        $(e.currentTarget).find('input[name="TermId"]').val(termId);
    });

</script>
