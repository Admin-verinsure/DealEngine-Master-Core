@model DealEngine.WebUI.Models.Programme.ProgrammeInfoViewModel

<article class="container">
    <div class="container-fluid">
        <div class="card">
            <div class="card-header">
                <h2>Create Programme</h2>
            </div>
            <div class="card-body">
                <div id="smartwizardprogramme" class="sw-main sw-theme-circles">
                    <ul class="nav nav-tabs step-anchor">
                        <li class="nav-item active"><a href="#programme1" class="nav-link">1<br><small>Programme</small></a></li>
                        <li class="nav-item"><a href="#programme2" class="nav-link">2<br><small>Product</small></a></li>
                        <li class="nav-item"><a href="#programme2" class="nav-link">2<br><small>Submit</small></a></li>
                    </ul>

                    <div class="sw-container tab-content">
                        <div id="programme1" class="tab-pane step-content">
                            @await Html.PartialAsync("ProgrammeFormPartial", Model)
                        </div>
                        <div id="programme2" class="tab-pane step-content">
                            @await Html.PartialAsync("../Product/CreateProduct", Model.ProductViewModel)
                        </div>
                        <div id="programme3" class="tab-pane step-content">
                            <p>fin</p>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</article>

@section pagespecific {
    <script src="~/smartwizard/js/jquery.smartWizard.min.js"></script>
    <link href="~/smartwizard/cc/smart_wizard_theme_circles.css" rel="stylesheet" />
    <script type="text/javascript">

        $(document).ready(function () {
            $('#smartwizardprogramme').smartWizard({
                selected: 0,  // Initial selected step, 0 = first step
                keyNavigation: true, // Enable/Disable keyboard navigation(left and right keys are used if enabled)
                autoAdjustHeight: true, // Automatically adjust content height
                cycleSteps: false, // Allows to cycle the navigation of steps
                backButtonSupport: true, // Enable the back button support
                useURLhash: true, // Enable selection of the step based on url hash
                lang: {  // Language variables
                    next: 'Next',
                    previous: 'Previous'
                },
                toolbarSettings: {
                    toolbarPosition: 'bottom', // none, top, bottom, both
                    toolbarButtonPosition: 'right', // left, right
                    showNextButton: true, // show/hide a Next button
                    showPreviousButton: false, // show/hide a Previous button

                },
                anchorSettings: {
                    anchorClickable: true, // Enable/Disable anchor navigation
                    enableAllAnchors: false, // Activates all anchors clickable all times
                    markDoneStep: true, // add done css
                    enableAnchorOnDoneStep: true // Enable/Disable the done steps navigation
                },
                contentURL: null, // content url, Enables Ajax content loading. can set as data data-content-url on anchor
                disabledSteps: [],    // Array Steps disabled
                errorSteps: [],    // Highlight step with errors
                theme: 'dots',
                transitionEffect: 'fade', // Effect on navigation, none/slide/fade
                transitionSpeed: '400'
            });

            $("#smartwizardprogramme").on("leaveStep", function (e, anchorObject, stepNumber, stepDirection) {
                if (stepDirection == "forward") {                                   
                    if (stepNumber == 0) {
                        var form = document.getElementById('programmeform');
                        form.classList.add('was-validated');
                        if (form.checkValidity() === false) {
                            throw "stop process";
                        }
                        else {
                            form.submit();
                        }
                    }
                    else if (stepNumber == 1) {
                        var form = document.getElementById('productform');
                        form.classList.add('was-validated');
                        if (form.checkValidity() === false) {
                            throw "stop process";
                        }
                        else {
                            form.submit();
                        }
                    }
                }
            });

        });

    </script>
}