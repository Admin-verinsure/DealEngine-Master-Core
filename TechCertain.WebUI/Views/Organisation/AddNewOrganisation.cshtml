@model TechCertain.WebUI.Models.OrganisationViewModel
@using TechCertain.WebUI.Helpers.CustomHtml

<div class="container">
    <div class="row">
        <!-- col -->
        <div class="container">
            <h1 class="page-title txt-color-blueDark">
                <!-- PAGE HEADER -->
                <i class="fa-fw fa fa-home"></i>  <span>
                    <a href="~/Programme/TermSheetConfirguration/@Model.ProgrammeId"> Package Term Sheet</a>
                    > Add New Organisation
                </span>
            </h1>
            <span>
                <a onclick="location.href='@Url.Action("TermSheetConfirguration", "Programme", new { Id = @Model.ProgrammeId })'" style="color:dodgerblue;font-size:30px; cursor:pointer"> <span _ngcontent-c7="" class="icon-append fa fa-arrow-circle-left"></span>  </a>
            </span>
        </div>
        <!-- end col -->
    </div>

    <div class="row">
        <form action="~/Organisation/CreateOrganisation" method="POST" id="update-form" class="container"
              enctype="multipart/form-data">
            <div class="form-group">
                <section>
                    <div class="jarviswidget jarviswidget-color-blue" id="wid-id-5"
                         data-widget-editbutton="false" data-widget-colorbutton="false">

                        <header style="background-color:#3276b1">
                            <span class="widget-icon"> <i class="fa fa-comments txt-color-white"></i> </span>
                            <h2>Organisation</h2>
                        </header>
                            <table class="table table-bordered table-striped table-hover table-condensed">
                                <tbody>
                                    <tr class="table-light">
                                        <td align="center">
                                            <b>Organisation Type</b>
                                        </td>

                                        <td align="center">
                                            <label class="input">
                                                <select class="custom-select" name="OrganisationType">
                                                    <option selected>Corporation – Limited liability</option>
                                                    <option selected>Corporation – Unlimited liability</option>
                                                    <option selected>Corporation – Public-Listed</option>
                                                    <option selected>Corporation – Public Unlisted</option>
                                                    <option selected>Corporation – Overseas</option>
                                                    <option selected>Incorporated Society</option>

                                                </select>
                                            </label>
                                        </td>
                                    </tr>

                                    <tr class="table-light">
                                        <td align="center">
                                            <b>Insurance Attribute</b>
                                        </td>

                                        <td align="center">
                                            <label class="input">
                                                <select onchange="IASelected()" id="InsuranceAttributeName" name="InsuranceAttributeName" class="custom-select">
                                                    <option selected>--Select--</option>
                                                    <option value="Marina"> Marina</option>
                                                    <option value="Other Marina">Other Marina</option>
                                                    <option value="Financial">Financial</option>
                                                </select>
                                            </label>
                                        </td>
                                    </tr>

                                    <tr class="hidden table-light" id="trOrganisationMarinaOrgMooredType">
                                        <td align="center">
                                            <b>Marina Moored Type</b>
                                        </td>

                                        <td align="center">
                                            <label class="input">
                                                <select name="OrganisationMarinaOrgMooredType" multiple class="chosen-select form-control b">

                                                    @foreach (var selectListItem in Model.OrgMooredType)
                                                    {
                                                        <option value=@selectListItem.Value> @selectListItem.Text</option>
                                                    }

                                                </select>

                                            </label>
                                        </td>
                                    </tr>

                                    <tr class="table-light">
                                        <td align="center">
                                            <b>Name</b>
                                        </td>

                                        <td align="center">
                                            <label class="input">
                                                <input type="text" name="OrganisationName" placeholder="Organisation name">
                                            </label>
                                        </td>

                                    </tr>
                                    <tr class="table-light">

                                        <td align="center">
                                            <b>Email</b>
                                        </td>

                                        <td align="center">
                                            <label class="input">
                                                <input type="email" name="OrganisationEmail" placeholder="Email Address">
                                            </label>
                                        </td>

                                    </tr>
                                    <tr class="table-light">

                                        <td align="center">
                                            <b>Phone Number</b>
                                        </td>

                                        <td align="center">
                                            <label class="input">
                                                <input type="number" name="OrganisationPhone" placeholder="Phone Number">
                                            </label>
                                        </td>

                                    </tr>
                                    <tr class="table-light">

                                        <td align="center">
                                            <b>Website</b>
                                        </td>

                                        <td align="center">
                                            <label class="input">
                                                <input type="url" name="OrganisationWebsite" placeholder="Website">
                                            </label>
                                        </td>

                                    </tr>
                                </tbody>
                            </table>
                        </div>
                </section>
            </div>

            <div class="form-group">
                <section>
                    <div class="jarviswidget jarviswidget-color-blue" id="wid-id-5"
                         data-widget-editbutton="false" data-widget-colorbutton="false">

                        <header style="background-color:#3276b1">
                            <span class="widget-icon"> <i class="fa fa-comments txt-color-white"></i> </span>
                            <h2>Location</h2>
                        </header>
                        <table class="table table-bordered table-striped table-hover table-condensed">
                            <tbody>
                                <tr class="table-light">
                                    <td align="center">
                                        <b>Street Address</b>
                                    </td>

                                    <td align="center">
                                        <label class="input">
                                            <input type="text" name="LocationStreetAddress" placeholder="Street Address">
                                        </label>
                                    </td>

                                </tr>
                                <tr class="table-light">

                                    <td align="center">
                                        <b>Suburb</b>
                                    </td>

                                    <td align="center">
                                        <label class="input">
                                            <input type="text" name="LocationSuburb" placeholder="Suburb">
                                        </label>
                                    </td>

                                </tr>
                                <tr class="table-light">

                                    <td align="center">
                                        <b>Post Code</b>
                                    </td>

                                    <td align="center">
                                        <label class="input">
                                            <input type="number" name="LocationPostCode" placeholder="Postcode">
                                        </label>
                                    </td>

                                </tr>
                                <tr class="table-light">

                                    <td align="center">
                                        <b>City</b>
                                    </td>

                                    <td align="center">
                                        <label class="input">
                                            <input type="text" name="LocationCity" placeholder="City">
                                        </label>
                                    </td>

                                </tr>
                                <tr class="table-light">

                                    <td align="center">
                                        <b>Country</b>
                                    </td>

                                    <td align="center">
                                        <label class="input">
                                            <input type="text" name="LocationCountry" placeholder="Country">
                                        </label>
                                    </td>

                                </tr>
                                <tr class="table-light">

                                    <td align="center">
                                        <b>Common Name</b>
                                    </td>

                                    <td align="center">
                                        <label class="input">
                                            <input type="text" name="LocationCommonName" placeholder="Common Name">
                                        </label>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
            @if (User.HasClaim("Edit", "EditMarinas/FinancialInstitutions"))
            {
                <div class="form-group">
                    <button type="Submit" class="btn txt-color-white bg-color-green btn-sm"><i class="fa fa-edit"></i> Submit</button>
                </div>
            }

        </form>
    </div>
</div>

@section pagespecific {
    <!-- PAGE RELATED PLUGIN(S)-->
    <script type="text/javascript">
     $(".chosen-select").chosen({ width: "95%" });

        function IASelected() {
            debugger;
            var mooredtype =  document.getElementById("InsuranceAttributeName");

            var Mooredtype = mooredtype.options[mooredtype.selectedIndex].value;
            if (Mooredtype == 'Marina' || Mooredtype == 'Other Marina') {
                $('#trOrganisationMarinaOrgMooredType').removeClass('hidden');
            } else {
                                $('#trOrganisationMarinaOrgMooredType').addClass('hidden');

            }

        };

    function CreateOrganisation() {
    $.ajax({
    // change back once mono decides to fix
        url: '@Url.Action("CreateOrganisation", "Organisation")',
        type: "POST",
        data: ""
    })
        .done(function (data) {
            //$.smallBox({
            //    title: "Success",
            //    content: "Organisation details have been added",
            //    color: "#5F895F",
            //    iconSmall: "fa fa-check bounce animated",
            //    timeout: 4000
            //});

        })
        .fail(function () {
            alert("Unable to save.");
        });

    }

    function OrganisationUserOnChange() {
        //if condition for tcadminuser
    document.getElementById("wid-id-2").hidden = hidden;
    hidden = !(hidden);
    }


    </script>
}