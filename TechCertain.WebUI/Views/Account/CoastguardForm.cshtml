@model TechCertain.WebUI.Models.AccountRegistrationModel
@{
    ViewBag.PageId = "extr-page";
}

@section topright{
    <span id="extr-page-header-space"> <span class="hidden-mobile">Already registered?</span> <a href="~/Account/Login" class="btn btn-danger">Sign In</a> </span>
    @*TODO Change back when mono 4.3 or later is installed*@
    @*<span id="extr-page-header-space"> <span class="hidden-mobile">Already registered?</span> <a href="@Url.Action("login", "account")" class="btn btn-danger">Sign In</a> </span>*@
}



<div style="font-family:Arial !important;">
    <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"> </div>
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
        <img id="banner" class="w100" src="https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg" />
    </div>
    <div class="col-xs-0 col-sm-0 col-md-3 col-lg-3"></div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"></div>
    <div class="col-xs-0 col-sm-2 col-md-3 col-lg-3"></div>
    <div class="col-xs-12 col-sm-8 col-md-6 col-lg-6">

        <div>
            <ul class="bootstrapWizard hidden">
                <li class="active" data-target="#step1">
                    <a href="#tab1" data-toggle="tab"> <span class="step">1</span> <span class="title">Step 1</span> </a>
                </li>
                <li data-target="#step2">
                    <a href="#tab2" data-toggle="tab"> <span class="step">2</span> <span class="title">Step 2</span> </a>
                </li>
                <li data-target="#step3">
                    <a href="#tab3" data-toggle="tab"> <span class="step">3</span> <span class="title">Step 3</span> </a>
                </li>
                <li data-target="#step4">
                    <a href="#tab4" data-toggle="tab"> <span class="step">4</span> <span class="title">Step 4</span> </a>
                </li>

            </ul>
        </div>

        <div class="tab-content">
            <div class="tab-pane active" id="tab1">
                <form id="quickQuote">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding:0;">
                        <h1 style="font-family:Arial !important; color:#004280; font-weight: bold;" class="text-align-center" strong id="QuickQuoteText2">QUICK QUOTE</h1>
                        <select onchange="updateLabel()" id="CraftTypeDrop" class="form-control input-lg hidden" style="margin-top: 20px; margin-bottom: 25px;">
                            <option value="" selected="selected">Pick your highest value vessel.</option>
                            <option>Roadtrailer</option>
                            <option>Stored</option>
                            <option>Berthed</option>
                            <option>Moored</option>
                        </select>
                        <div class="text-align-center text-uppercase"><label style="font-family:Arial !important; color:#00B0D3; font-weight: bold; font-size:24px;" id="CraftType">Type Placeholder</label></div>
                    </div>
                    <br>
                    <input class="hidden" type="number" id="rate" value=".05" />
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div>
                                <label style="float:right; color:red;">* = Required</label>
                            </div>
                            <div class="form-group" id="mnumbfgroup">
                                <div class="input-group w100">
                                    <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="memNum">Membership #<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                    <input class="form-control input-lg" placeholder="" type="text" name="mnumb" id="mnumb" maxlength="6">
                                </div>
                            </div>
                            <div class="form-group" id="vtypefgroup">
                                <div class="input-group w100">
                                    <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="VesselType">Vessel Type<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                    <select onchange="updateOptions()" id="vtype" class="form-control input-lg" style="font-size:1.1em;" required>
                                        <option id="" value="" selected="selected">-- Select --</option>
                                        <option id="Powerboats" value="Powerboats">Powerboats</option>
                                        <option id="Cruisers" value="CruisersandLaunches">Cruisers and Launches</option>
                                        <option id="Yachts" value="YachtsandCatamarans">Yachts and Catamarans</option>
                                        <option id="Jetski" value="Jetski">Jetski</option>
                                        <option id="VOther" value="Other">Other Personal Watercraft</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="ctypefgroup">
                                <div class="input-group w100">
                                    <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="ConstructionType">Construction Type<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                    <select id="ctype" class="form-control input-lg" style="font-size:1.1em;">
                                        <option value="" selected="selected">-- Select --</option>
                                        <option id="Aluminium" value="Aluminium">Aluminium</option>
                                        <option id="Steel" value="Steel">Steel</option>
                                        <option id="Fibreglass" value="Fibreglass">Fibreglass</option>
                                        <option id="Carbon" value="Carbon">Carbon fibre</option>
                                        <option id="RigidHI" value="RigidHI">Rigid Hull Inflatable</option>
                                        <option id="Wood" value="Wood">Wood/timber</option>
                                        <option id="Cement" value="Cement">Ferro cement/ cement</option>
                                        <option id="COther" value="Other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="hcfigfgroup">
                                <div class="input-group w100">
                                    <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="HullConfig">Hull Configuration<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                    <select id="hcfig" class="form-control input-lg" style="font-size:1.1em;">
                                        <option id="" value="" selected="selected">-- Select --</option>
                                        <option id="Mono" value="Mono">Mono</option>
                                        <option id="Catamaran" value="Catamaran">Catamaran</option>
                                        <option id="Trimaran" value="Trimaran">Trimaran</option>
                                        <option id="HOther" value="Other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="mtypefgroup">
                                <div class="input-group w100">
                                    <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="MooredType">Moored Type<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                    <select id="mtype" class="form-control input-lg" style="font-size:1.1em;">
                                        <option value="" selected="selected">-- Select --</option>
                                        <option id="Pile" value="Pile">Pile</option>
                                        <option id="Marina" value="Marina">Marina</option>
                                        <option id="Swing" value="Swing">Swing</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="hastrfgroup">
                                <div class="input-group w100">
                                    <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="hastrrailer">Trailered<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                    <select id="hastr" class="form-control input-lg" style="font-size:1.1em;">
                                        <option value="" selected="selected">-- Select --</option>
                                        <option id="True" value="True">Yes</option>
                                        <option id="False" value="False">No</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="vivalfgroup">
                                <div class="input-group w100 input-icon">
                                    <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="VesselIVal">Vessel Insured Value<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                    <input class="form-control input-lg" placeholder="Enter value" value="" type="number" name="vival" id="vival" min="0" required>
                                    <i>$</i>
                                </div>
                            </div>
                            <div class="form-group" style="margin-bottom:0;" id="qquotfgroup">
                                <div class="input-group w100">
                                    <button style="background-color:#00B0D3 !important; color:white;" type="submit" onclick="validationCheck(); return false;" class="btn btn-secondary w100">GET QUICK QUOTE</button>
                                </div>
                            </div>
                        </div>
                        <div id="quoteResult" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 margin-top-10 hidden">
                            <div style="width:100%; margin-bottom:0; font-size:1.1em;" id="qref" class="alert alert-danger hidden">Quick Quote is not available for the combination you have selected. Please click "Notify Marsh to Call me" below. </div>
                            <div id="indiQuoteSpan" class="w100" style="text-align:center">
                                <label class="indiQuoteValue">$</label>
                                <label class="indiQuoteValue" id="indiQuote">Placeholder</label>
                                <label class="indiQuoteValue" style="font-size:1.4em;"> (p/month incl GST)</label>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="hidden" id="quoteIncludes">
                                <span class="font-italic" style="font-size:1.4em;">Cover includes:</span>
                                <ul>
                                    <li style="font-size:1em;" class="font-italic">$5,000,000 third party limit</li>
                                    <li style="font-size:1em;" class="font-italic">$20,000 personal effects/fishing gear limit</li>
                                    <li style="font-size:1em;" class="font-italic">$10,000 personal accident cover as defined</li>
                                    <li style="font-size:1em;" class="font-italic">Dedicated marine loss adjustor</li>
                                    <li style="font-size:1em;" class="font-italic">Social or Corporate Yacht Racing (under 50nm)</li>
                                </ul>
                                <p>This indicative quote is provided by Marsh Limited based upon the information submitted. Submitting this form to Marsh Limited does not provide insurance cover for your vessel.</p>
                            </div>
                        </div>
                        <div style="margin-bottom:50px;" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="btn-group w100" role="group" aria-label="First group">
                                <!--<a href="#tab2" data-toggle="tab"><button onclick="saveQuickQuote(); return false;" style="background-color:#72BF44 !important;color:white;" id="next" type="submit" class="btn btn-secondary margin-top-10 w100 hidden">I LIKE IT - LET'S GO!</button></a>-->
                                <a href="#tab2" data-toggle="tab" onclick="saveQuickQuote(); return false;" style="background-color:#72BF44 !important;color:white;" id="next" type="submit" class="btn btn-secondary margin-top-10 w100 hidden">I LIKE IT - LET'S GO!</a>
                                <!--<button type="button" class="btn btn-secondary margin-top-10 w100 hidden">Save for later</button>-->
                                <button style="background-color:#004280 !important;color:white;" type="button" class="btn btn-secondary margin-top-10 w100">NOTIFY MARSH TO CALL ME</button>
                                <!--<a style="background-color:#F04E45 !important;color:white;" href="Coastguardreg"><button type="button" class="btn btn-secondary margin-top-10 w100">NO THANKS</button>-->
                                <a style="background-color:#F04E45 !important;color:white;" href="Coastguardreg" class="btn btn-secondary margin-top-10 w100">NO THANKS</a>

                            </div>
                        </div>
                    </div>
                </form>
            </div>




            <div class="tab-pane" id="tab2">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <h1 style="font-family:Arial !important; color:#004280; font-weight: bold;" class="text-align-center" strong id="QuickQuoteText2">QUICK QUOTE</h1>
                        <br>
                        <h3><strong>User Information</strong></h3>
                        <div>
                            <label style="float:right; color:red;">* = Required</label>
                        </div>
                        <div class="form-group required" id="fnamefgroup">
                            <div class="input-group w100">
                                <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="">First Name<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                <input class="form-control input-lg" placeholder="Enter First Name" type="text" name="fname" id="fname">
                            </div>
                        </div>
                        <div class="form-group required" id="snamefgroup">
                            <div class="input-group w100">
                                <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="">Last Name<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                <input class="form-control input-lg" placeholder="Enter Last Name" type="text" name="sname" id="sname">
                            </div>
                        </div>
                        <div class="form-group required" id="emailfgroup">

                            <div class="input-group w100">
                                <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" id="">Email Address<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                <input class="form-control input-lg" placeholder="Enter Email" type="text" name="email" id="email" style="background-image: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=&quot;); cursor: auto;" aria-required="true" aria-describedby="email-error" aria-invalid="false">
                            </div>
                        </div>

                        <form class="form-horizontal" role="form">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="form-group required" id="vownrfgroup">
                                    <div class="col-xs-12 col-sm-4 col-md-3 col-lg-3" style="padding:0; margin:0; min-width:150px;">
                                        <span class="input-group-addon cgvesselowner col-xs-12" style="border:1px solid #ccc"><label class="cgform-label" id="">Vessel Owner<p style="color:red; float:right;">&nbsp;*</p></label></span>
                                    </div>

                                    <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8" style="height: 45px; padding-top: 7.5px; padding-bottom: 7.5px;">
                                        <label class="radio-inline cgradio" style="width:19%;"> <input type="radio" name="cgradioselect" id="vown1" value="Private" checked="checked" onclick="vesselOwnUpdate()">Private</label>
                                        <label class="radio-inline cgradio" style="width:24%;"> <input type="radio" name="cgradioselect" id="vown2" value="Company" onclick="vesselOwnUpdate()">Company</label>
                                        <label class="radio-inline cgradio" style="width:15%;"> <input type="radio" name="cgradioselect" id="vown3" value="Trust" onclick="vesselOwnUpdate()">Trust</label>
                                        <label class="radio-inline cgradio" style="width:20%;"> <input type="radio" name="cgradioselect" id="vown4" value="Partnership" onclick="vesselOwnUpdate()">Partnership</label>
                                    </div>
                                    <label class="hidden" id="vownr">Private</label>
                                </div>
                            </div>
                        </form>

                        <div>
                            <label style="font-weight:bold;font-size:1.3em;">Phone (one required)<label style="color:red; float:right;">&nbsp;*</label></label>
                        </div>

                        <div class="form-group" id="hphonfgroup">
                            <div class="input-group w100">
                                <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" style="padding-top:0 !important;" id="">Home Phone</label></span>
                                <input class="form-control input-lg" placeholder="Enter Home" type="text" name="hphon" id="hphon" maxlength="12">
                            </div>
                        </div>
                        <div class="form-group no-margin" id="mphonfgroup">
                            <div class="input-group w100">
                                <span class="input-group-addon" style="width:200px;height:28px"><label class="cgform-label" style="padding-top:0 !important;" id="">Mobile Phone</label></span>
                                <input class="form-control input-lg" placeholder="Enter Mobile" type="text" name="mphon" id="mphon" aria-required="true" aria-invalid="false" maxlength="14">
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 no-padding margin-top-5">
                            <div class="btn-group w100" style="margin-bottom:50px;" role="group" aria-label="First group">
                                <a href="#tab1" data-toggle="tab"><button style="width:47.5%; background-color:#F04E45 !important;color:white;" type="button" class="btn btn-secondary margin-top-10 w100">BACK</button></a>
                                <!--href="#tab1"-->
                                <!--href="#tab3"-->
                                <a onclick="validationCheck2(); return false;" data-toggle="tab"><button style="width:47.5%; float:right; background-color:#72BF44 !important;color:white;" id="next" type="button" class="btn btn-secondary margin-top-10 w100">NEXT</button></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="tab-pane" id="tab3">
                <div class="form-group">
                    @*<a data-toggle="tab" style="background-color:#72BF44 !important;color:white;" id="next" type="submit" class="btn btn-secondary margin-top-10 w100">Create Account Here</a>*@
                    <p class="lead" style="text-align:center">
                        <br />
                        Thank you.
                    </p>
                    <p class="lead">
                        We have sent an email with your login instruction to the email address you supplied. Please follow the instructions in the email to set up your account and complete your proposal form.
                    </p>
                    <p class="lead">
                        Please Note - You must complete the insurance proposal form and complete the online process to obtain your insurance cover.
                    </p>

                </div>

                <div class="form-group">
                    <a href="~/Account/Login" style="background-color:#F04E45 !important;color:white;" type="submit" class="btn btn-secondary margin-top-10 w100 ">Sign In</a>
                </div>

            </div>

            <div class="tab-pane" id="tab4">
                <br />
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="form-group">
                            <div class="input-group">
                                <div class="text-left error-box">
                                    <h1 class="bounceInDown animated alert alert-danger"><i class="fa fa-fw fa-warning fa-lg"></i>Please login</h1>
                                    <h2 class="font-xl"><strong>Looks like an existing account has this email address</strong></h2>
                                    <br />
                                    <p class="lead">
                                        If you forgot your password click 'Reset Password' to retrieve a new password.
                                    </p>
                                    <p class="lead">
                                        If you require further assistance please contact TechCertain on 09 377 6564 or email us at <a href="mailto:support@techcertain.com">support@techcertain.com</a>.
                                    </p>
                                    <br />
                                    <button type="Reset" value="Submit" class="btn-sm" id="btnPanelSubmit" onclick="ResetPassword()">
                                        Reset Password
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

@section pagespecific{
    <script src="~/twitter-bootstrap/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        var qq = document.getElementById("qquotfgroup");
        var n = document.getElementById("mnumbfgroup");
        var v = document.getElementById("vtypefgroup");
        var c = document.getElementById("ctypefgroup");
        var h = document.getElementById("hcfigfgroup");
        var m = document.getElementById("mtypefgroup");
        var t = document.getElementById("hastrfgroup");
        var l = document.getElementById("CraftType");
        var vi = document.getElementById("vivalfgroup");
        var t2 = document.getElementById("tab2");
        var t3 = document.getElementById("tab3");
        var t4 = document.getElementById("tab4");
        var eleArray = [l, n, v, c, h, m, t, vi];
        var cgdata = [];
        var vival = document.getElementById('vival');
        var memnum = document.getElementById('mnumb');
        var hphonk = document.getElementById('hphon');
        var mphonk = document.getElementById('mphon');


        vival.onkeydown = function (e) {
            if (!((e.keyCode > 95 && e.keyCode < 106) || (e.keyCode > 47 && e.keyCode < 58) || (e.keyCode == 8) || (e.keyCode == 9))) {
                return false;
            }
        }
        memnum.onkeydown = function (e) {
            if (!((e.keyCode > 95 && e.keyCode < 106) || (e.keyCode > 47 && e.keyCode < 58) || (e.keyCode == 8) || (e.keyCode == 9))) {
                return false;
            }
        }
        hphonk.onkeydown = function (e) {
            if (!((e.keyCode > 95 && e.keyCode < 106) || (e.keyCode > 47 && e.keyCode < 58) || (e.keyCode == 8) || (e.keyCode == 9))) {
                return false;
            }
        }
        mphonk.onkeydown = function (e) {
            if (!((e.keyCode > 95 && e.keyCode < 106) || (e.keyCode > 47 && e.keyCode < 58) || (e.keyCode == 8) || (e.keyCode == 9))) {
                return false;
            }
        }

        function vesselOwnUpdate() {
            var radios = document.getElementsByName('cgradioselect');
            var cur = document.getElementById("vownr");
            for (var i = 0, length = radios.length; i < length; i++) {
                if (radios[i].checked) {
                    cur.value = radios[i].value;
                    document.getElementById("vownr").innerHTML = cur.value;
                    cur.innerHTML = cur.value;
                    break;
                }
            }

        }

        function saveQuickQuote() {
            debugger;
            if (cgdata.length > 0) {
                cgdata = [];
            }
            for (i = 0; i < eleArray.length; i++) {
                eleVal = eleArray[i].id.substring(0, 5);
                if (eleVal == "mnumb" || eleVal == "vival") {
                    if (eleVal == "mnumb") {
                        x = document.getElementById(eleVal);
                        y = x.value;
                        z = 6 - y.length;
                        for (j = 1; z >= j; j++) {
                            y = "0" + y;
                        }
                        x.value = y;
                    }
                    dropVal = document.getElementById(eleVal);
                    selectedVal = dropVal.value;
                }
                else if (eleVal == "Craft") {
                    craft = document.getElementById("CraftType");
                    selectedVal = craft.innerHTML;
                }
                else {
                    dropVal = document.getElementById(eleVal);
                    selectedVal = dropVal.options[dropVal.selectedIndex].value;
                }
                if (selectedVal == "") {
                    cgdata.push("null");
                }
                else if (eleArray[i].classList.contains("hidden") && selectedVal != craft.innerHTML) {
                    cgdata.push("null");
                }
                else {
                    cgdata.push(selectedVal);
                }
            }
            premium = document.getElementById("indiQuote").innerHTML;
            cgdata.push(premium);
        }

        function addCGData() {
            var fn = document.getElementById("fname").value;
            var sn = document.getElementById("sname").value;
            var em = document.getElementById("email").value;
            var vo = document.getElementById("vownr").innerHTML;
            var hp = document.getElementById("hphon").value;
            var mp = document.getElementById("mphon").value;
            cguser = [fn, sn, em, vo, hp, mp];
            if (cgdata.length > 9) {
                cgdata.length = 9;
            }
            for (i = 0; i < cguser.length; i++) {
                if (cguser[i].length > 0) {
                    cgdata.push(cguser[i]);
                }
                else {
                    cgdata.push("null");
                }
            }
        }

        function validationCheck() {
            //get boxes
            debugger;
            var indiQuoteSpan = document.getElementById("indiQuoteSpan");
            var quoteInc = document.getElementById("quoteIncludes");
            var next = document.getElementById("next");
            var j = 0; //counter
            for (i = 0; i < eleArray.length; i++) {
                if (!(eleArray[i].classList.contains("hidden"))) {
                    eleVal = eleArray[i].id.substring(0, 5); //eg. vtype,ctype,hcfig etc etc
                    if (eleVal == "mnumb" || eleVal == "vival") {
                        dropVal = document.getElementById(eleVal);
                        selectedVal = dropVal.value;
                    }
                    else if (eleVal == "Craft") {
                        continue;
                    }
                    else {
                        dropVal = document.getElementById(eleVal);
                        selectedVal = dropVal.options[dropVal.selectedIndex].value;
                    }
                    if (selectedVal.length <= 0) {
                        j += 1;
                        dropVal.classList.add("requiredVal");
                    }
                    else if (dropVal.classList.contains("requiredVal")) {
                        dropVal.classList.remove("requiredVal");
                    }
                }
            }
            if (j == 0) {
                quickQuote();
            }
            else {
                indiQuoteSpan.classList.add("hidden");
                quoteInc.classList.add("hidden");
                next.classList.add("hidden");
            }
        }

        function validationCheck2() {
            //for tab2
            var f = document.getElementById("fnamefgroup");
            var s = document.getElementById("snamefgroup");
            var e = document.getElementById("emailfgroup");
            var hm = document.getElementById("hphon");
            var mb = document.getElementById("mphon");
            var eleArray2 = [f, s, e];
            var z = 0;
            if (hm.value == "" && mb.value == "") { //if both are empty
                hm.classList.add("requiredVal");
                mb.classList.add("requiredVal");
                z += 1;
            }

            for (i = 0; i < eleArray2.length; i++) {
                eleVal = eleArray2[i].id.substring(0, 5);
                dropVal = document.getElementById(eleVal);
                selectedVal = dropVal.value;
                if (selectedVal.length <= 0) {
                    z += 1;
                    dropVal.classList.add("requiredVal");
                }
                else if (dropVal.classList.contains("requiredVal")) {
                    dropVal.classList.remove("requiredVal");
                }
            }
            if (z == 0) {
                addCGData();
                t2.classList.remove("active");
                postCGData();
            }

        }
        function ResetPassword() {
            window.location.href = "/Account/ResetPassword";
        }

        function postCGData() {
            $.ajax({
                type: "POST",
                url: "/Services/CoastGuardSelfReg",
                data: { craftType: cgdata[0], membershipNumber: cgdata[1], boatType: cgdata[2], constructionType: cgdata[3], hullConfiguration: cgdata[4], mooredType: cgdata[5], trailered: cgdata[6], boatInsuredValue: cgdata[7], quickQuotePremium: cgdata[8], firstName: cgdata[9], lastName: cgdata[10], email: cgdata[11], orgType: cgdata[12], homePhone: cgdata[13], mobilePhone: cgdata[14] },
                traditional: true,
            })
                .done(function (data, textStatus, jQxhr) {
                       debugger;
                    console.log(data);
                    if (data) {
                        t3.classList.add("active");
                        $('#response pre').html(data);
                    }
                    else {
                        t4.classList.add("active");
                    }
                })
                .fail(function (jqXhr, textStatus, errorThrown) {
                    debugger;
                    console.log(errorThrown);
                });
        }

        function addZeroes(num) {
            var value = Number(num);
            num = num.toString();
            var res = num.split(".");
            if (res.length == 1 || res[1].length < 3) {
                value = value.toFixed(2);
            }
            return value;
        }

        function toTitleCase(str) {
            return str.replace(
                /\w\S*/g,
                function (txt) {
                    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
                }
            );
        }

        function updateLabel() {
            var ct = document.getElementById("CraftTypeDrop");
            document.getElementById("mnumb").value = "";
            document.getElementById("vival").value = "";
            document.getElementById("vtype").selectedIndex = 0;
            document.getElementById("ctype").selectedIndex = 0;
            document.getElementById("hcfig").selectedIndex = 0;
            document.getElementById("mtype").selectedIndex = 0;
            document.getElementById("hastr").selectedIndex = 0;
            ctselected = ct.options[ct.selectedIndex].text;
            document.getElementById("CraftType").innerHTML = ctselected;
            qq.classList.remove("hidden");
            reloadForm();
        }

        function updateOptions() {
            var ct = document.getElementById("vtype");
            var ctselected = ct.options[ct.selectedIndex].text;
            var c = document.getElementById("ctypefgroup");
            var h = document.getElementById("hcfigfgroup");
            if (ctselected == "Jetski") {
                c.classList.add("hidden");
                h.classList.add("hidden")
            }
            else {
                c.classList.remove("hidden");
                h.classList.remove("hidden");
            }
        }

        function quickQuote() {
            debugger;
            var insVal = document.getElementById("vival").value;
            var craftType = document.getElementById("CraftType").innerHTML;
            var qref = document.getElementById("qref");
            var indiQuoteSpan = document.getElementById("indiQuoteSpan");
            var quoteRes = document.getElementById("quoteResult");
            var quoteInc = document.getElementById("quoteIncludes");
            var v = document.getElementById("vtype");
            var c = document.getElementById("ctype");
            var h = document.getElementById("hcfig");
            var m = document.getElementById("mtype");
            var t = document.getElementById("hastr");
            var next = document.getElementById("next");
            var water = ["Berthed", "Moored"];
            var badCount = 0;
            var badTypes = ["Trimaran", "Other", "Swing", "Carbon fibre"];
            var curTypes = [];
            var minPrem = 0;

            vtype = v.options[v.selectedIndex].text;
            ctype = c.options[c.selectedIndex].text;
            hcfig = h.options[h.selectedIndex].text;
            mtype = m.options[m.selectedIndex].text;
            hastr = t.options[t.selectedIndex].text;

            if (craftType == "Jetski") {
                curTypes.push(vtype, ctype, hcfig);
                minPrem = 500;
            }
            else if (craftType == "Roadtrailer") {
                curTypes.push(vtype, ctype, hcfig);
                minPrem = 250;
            }

            else if (craftType == "Stored") {
                curTypes.push(vtype, ctype, hcfig, hastr);
                minPrem = 250;

            }
            else if (craftType == "Berthed") {
                curTypes.push(vtype, ctype, hcfig);
                minPrem = 400;
            }
            else if (craftType == "Moored") {
                curTypes.push(vtype, ctype, hcfig, mtype);
                minPrem = 400;
            }

            quoteRes.classList.remove("hidden");

            for (i = 0; i < curTypes.length; i++) {
                if (badTypes.includes(curTypes[i])) {
                    badCount += 1;
                }
            }

            if (badCount > 0 || (craftType == "Roadtrailer" && insVal > 250000) || (craftType == "Stored" && insVal > 250000) || (vtype == "Jetski" && insVal > 100000) || (craftType == "Berthed" && insVal > 500000) || (craftType == "Moored" && insVal > 500000)) {
                qref.classList.remove("hidden");
                indiQuoteSpan.classList.add("hidden");
                quoteInc.classList.add("hidden");
                next.classList.add("hidden");
            }

            else {
                if (badCount < 1) {
                    qref.classList.add("hidden");
                    indiQuoteSpan.classList.remove("hidden");
                    quoteInc.classList.remove("hidden");
                    next.classList.remove("hidden");
                }
            }

            if (vtype == "Jetski") {
                document.getElementById("rate").value = 0.03;
            }
            else if (water.includes(craftType)) {
                document.getElementById("rate").value = 0.008;
            }

            else {
                document.getElementById("rate").value = 0.0065;
            }

            var rate = document.getElementById("rate").value;
            var quote = insVal * rate;

            if (quote <= minPrem) {

                minPrem = (minPrem / 12) * 1.15; //Convert from p/a to p/m
                minPrem = Math.round(minPrem * 100) / 100; //round
                minPrem = addZeroes(minPrem);
                document.getElementById("indiQuote").innerHTML = minPrem;

            }
            else {
                quote = (quote / 12) * 1.15; //Convert from p/a to p/m
                quote = Math.round(quote * 100) / 100; //round
                quote = addZeroes(quote);
                document.getElementById("indiQuote").innerHTML = quote;
            }
        }

        function reloadForm() {
            var option = document.getElementById("CraftType").innerHTML;
            var cTypeDrop = document.getElementById("CraftTypeDrop");
            var cType = document.getElementById("CraftType");

            //Vessel Type Options
            var v4 = document.getElementById("Jetski");
            var v5 = document.getElementById("VOther");

            //Construction Type Options
            var c7 = document.getElementById("Cement");
            var c8 = document.getElementById("COther");

            //Hull Config Options
            var h4 = document.getElementById("HOther");

            //Moored Type Options
            var m2 = document.getElementById("Marina");

            //The Select elements
            var v = document.getElementById("vtypefgroup");
            var c = document.getElementById("ctypefgroup");
            var h = document.getElementById("hcfigfgroup");
            var m = document.getElementById("mtypefgroup");
            var t = document.getElementById("hastrfgroup");

            console.log(option);
            if (option == "Roadtrailer") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                v.classList.remove("hidden");
                v4.classList.remove("hidden");
                c.classList.remove("hidden");
                h.classList.remove("hidden");
                m.classList.add("hidden");
                t.classList.add("hidden");
                v5.classList.add("hidden");
                c7.classList.add("hidden");
                c8.classList.add("hidden");
                h4.classList.add("hidden");

            }
            if (option == "Stored") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                v.classList.remove("hidden");
                v4.classList.remove("hidden");
                c.classList.remove("hidden");
                h.classList.remove("hidden");
                t.classList.remove("hidden");
                m.classList.add("hidden");
                v5.classList.remove("hidden");
                c7.classList.remove("hidden");
                c8.classList.remove("hidden");
                h4.classList.remove("hidden");
            }
            if (option == "Berthed") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                v.classList.remove("hidden");
                v4.classList.add("hidden");
                v5.classList.add("hidden");
                c.classList.remove("hidden");
                c7.classList.remove("hidden");
                c8.classList.remove("hidden");
                h.classList.remove("hidden");
                h4.classList.remove("hidden");
                m.classList.add("hidden");
                m2.classList.add("hidden");
                t.classList.add("hidden");
            }
            if (option == "Moored") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                v.classList.remove("hidden");
                c.classList.remove("hidden");
                h.classList.remove("hidden");
                m.classList.remove("hidden");
                t.classList.add("hidden");
                v5.classList.add("hidden");
                c7.classList.remove("hidden");
                c8.classList.remove("hidden");
                h4.classList.remove("hidden");
                v4.classList.add("hidden");
            }
            if (option == "Multi") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                cTypeDrop.classList.remove("hidden");
                cType.classList.add("hidden");
            }
        }

        //Fill Label with URL and change displayed Select Elements and their sub options when page is ready
        $(document).ready(function () {
            var logo = document.getElementById("logo");
            logo.removeChild(logo.children[0]);
            logo.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 311.36 46.77"><defs><style>.cls-1a{fill:#85d2e3;}.cls-2a{fill:#0080b2;}.cls-3a{fill:#00afd3;}.cls-4a{fill:#004180;}</style></defs><title>18-1236_CA_Coastguard_Quick_Quote_Site Elements v1</title><polygon class="cls-1a" points="60.76 46.77 40.51 35.08 60.76 23.39 60.76 46.77"/><polygon class="cls-2a" points="20.25 46.77 0 35.08 20.25 23.39 20.25 46.77"/><polygon class="cls-3a" points="40.51 35.08 60.76 23.39 60.76 0 20.25 23.39 40.51 35.08"/><polygon class="cls-2a" points="81.01 35.08 60.76 23.39 81.01 11.7 81.01 35.08"/><polygon class="cls-3a" points="60.76 46.77 81.01 35.08 60.76 23.39 60.76 46.77"/><polygon class="cls-3a" points="20.25 0 0 11.69 0 35.08 20.25 23.39 20.25 0"/><polygon class="cls-4a" points="20.25 23.39 40.51 11.69 20.25 0 20.25 23.39"/><polygon class="cls-1a" points="20.25 46.77 40.51 35.08 20.25 23.39 20.25 46.77"/><polygon class="cls-4a" points="60.76 23.39 81.01 11.69 60.76 0 60.76 23.39"/><path class="cls-3a" d="M219.94,26.51c6.86-.8,11.77-5.38,11.77-12.22,0-4.15-3.06-11.24-13.64-11.24H201.46V43.72H208V8.25h8.43c5.87,0,8.57,2.85,8.57,6.77s-3,6.75-9.43,6.75h-7.05l17.52,22h8.12Z"/><path class="cls-3a" d="M171.83,3.05L155.49,43.72h6.77l4.37-11.34h17.11l4.37,11.34h7L179,3.05h-7.19Zm3.55,7.39,6.38,16.62h-13l6.44-16.62h0.21Z"/><path class="cls-3a" d="M126.59,34.8L113.76,3.06h-9.28V43.72h6.28V12h0.14l12.74,31.77h5.59l13.34-32h0.13v32h6.38V3.06h-9.15L126.79,34.8h-0.2Z"/><path class="cls-3a" d="M239,39.78a25.11,25.11,0,0,0,15,4.69c8.7,0,14.76-4.27,14.76-11.5,0-7-6.78-10.17-12.55-12.87-4.56-2.12-8.83-3.66-8.83-7.09s2.67-5.41,7.26-5.41A18.79,18.79,0,0,1,265.5,11l2.9-5a25.31,25.31,0,0,0-13.59-3.74c-8.69,0-14.32,4.35-14.32,10.92,0,6.78,6.62,9.68,12.13,12.2,5.22,2.4,9.21,4.22,9.21,7.92s-3.24,5.82-8,5.82c-6.19,0-10.82-3.63-11.58-4.15Z"/><path class="cls-3a" d="M304.77,3.05v16.6H283.41V3.05h-6.59V43.72h6.59V25h21.36V43.72h6.59V3.05h-6.59Z"/></svg>';

            var option = window.location.search;
            if (option.length != 0) {
                option = option.substr(1);
                option = toTitleCase(option);
                document.getElementById("CraftType").innerHTML = option;
            }
            var cTypeDrop = document.getElementById("CraftTypeDrop");
            var cType = document.getElementById("CraftType");
            var v4 = document.getElementById("Jetski");
            var v5 = document.getElementById("VOther");
            var c7 = document.getElementById("Cement");
            var c8 = document.getElementById("COther");
            var h4 = document.getElementById("HOther");
            var m2 = document.getElementById("Marina");
            var v = document.getElementById("vtypefgroup");
            var c = document.getElementById("ctypefgroup");
            var h = document.getElementById("hcfigfgroup");
            var m = document.getElementById("mtypefgroup");
            var t = document.getElementById("hastrfgroup");
            var banner = document.getElementById("banner");



            if (option == "Roadtrailer") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                m.classList.add("hidden");
                t.classList.add("hidden");
                v5.classList.add("hidden");
                c7.classList.add("hidden");
                c8.classList.add("hidden");
                h4.classList.add("hidden");
            }
            if (option == "Stored") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                m.classList.add("hidden");
            }
            if (option == "Berthed") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                m.classList.add("hidden");
                t.classList.add("hidden");
                v5.classList.add("hidden");
                m2.classList.add("hidden");
                v4.classList.add("hidden");
            }
            if (option == "Moored") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                t.classList.add("hidden");
                v4.classList.add("hidden");
                v5.classList.add("hidden");
            }
            if (option == "Multi") {
                banner.src = "https://s3-us-west-1.amazonaws.com/mpak.proposalonline.com/images/CG_Header_MENUNew.jpg";
                cTypeDrop.classList.remove("hidden");
                cType.classList.add("hidden");
                v.classList.add("hidden");
                c.classList.add("hidden");
                h.classList.add("hidden");
                m.classList.add("hidden");
                t.classList.add("hidden");
                qq.classList.add("hidden");
            }
        });

        /*
                    // Model i agree button
                    $("#i-agree").click(function () {
                        var $this = $("#terms");
                        if ($this.checked) {
                            $('#myModal').modal('toggle');
                        } else {
                            $this.prop('checked', true);
                            $('#myModal').modal('toggle');
                        }
                    });

                    // Validation
                    $(function () {
                        // Validation
                        $("#smart-form-register").validate({
                            // Rules for form validation
                            rules: {
                                username: {
                                    required: true,
                                },
                                email: {
                                    required: true,
                                    email: true
                                },
                                emailConfirm: {
                                    required: true,
                                    email: true,
                                    equalTo: '#email'
                                },
                                password: {
                                    required: true,
                                    minlength: 4,
                                    maxlength: 20
                                },
                                passwordConfirm: {
                                    required: true,
                                    minlength: 4,
                                    maxlength: 20,
                                    equalTo: '#password'
                                },
                                firstname: {
                                    required: false
                                },
                                lastname: {
                                    required: false
                                },
                                gender: {
                                    required: false
                                },
                                terms: {
                                    required: true
                                }
                            },

                            // Messages for form validation
                            messages: {
                                email: {
                                    username: 'Please enter your username'
                                },
                                email: {
                                    required: 'Please enter your email address',
                                    email: 'Please enter a VALID email address'
                                },
                                emailConfirm: {
                                    required: 'Please enter your email address one more time',
                                    email: 'Please enter a VALID email address',
                                    equalTo: 'Please enter the same email address as above'
                                },
                                password: {
                                    required: 'Please enter your password'
                                },
                                passwordConfirm: {
                                    required: 'Please enter your password one more time',
                                    equalTo: 'Please enter the same password as above'
                                },
                                terms: {
                                    required: 'You must agree with Terms and Conditions'
                                }
                            },

                            // Do not change code below
                            errorPlacement: function (error, element) {
                                error.insertAfter(element.parent());
                            }
                        });
                    });*/
    </script>
}