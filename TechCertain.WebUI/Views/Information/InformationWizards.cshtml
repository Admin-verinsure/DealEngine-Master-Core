@model TechCertain.WebUI.Models.InformationViewModel
@inject TechCertain.Services.Interfaces.IAppSettingService AppServices

@if (AppServices.GetCompanyTitle == "Marsh")
{
    @await Html.PartialAsync("/Views/Information/InformationWizardMarsh.cshtml", Model)
}
else
{
    @await Html.PartialAsync("/Views/Information/InformationWizardAON.cshtml", Model)    
}


@section pagespecific {

    <script>
        $(window).on("load", function () {
            if ("@Model.Status" == "Submitted") {
                if (document.getElementById('fieldset') != null) {
                    document.getElementById('fieldset').setAttribute("disabled", "disabled");
                } else {
                    document.getElementById('btn1').removeAttribute("disabled");
                }
                $('.btn-sm').addClass("hidden");
                //$('.btn').addClass("hidden");
            }

            var clientInformationSheet = $('#AnswerSheetId').val();
            var postData = { ClientInformationSheet: clientInformationSheet };

            $.ajax({
                // change back once mono decides to fix
                url: '@Url.Action("GetClaimHistory", "Information")',
                type: "POST",
                data: postData
            })
                .done(function (data) {
                    if (data != "" &&
                        (data[0] != null && data[1] != null && data[2] != null && data[3] != null && data[4] != null)
                    ){
                        for (var item = 0; item < data.length; item++){
                            var arr = data[item];
                            var count = 0;
                            debugger;
                            $('#' + arr[count]).val(arr[count + 1]);
                            if (arr[count + 1] == "true") {
                                $('#' + arr[count] + 'Details').val(arr[count + 2]);
                                $('#' + arr[count] + 'Sec').removeClass('hidden');
                            } else {
                                $('#' + arr[count] + 'Details').val("");
                                $('#' + arr[count] + 'Sec').addClass('hidden');
                            }
                        }
                    };
                })
                .fail(function (a, s, d) {
                    alert("Unable to save.");
                });
        });

        function CloseAdvisory() {
            $('#modal').modal('hide');
        }

    </script>
    @await Html.PartialAsync("_InformationWizardScripts")

}

