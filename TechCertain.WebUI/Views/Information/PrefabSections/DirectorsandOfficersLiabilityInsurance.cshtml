@model TechCertain.WebUI.Models.InformationViewModel
<div class="padding-10">
    <div id="DNOForm" class="smart-form" novalidate="novalidate">
        <fieldset id="DirectorsandOfficersLiabilityInsurance">
            <div class="row">


                <div class="panel-body" id="@Model.Id body">

                    <section class="col col-xs-12 col-sm-12 col-md-12 col-lg-12">

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">
                                Would you like Directors' and Officers' Liability Insurance?
                            </label>
                        </section>
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="input">
                                <select id="DirectorsandOfficers1" onchange="DirectorsandOfficersLiabilityInsurance1Selected('DirectorsandOfficers1')" class="form-control rmv editable" name="DirectorsandOfficers1">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                            </label>
                            <p class="validationContainer" id="ValidateDirectorsandOfficersLiabilityInsurance1"></p>

                        </section>

                    </section>
                    <section class="col col-xs-12 col-sm-12 col-md-12 col-lg-12 hidden" id="DirectorsandOfficersLiabilityInsurance2Sec">

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">
                                Are you currently able to meet you debts was they fall due?
                            </label>
                        </section>
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="input">
                                <select id="DirectorsandOfficers2" class="form-control rmv editable" name="DirectorsandOfficers2">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                            </label>
                            <p class="validationContainer" id="ValidateDirectorsandOfficersLiabilityInsurance2"></p>

                        </section>

                    </section>


                    <section class="col col-xs-12 col-sm-12 col-md-12 col-lg-12 hidden" id="DirectorsandOfficersLiabilityInsurance3Sec">

                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label required">
                                Is this a renewal of an existing policy placed with NZACS?
                            </label>
                        </section>
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="input">
                                <select id="DirectorsandOfficers3" class="form-control rmv editable" name="DirectorsandOfficers3">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="true">Yes</option>
                                    <option value="false">No</option>
                                </select>
                            </label>
                            <p class="validationContainer" id="ValidateDirectorsandOfficersLiabilityInsurance3"></p>

                        </section>

                    </section>



                </div>
            </div>
            <button onclick="ValidateDNOGeneral(); event.preventDefault();" class="btn-sm AddupdateBoat" id="updateBoat">Update</button>


        </fieldset>
    </div>
</div>



<script type="text/javascript">

         $(window).on("load", function () {

           var clientInformationSheet = $('#AnswerSheetId').val();
           var postData = {ClientInformationSheet : clientInformationSheet};
            $.ajax({
     	// change back once mono decides to fix
             url: '@Url.Action("GetDirectorsandOfficersLiability", "Information")',
             type: "POST",
             data: postData
             })
                .done(function (data) {
             if (data != "") {
                for (var item = 0; item < data.length; item++){

                  var arr = data[item];
                  var count = 0;
                    $('#' + arr[count]).val(arr[count + 1]);
                    if ($('#DirectorsandOfficers1').val() == 'true') {
                        $('#DirectorsandOfficersLiabilityInsurance2Sec').removeClass('hidden');
                        $('#DirectorsandOfficersLiabilityInsurance3Sec').removeClass('hidden');

                    } else {
                       
                        $('#DirectorsandOfficersLiabilityInsurance2Sec').addClass('hidden');
                        $('#DirectorsandOfficersLiabilityInsurance3Sec').addClass('hidden');

                    }
                }
             };

                })
                .fail(function (a, s, d) {
                    debugger;
                  alert("Unable to save.");
                });
         });


    function DirectorsandOfficersLiabilityInsurance1Selected(DirectorsandOfficers) {
        debugger;

        var directorsandOfficers = document.getElementById(DirectorsandOfficers);

        if (directorsandOfficers.options[directorsandOfficers.selectedIndex].value == "true") {
            $('#DirectorsandOfficersLiabilityInsurance2Sec').removeClass('hidden');
            $('#DirectorsandOfficersLiabilityInsurance3Sec').removeClass('hidden');

        } else {
            $('#DirectorsandOfficers2').val('');
            $('#DirectorsandOfficers3').val('');
            $('#DirectorsandOfficersLiabilityInsurance2Sec').addClass('hidden');
            $('#DirectorsandOfficersLiabilityInsurance3Sec').addClass('hidden');

        }
    }

     function ValidateDNOGeneral() {
        debugger;
        var GLI1 = $('#DirectorsandOfficers1').val();
        var GLI2 = $('#DirectorsandOfficers2').val();
        var GLI3 = $('#DirectorsandOfficers3').val();

        var validity = true;
        if (GLI1 == "") {
            $('#ValidateDirectorsandOfficersLiabilityInsurance1').html("<font color='red'>Field is required</font>")
            if (validity) {
                validity = false;
            }
        } else {
            $('#ValidateDirectorsandOfficersLiabilityInsurance1').html("<i></i>");
        }
        if (GLI2 == "" && GLI1 == 'true') {
            $('#ValidateDirectorsandOfficersLiabilityInsurance2').html("<font color='red'>Field is required</font>")
            if (validity) {
                validity = false;
            }
        } else {
            $('#ValidateDirectorsandOfficersLiabilityInsurance2').html("<i></i>");
        }
          if (GLI3 == "" && GLI1 == 'true') {
            $('#ValidateDirectorsandOfficersLiabilityInsurance3').html("<font color='red'>Field is required</font>")
            if (validity) {
                validity = false;
            }
        } else {
            $('#ValidateDirectorsandOfficersLiabilityInsurance3').html("<i></i>");
        }

        if (validity) {
            SaveDirectorsandOfficersLiability(); 
        }
    };

        function SaveDirectorsandOfficersLiability() {
            debugger;
                   var DirectorsandOfficers = new Array(3);

                   for (var i = 0; i < DirectorsandOfficers.length; i++) {
                       DirectorsandOfficers[i] = new Array(2);
                   }

            for (var i = 1; i <= 3; i++) {
                for (var j = 0; j < 2; j++) {
                    DirectorsandOfficers[i-1][0] = "DirectorsandOfficers" + i;
                var directorsandOfficers = "#DirectorsandOfficers" + i;
                DirectorsandOfficers[i-1][1] = $(directorsandOfficers).val();
                }

            }

                   var postData = { Answers: DirectorsandOfficers, ClientInformationSheet: clientInformationSheet };

             $.ajax({
                           url: '@Url.Action("UpdateAnswer", "Information")',
                           type: "POST",
                           data: postData
                       })
                 .done(function (data) {
                           })
                           .fail(function (a, s, d) {
                               alert("Unable to save.");
                           });


    };

   

    //function init() {
    //    debugger;
    //var count=5;
    //var counter=setInterval(timer,1000);
    //    function timer(){
    //        count=count-1;
    //        if(count==0){
    //            alert("Data has beed saved.")
    //            return;
    //        } 
    //    }
    //};
</script>

