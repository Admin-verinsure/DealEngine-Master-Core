@model TechCertain.WebUI.Models.InformationViewModel

@using System.Linq

<div class="padding-10">
    <div id="proposalcreate-form" class="smart-form" novalidate="novalidate">

        @*@tabs.Tab("List All")
            @tabs.Tab("Search")
            @tabs.Tab("Edit").Class("EditButton")
            @tabs.Tab("Add").Class("AddButton")
            @tabs.Tab("List Removed").Class("MotorRemoved")*@

        <ul id="tab" class="nav nav-tabs">
            <li class="nav nav-tabs active"> <a href="#rmvTabs1"> List All </a> </li>
            <li class="nav nav-tabs"> <a href="#rmvTabs2"> Search </a> </li>
            <li class="nav nav-tabs"> <a href="#rmvTabs3"> Edit </a> </li>
            <li class="nav nav-tabs"> <a href="#rmvTabs4"> Add </a> </li>
            <li class="nav nav-tabs"> <a href="#rmvTabs5" Class="MotorRemoved"> List Removed </a> </li>

        </ul>
        <div id="rmvTabs1" class="tab-content">
            <fieldset>
                <div class="row">
                    <section class="col col-xs-12">
                        <script src="~/jquery/jquery.min.js"></script>
                        <script type="text/javascript">
                                $(window).on('load',function () {
						    $("#tblRegisteredMV").jqGrid({
						        url: "/Services/GetVehicles?informationId=@Model.AnswerSheetId&validated=true&removed=false&ceased=false&transfered=false",
						        datatype: "xml",
                                mtype: "GET",
                                async: true,
								colNames: ["","Year", "Registration", "Make", "Model", "Sum Insured", ""],
                                colModel: [
                                    {
                                        name: "update", align: 'center',width:60, search: false, formatter: function (cellvalue, options, rowobject) {
                                            return ('<button onclick="EditRegisteredMotorVehicle(\'rmv\', \'' + cellvalue + '\'); SetCurrentTab(\'rmvTabs3\');" type="button"class="btn btn-success btn-sm"><i class="fa fa-edit"></i></button>');
                                        }
                                        //{ return '<button onclick="alert(&quot;'+cellvalue+'&quot;);" type="button">Edit</button>'; }
                                    },
                                    { name: "Year", align: 'center', key: 'true' },
						            { name: "Registration", align: 'center', key: 'true' },
						            { name: "Make", align: 'center' },
						            { name: "VehicleModel", align: 'center' },
						            { name: "SumInsured", align: 'center' },
						            { name: "update", align: 'center', width:60, search: false, formatter: function(cellvalue, options, rowobject)
                                    {
                                        return ('<button onclick="SetVehicleRemovedStatus(\'' + cellvalue + '\', \'true\', \'#tblRegisteredMV\', \'#tblRemovedRegisteredMV\');" type="button"class=" btn btn-danger btn-sm"><span class="glyphicon glyphicon-trash"></span></button>');
										}
										//{ return '<button onclick="alert(&quot;'+cellvalue+'&quot;);" type="button">Edit</button>'; }
									}
								],
						        autowidth: true,
						        pager: "#pagerRegisteredMV",
						        rowNum: 10,
						        rowList: [10, 20, 30],
						        sortname: "Registration",
						        sortorder: "desc",
						        viewrecords: true,
						        gridview: true,
						        autoencode: true
						    });
						    $("#tblRegisteredMV").jqGrid('navGrid',
						    	'#pagerRegisteredMV',
						    	{edit: false, add: false, del: false},
						    	//options
						    	{height:280,reloadAfterSubmit:false},
						    	// edit options
						    	{height:280,reloadAfterSubmit:false},
						    	// add options
						    	{reloadAfterSubmit:false},
						    	// del options
						    	{sopt:['eq','bw','cn']}
						    	// search options
						    );
						});
                        </script>
                        <table id="tblRegisteredMV"><tr><td></td></tr></table>
                        <div id="pagerRegisteredMV"></div>
                        @*(Html.TableFor<TechCertain.Web.UI.ViewModels.VehicleViewModel>()
                            .Hover().Striped().SetId("tblRegisteredMV")
                            .Columns(column =>
                            {
                                column.Expression(p => p.Registration);
                                column.Expression(p => p.Make);
                                column.Expression(p => p.VehicleModel).Title("Model");
                                column.Expression(p => p.SumInsured).Title("Sum Insured");
                                column.Commands(p => p.VehicleId).Event("onclick=alert(\"$id$\")", "Update").Class("btn btn-xs btn-default");
                            })
                            .DataSource(this.Model.RegisteredVehicles))
                        *@
                    </section>
                </div>
            </fieldset>
        </div>
        <div id="rmvTabs2" class="tab-content">

            <fieldset>
                <div class="row" id="update">
                    <section class="col col-6">
                        <label class="label">Enter plate number</label>
                        <label class="input">
                            <input autocomplete="off" class="form-control" data-provide="typeahead" data-url="/Services/GetVehiclePlates" id="Registration" name="Registration" type="text" placeholder="Plate Number" value="">
                        </label>
                        <button onclick="GetRegisteredMVDetails('#Registration')" class="btn-sm updateBoat" id="updateBoat">Update</button>
                    </section>
                </div>
            </fieldset>

        </div>

        <div id="rmvTabs3" class="tab-content">
            <fieldset id="fieldset">
                <input id="Validated" class="rmv" name="Validated" type="hidden">
                <input id="VehicleId" class="rmv" name="VehicleId" type="hidden">
                <!-- 1st row -->
                <div class="row">
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Year (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="Year" id="Year" name="Year" placeholder="Year (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Make (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="Make" id="Make" name="Make" placeholder="Make (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Model (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="VehicleModel" id="VehicleModel" name="VehicleModel" placeholder="Model (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">VIN (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="VIN" id="VIN" name="VIN" placeholder="VIN (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Chassis Number (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="ChassisNumber" id="ChassisNumber" name="ChassisNumber" placeholder="Chassis Number (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <!-- <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        Html.Bootstrap().Button().Text("Revalidate").HtmlAttributes(new { onclick = "RevalidateMotorVehicle('#rmvTabs-0', '#tblRegisteredMV'); SetCurrentTab('rmvTabs-2');" }).Class("btn-sm")
                    <!--</section>  -->
                </div>
                <!-- 2nd rows -->
                <div class="row">
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label required">$ Estimated Market Value</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="SumInsured" id="SumInsured" name="SumInsured" placeholder="$ Estimated Market Value" value="" required>
                        </label>
                        <p class="validationContainer" id="validateMarketValue"></p>

                    </section>
                    <!--section class="col col-xs-12 col-sm-6 col-md-4 col-lg-3">
                        <label class="label">Fleet Number</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="FleetNumber" id="FleetNumber" name="FleetNumber" placeholder="Fleet Number" value="">
                        </label>
                    </section-->
                    <!--section class="col col-xs-12 col-sm-6 col-md-4 col-lg-3">
                        <label class="label">Area of Operation</label>
                        <label class="input">
                            <select class="form-control rmv" id="AreaOfOperation" name="AreaOfOperation">
                                <option selected="selected" value="">-- Select --</option>
                                <option value="1">Auckland</option>
                                <option value="2">Wellington</option>
                                <option value="3">Rest of North Island</option>
                                <option value="4">Christchurch</option>
                                <option value="5">Rest of South Island</option>
                            </select>
                        </label>
                    </section-->
                    <!--section class="col col-xs-12 col-sm-6 col-md-4 col-lg-3">
                        <label class="label">Type of Vehicle</label>
                        <label class="input">
                            <select class="form-control rmv" id="VehicleType" name="VehicleType">
                                <option value="8">Registered Trailer</option>
                            </select>
                        </label>
                    </section-->
                    <!--section class="col col-xs-12 col-sm-6 col-md-4 col-lg-3">
                        <label class="label">Use</label>
                        <label class="input">
                            <select class="form-control rmv" id="Use" name="Use">
                                <option value="4">Boat Trailer</option>
                            </select>
                        </label>
                    </section-->
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label required">Location</label>
                        <label class="input">
                            <select onchange="addTrailerLoc()" class="form-control rmv" id="VehicleLocation" name="VehicleLocation">
                                <option selected="selected" value="">-- Select --</option>

                                @foreach (var tloc in Model.Locations)
                                {
                                    <option value="@tloc.LocationId">@string.Join(", ", tloc.Street, tloc.Suburb, tloc.City)</option>
                                }
                                <option value="add">Add Location</option>

                            </select>
                        </label>
                        <p class="validationContainer" id="validateVehicleLocation"></p>

                    </section>

                    <!-- 3rd rows -->
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label required">Effective Date</label>
                        <label class="input">
                            <i class="icon-append fa fa-calendar"></i>
                            <input name="EffectiveDate" placeholder="Effective Date" class="Effectivedate form-control rmv" data-dateformat="dd/mm/yy" id="EffectiveDate" type="text" required>
                        </label>
                        <p class="validationContainer" id="validateEffectiveDate"></p>
                    </section>

                    @if (Model.IsChange)
                    {
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label">Cease Date</label>
                            <label class="input">
                                <i class="icon-append fa fa-calendar"></i>
                                <input name="CeaseDate" placeholder="Cease Date" class="datepicker form-control rmv" data-dateformat="dd/mm/yy" id="CeaseDate" type="text">
                            </label>
                        </section>
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label">Cease Reason</label>
                            <label class="input">
                                <select class="form-control rmv" id="CeaseReason" name="CeaseReason">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="1">Sold</option>
                                    <option value="2">Decommision</option>
                                    <option value="3">Writen off</option>
                                    <option value="4">Transfered</option>
                                    <option value="9">Other</option>
                                </select>
                            </label>
                        </section>
                    }

                    <!-- 4th row -->
                    @*<section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label">Interested Parties</label>
                            <label class="input">
                                <select class="cselect form-control rmv" data-placeholder="Interested Parties" id="InterestedParties" multiple="multiple" name="InterestedParties" style="display: none;">
                                    @foreach (var trip in Model.InterestedParties.Where(o => o.OrganisationType == "financial"))
                                    {
                                        <option value="@trip.ID">@trip.OrganisationName</option>
                                    }
                                </select>
                            </label>
                        </section>*@

                    <!-- 5th row -->
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Additional Information about Registered Trailer</label>
                        <label class="textarea">
                            <textarea class="form-control rmv" data-type="TEXTAREA" data-name="Notes" id="Notes" name="Notes" placeholder="Additional Information about Registered Trailer" value=""></textarea>
                        </label>
                    </section>

                    <!-- 6th row -->
                    <div class="row" id="update">
                        <section class="col col-xs-12">


                            <button onclick="ValidateMotorVehicle('#rmvTabs3', '#tblRegisteredMV','rmvTabs1')" class="btn-sm updateBoat" id="updateBoat">Update</button>
                            <button onclick="ClearBoats('#rmvTabs2','rmvTabs1')" class="btn-sm ClearBoat" id="AddClearBoat">Cancel Update</button>

                            @*@Html.Bootstrap().Button().Text("Update").HtmlAttributes(new { onclick = "ValidateMotorVehicle('#rmvTabs-3', '#tblRegisteredMV','rmvTabs-1');" }).Class("btn-sm updateBoat").Id("updateBoat")

                                @Html.Bootstrap().Button().Text("Cancel Update").HtmlAttributes(new { onclick = "ClearBoats('#rmvTabs-2','rmvTabs-1');" }).Class("btn-sm ClearBoat").Id("ClearBoat")*@

                        </section>
                    </div>
                </div>

            </fieldset>
        </div>

        <div id="rmvTabs4" class="tab-content">

            <fieldset id="fieldset">
                <input id="AddValidated" class="rmv" name="Validated" type="hidden">
                <input id="VehicleId" class="rmv" name="VehicleId" type="hidden">
                <!-- 1st row -->
                <div class="row">
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Year (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="Year" id="AddYear" name="Year" placeholder="Year (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Make (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="Make" id="AddMake" name="Make" placeholder="Make (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Model (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="VehicleModel" id="AddVehicleModel" name="VehicleModel" placeholder="Model (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">VIN (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="VIN" id="AddVIN" name="VIN" placeholder="VIN (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Chassis Number (Read-Only)</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="ChassisNumber" id="AddChassisNumber" name="ChassisNumber" placeholder="Chassis Number (Read-Only)" readonly="true" value="">
                        </label>
                    </section>
                    <!-- <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                        <button onclick="ClearBoats('#rmvTabs2','rmvTabs1')" class="btn-sm ClearBoat" id="AddClearBoat">Cancel Update</button>

                        Html.Bootstrap().Button().Text("Revalidate").HtmlAttributes(new { onclick = "RevalidateMotorVehicle('#rmvTabs-0', '#tblRegisteredMV'); SetCurrentTab('rmvTabs-2');" }).Class("btn-sm")
                    <!--</section>  -->
                </div>
                <!-- 2nd rows -->
                <div class="row">
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label required">$ Estimated Market Value</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="SumInsured" id="AddSumInsured" name="SumInsured" placeholder="$ Estimated Market Value" value="" required>
                        </label>
                        <p class="validationContainer" id="AddvalidateMarketValue"></p>

                    </section>
                    <!--section class="col col-xs-12 col-sm-6 col-md-4 col-lg-3">
                        <label class="label">Fleet Number</label>
                        <label class="input">
                            <i></i>
                            <input class="form-control rmv" type="text" data-type="TEXTBOX" data-name="FleetNumber" id="FleetNumber" name="FleetNumber" placeholder="Fleet Number" value="">
                        </label>
                    </section-->
                    <!--section class="col col-xs-12 col-sm-6 col-md-4 col-lg-3">
                        <label class="label">Area of Operation</label>
                        <label class="input">
                            <select class="form-control rmv" id="AreaOfOperation" name="AreaOfOperation">
                                <option selected="selected" value="">-- Select --</option>
                                <option value="1">Auckland</option>
                                <option value="2">Wellington</option>
                                <option value="3">Rest of North Island</option>
                                <option value="4">Christchurch</option>
                                <option value="5">Rest of South Island</option>
                            </select>
                        </label>
                    </section-->
                    <!--section class="col col-xs-12 col-sm-6 col-md-4 col-lg-3">
                        <label class="label">Type of Vehicle</label>
                        <label class="input">
                            <select class="form-control rmv" id="VehicleType" name="VehicleType">
                                <option value="8">Registered Trailer</option>
                            </select>
                        </label>
                    </section-->
                    <!--section class="col col-xs-12 col-sm-6 col-md-4 col-lg-3">
                        <label class="label">Use</label>
                        <label class="input">
                            <select class="form-control rmv" id="Use" name="Use">
                                <option value="4">Boat Trailer</option>
                            </select>
                        </label>
                    </section-->

                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label required">Location</label>
                        <label class="input">
                            <select onchange="AddaddTrailerLoc()" class="form-control rmv" id="AddVehicleLocation" name="VehicleLocation">
                                <option selected="selected" value="">-- Select --</option>
                                @foreach (var tloc in Model.Locations)
                                {
                                    <option value="@tloc.LocationId">@string.Join(", ", tloc.Street, tloc.Suburb, tloc.City)</option>
                                }
                                <option value="add">Add Location</option>

                            </select>
                        </label>
                        <p class="validationContainer" id="validateAddVehicleLocation"></p>

                    </section>

                    <!-- 3rd rows -->
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label required">Effective Date</label>
                        <label class="input">
                            <i class="icon-append fa fa-calendar"></i>
                            <input name="EffectiveDate" placeholder="Effective Date" class="Effectivedate form-control rmv" data-dateformat="dd/mm/yy" id="AddEffectiveDate" type="text" required>
                        </label> <p class="validationContainer" id="validateAddEffectiveDate"></p>
                    </section>
                    @if (Model.IsChange)
                    {
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label">Cease Date</label>
                            <label class="input">
                                <i class="icon-append fa fa-calendar"></i>
                                <input name="CeaseDate" placeholder="Cease Date" class="datepicker form-control rmv" data-dateformat="dd/mm/yy" id="AddCeaseDate" type="text">
                            </label>
                        </section>
                        <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label">Cease Reason</label>
                            <label class="input">
                                <select class="form-control rmv" id="AddCeaseReason" name="CeaseReason">
                                    <option selected="selected" value="">-- Select --</option>
                                    <option value="1">Sold</option>
                                    <option value="2">Decommision</option>
                                    <option value="3">Writen off</option>
                                    <option value="4">Transfered</option>
                                    <option value="9">Other</option>
                                </select>
                            </label>
                        </section>
                    }

                    <!-- 4th row -->
                    @*<section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <label class="label">Interested Parties</label>
                            <label class="input">
                                <select class="cselect form-control rmv" data-placeholder="Interested Parties" id="InterestedParties" multiple="multiple" name="InterestedParties" style="display: none;">
                                    @foreach (var trip in Model.InterestedParties.Where(o => o.OrganisationType == "financial"))
                                    {
                                        <option value="@trip.ID">@trip.OrganisationName</option>
                                    }
                                </select>
                            </label>
                        </section>*@

                    <!-- 5th row -->
                    <section class="col col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <label class="label">Additional Information about Registered Trailer</label>
                        <label class="textarea">
                            <textarea class="form-control rmv" data-type="TEXTAREA" data-name="Notes" id="AddNotes" name="Notes" placeholder="Additional Information about Registered Trailer" value=""></textarea>
                        </label>
                    </section>

                    <!-- 6th row -->
                    <div class="row" id="update">
                        <section class="col col-xs-12">

                            <button onclick="ValidateAddMotorVehicle('#rmvTabs4', '#tblRegisteredMV','rmvTabs1')" class="btn-sm AddupdateBoat" id="updateBoat">Add</button>
                            <button onclick="ClearBoats('#rmvTabs3','rmvTabs1')" class="btn-sm AddClearBoat" id="AddClearBoat">Clear and Cancel</button>
                            @*@Html.Bootstrap().Button().Text("Add").HtmlAttributes(new { onclick = "ValidateAddMotorVehicle('#rmvTabs-4', '#tblRegisteredMV','rmvTabs-1');" }).Class("btn-sm AddupdateBoat").Id("AddupdateBoat")
                                @Html.Bootstrap().Button().Text("Clear and Cancel").HtmlAttributes(new { onclick = "ClearBoats('#rmvTabs-3','rmvTabs-1');" }).Class("btn-sm AddClearBoat").Id("AddClearBoat")*@
                        </section>
                    </div>
                </div>

            </fieldset>
        </div>
        <div id="rmvTabs5" class="tab-content">

            <fieldset>
                <div class="row">
                    <section class="col col-xs-12">
                        <script src="~/jquery/jquery.min.js"></script>
                        <script type="text/javascript">
                                $(".MotorRemoved").click(function () {
						    $("#tblRemovedRegisteredMV").jqGrid({
						        url: "/Services/GetVehicles?informationId=@Model.AnswerSheetId&validated=true&removed=true&ceased=false&transfered=false",
						        datatype: "xml",
                                mtype: "GET",
                                async: true,
								colNames: ["","Registration", "Make", "Model", "Sum Insured"],
                                colModel: [
                                    {
                                        name: "update", align: 'center',width:60, search: false, formatter: function (cellvalue, options, rowobject) { return '<button onclick="SetVehicleRemovedStatus(\'' + cellvalue + '\', \'false\', \'#tblRemovedRegisteredMV\', \'#tblRegisteredMV\');" type="button" class=" btn btn-success btn-sm" ><i class="fa fa-undo"></i></button>'; }
                                    },
						            { name: "Registration", align: 'center', key: 'true' },
						            { name: "Make", align: 'center' },
						            { name: "VehicleModel", align: 'center' },
						            { name: "SumInsured", align: 'center' }

								],
						        autowidth: true,
						        pager: "#pagerRemovedRegisteredMV",
						        rowNum: 10,
						        rowList: [10, 20, 30],
						        sortname: "Registration",
						        sortorder: "desc",
						        viewrecords: true,
						        gridview: true,
						        autoencode: true
						    });
						    $("#tblRemovedRegisteredMV").jqGrid('navGrid',
						    	'#pagerRemovedRegisteredMV',
						    	{edit: false, add: false, del: false},
						    	//options
						    	{height:280,reloadAfterSubmit:false},
						    	// edit options
						    	{height:280,reloadAfterSubmit:false},
						    	// add options
						    	{reloadAfterSubmit:false},
						    	// del options
						    	{sopt:['eq','bw','cn']}
						    	// search options
						    );
						});
                        </script>
                        <table id="tblRemovedRegisteredMV"><tr><td></td></tr></table>
                        <div id="pagerRemovedRegisteredMV"></div>
                    </section>
                </div>
            </fieldset>
        </div>
        @*/*using (tabs.BeginPanel())
        {
        <fieldset>
            <div class="row">
                <section class="col col-xs-12">
                    <script src="~/jquery/jquery.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function () {
                            $("#tblCeasedRegisteredMV").jqGrid({
                                url: "/Services/GetVehicles?informationId=@Model.AnswerSheetId&validated=true&removed=false&ceased=true&transfered=false",
                                datatype: "xml",
                                mtype: "GET",
                                colNames: ["Registration", "Make", "Model", "Sum Insured", ""],
                                colModel: [
                                    { name: "Registration", align: 'center', key: 'true' },
                                    { name: "Make", align: 'center' },
                                    { name: "VehicleModel", align: 'center' },
                                    { name: "SumInsured", align: 'center' },
                                    { name: "update", align: 'center', search: false, formatter: function(cellvalue, options, rowobject)
                                        { return '<button onclick="SetVehicleCeasedStatus(\''+cellvalue+'\', \'false\', \'#tblCeasedRegisteredMV\', \'#tblRegisteredMV\');" type="button">Restore</button>'; }
                                    }
                                ],
                                autowidth: true,
                                pager: "#pagerCeasedRegisteredMV",
                                rowNum: 10,
                                rowList: [10, 20, 30],
                                sortname: "Registration",
                                sortorder: "desc",
                                viewrecords: true,
                                gridview: true,
                                autoencode: true
                            });
                            $("#tblCeasedRegisteredMV").jqGrid('navGrid',
                                '#pagerCeasedRegisteredMV',
                                {edit: false, add: false, del: false},
                                //options
                                {height:280,reloadAfterSubmit:false},
                                // edit options
                                {height:280,reloadAfterSubmit:false},
                                // add options
                                {reloadAfterSubmit:false},
                                // del options
                                {sopt:['eq','bw','cn']}
                                // search options
                            );
                        });
                    </script>
                    <table id="tblCeasedRegisteredMV"><tr><td></td></tr></table>
                    <div id="pagerCeasedRegisteredMV"></div>
                </section>
            </div>
        </fieldset>
        }
        using (tabs.BeginPanel())
        {
        <fieldset>
            <div class="row">
                <section class="col col-xs-12">
                    <script src="~/jquery/jquery.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function () {
                            $("#tblTransferedRegisteredMV").jqGrid({
                                url: "/Services/GetVehicles?informationId=@Model.AnswerSheetId&validated=true&removed=false&ceased=false&transfered=true",
                                datatype: "xml",
                                mtype: "GET",
                                colNames: ["Registration", "Make", "Model", "Sum Insured", ""],
                                colModel: [
                                    { name: "Registration", align: 'center', key: 'true' },
                                    { name: "Make", align: 'center' },
                                    { name: "VehicleModel", align: 'center' },
                                    { name: "SumInsured", align: 'center' },
                                    { name: "update", align: 'center', search: false, formatter: function(cellvalue, options, rowobject)
                                    { return '<button onclick="SetVehicleTransferedStatus(\'' + cellvalue + '\', \'false\', \'#tblTransferedRegisteredMV\', \'#tblRegisteredMV\');" type="button">Restore</button>'; }
                                    }
                                ],
                                autowidth: true,
                                pager: "#pagerTransferedRegisteredMV",
                                rowNum: 10,
                                rowList: [10, 20, 30],
                                sortname: "Registration",
                                sortorder: "desc",
                                viewrecords: true,
                                gridview: true,
                                autoencode: true
                            });
                            $("#tblTransferedRegisteredMV").jqGrid('navGrid',
                                '#pagerTransferedRegisteredMV',
                                {edit: false, add: false, del: false},
                                //options
                                {height:280,reloadAfterSubmit:false},
                                // edit options
                                {height:280,reloadAfterSubmit:false},
                                // add options
                                {reloadAfterSubmit:false},
                                // del options
                                {sopt:['eq','bw','cn']}
                                // search options
                            );
                        });
                    </script>
                    <table id="tblTransferedRegisteredMV"><tr><td></td></tr></table>
                    <div id="pagerTransferedRegisteredMV"></div>
                </section>
            </div>
        </fieldset>
        }*/*@



    </div>
</div>


@*@section pagespecific {
        <script>
            debugger;

                @Html.Partial("_CommonMotor")

        </script>


    }*@



@*<script type="text/javascript">

             function EditRegisteredMotorVehicle(classId, vehicleId) {
            var _sheetId = $('#AnswerSheetId').val();
            debugger;
        $.ajax({
            // change back once mono decides to fix
            url: '@Url.FixedAction("GetVehicle", "Services")',
            type: "Post",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({ vehicleId : vehicleId, answerSheetId : _sheetId })
        })
            .done(function (data) {
            $('#Registration').val(data.Registration);
            $('#Validated.'+classId).val(data.Validated);
            $('#VehicleId.'+classId).val(data.VehicleId);
            $('#Year.'+classId).val(data.Year);
            $('#Make.'+classId).val(data.Make);
            $('#VehicleModel.'+classId).val(data.VehicleModel);
            $('#VIN.'+classId).val(data.VIN);
            $('#ChassisNumber.'+classId).val(data.ChassisNumber);
            $('#EngineNumber.' + classId).val(data.EngineNumber);
            $('#SerialNumber.' + classId).val(data.SerialNumber);
            $('#GrossVehicleMass.' + classId).val(data.GrossVehicleMass);
            $('#SumInsured.'+classId).val(data.SumInsured);
            $('#FleetNumber.'+classId).val(data.FleetNumber);
            $('#AreaOfOperation.'+classId).val(data.AreaOfOperation);
            $('#VehicleType.'+classId).val(data.VehicleType);
            $('#Use.'+classId).val(data.Use);
            $('#SubUse.'+classId).val(data.SubUse);
            $('#VehicleLocation.' + classId).val(data.VehicleLocation);
            $('#EffectiveDate.' + classId).val(data.EffectiveDate);
            $('#CeaseDate.' + classId).val(data.CeaseDate);
            $('#CeaseReason.' + classId).val(data.CeaseReason);
            $('#InterestedParties.'+classId).val(data.InterestedParties);
            $('#InterestedParties2.'+classId).val(data.InterestedParties2);
            $('#Notes.'+classId).val(data.Notes);
                $('#MotorYear.' + classId).val(data.Year);
                $('#MotorMake.' + classId).val(data.Make);
                $('#MotorModel.' + classId).val(data.VehicleModel);
                $('#MotorSumInsured.' + classId).val(data.SumInsured);
                $('#MotorLocation.' + classId).val(data.VehicleLocation);

            UpdateChosen();
            });
           };

         function UpdateChosen() {
        // find all multiselect items and apply Chosen
        $('.cselect').each(function() {
            $('#'+this.id).trigger("chosen:updated");
        });
        };

            function ClearBoats(tabId,currentTab) {
            if (confirm("I don't want to add.")) {
                $(tabId + " :input").val(""); //Clears form
                SetCurrentTab(currentTab);
            }
            else {
                return false;
            }
        };

         function SetCurrentTab(tabPaneId) {
            $('.nav-tabs a[href="#' + tabPaneId + '"]').tab('show');
            $('.nav-tabs a[href="#' + tabPaneId + '"]').tab('refresh');
        };

          function SetVehicleRemovedStatus(vehicleId, status, sourceTable, destTable) {
        $.ajax({
            // change back once mono decides to fix
            url: '@Url.FixedAction("SetVehicleRemovedStatus", "Services")',
            type: "Post",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({ vehicleId : vehicleId, status : status })
        })
        .done(function (data) {
            if (data === true) {
                $(sourceTable).trigger( 'reloadGrid' );
                $(destTable).trigger( 'reloadGrid' );
                $.smallBox({
                    title: "Vehicle status has been updated",
                    color: "#5F895F",
                    iconSmall: "fa fa-check bounce animated",
                    timeout: 4000
                });
                location.reload(true);
            }
        });
    };

    function GetRegisteredMVDetails(elementBaseName)
    {
        var TrailerModal = false;
        if (elementBaseName == "#RegistrationModal") {
            TrailerModal = true;
        }
        var plate = $(elementBaseName).val();
        // Get info from Carjam here
        $.ajax({
            // change back once mono decides to fix
            url: '@Url.FixedAction("SearchVehicle", "Services")',
            type: "POST",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({ registration : plate })
        })
            .done(function (data) {
                if (TrailerModal) {
                    $('#ValidatedTrailer.b').val(data.Validated);
                    $('#YearModal.b').val(data.Year);
                    $('#MakeModal.b').val(data.Make);
                    $('#ModelModal.b').val(data.VehicleModel);
                    $('#VINModal.b').val(data.VIN);
                    $('#ChassisNumberModal.b').val(data.ChassisNumber);
                    $("#trailerModalHairline, #trailerModalHairline2, #trailerModalHairline3, #trailerModalHairline4").show('2000');
                    $(vesselTrailerChassis).show('2000');
                    $(vesselTrailerEffective).show('2000');
                    $(vesselTrailerCease).show('2000');
                    $(vesselTrailerCeaseReason).show('2000');
                    $(vesselTrailerYear).show('2000');
                    $(vesselTrailerMake).show('2000');
                    $(vesselTrailerModel).show('2000');
                    $(vesselTrailerMV).show('2000');
                    $(vesselTrailerLoc).show('2000');
                    $(vesselTrailerNotes).show('2000');
                    $('#YearModal').attr("readonly", true);
                    $('#MakeModal').attr("readonly", true);
                    $('#ModelModal').attr("readonly", true);
                }
                else {
                    $('#AddValidated.rmv').val(data.Validated);
                    $('#AddYear.rmv').val(data.Year);
                    $('#AddMake.rmv').val(data.Make);
                    $('#AddVehicleModel.rmv').val(data.VehicleModel);
                    $('#AddVIN.rmv').val(data.VIN);
                    $('#AddChassisNumber.rmv').val(data.ChassisNumber);
                    $('#EngineNumber.rmv').val(data.EngineNumber);
                    $('#GrossVehicleMass.rmv').val(data.GrossVehicleMass);
                }
        })
        .fail(function (jqXHR, textStatus, errorThrown) {
            alert("Unable to get Vehicle details.");
        });
        };

       function ValidateMotorVehicle(tabId, tableId, currenttab) {
            var sumInsured = $('#SumInsured').val();
            var vehicleLocation = $('#VehicleLocation').val();
            var result = true;
            if (sumInsured == "") {
                $('#validateMarketValue').html("<font color='red'>Field is required</font>")
                if (result) {
                    result = false;
                }
            } else {
                $('#validateMarketValue').html("<font></font>");
            }
            if (vehicleLocation == "") {
                $('#validateVehicleLocation').html("<font color='red'>Field is required</font>")
                if (result) {
                    result = false;
                }
            } else {
                $('#validateVehicleLocation').html("<font></font>");
            }

            if (result) {
                var r = /^-?[0-9]*[1-9][0-9]*$/;
                var result1 = r.test(sumInsured);
            } else {
                return result;
            }
            if (result1) {
                AddMotorVehicle(tabId, tableId);
                SetCurrentTab(currenttab);
            } else {
                $('#validateMarketValue').html("<font color='red'>Please enter the number.</font>")
                return result1;
            }

        }

        function ValidateAddMotorVehicle(tabId, tableId, currenttab) {
            var sumInsured = $('#AddSumInsured').val();
            var vehicleLocation = $('#AddVehicleLocation').val();
            var result = true;
            if (sumInsured == "") {
                $('#AddvalidateMarketValue').html("<font color='red'>Field is required</font>")
                if (result) {
                    result = false;
                }
            } else {
                $('#AddvalidateMarketValue').html("<font></font>");
            }
            if (vehicleLocation == "") {
                $('#validateAddVehicleLocation').html("<font color='red'>Field is required</font>")
                if (result) {
                    result = false;
                }
            } else {
                $('#validateAddVehicleLocation').html("<font></font>");
            }

            if (result) {
                var r = /^-?[0-9]*[1-9][0-9]*$/;
                var result1 = r.test(sumInsured);
            } else {
                return result;

            }

            if (result1) {
                AddMotorVehicle(tabId, tableId);
                SetCurrentTab(currenttab);
            } else {
                $('#validateMarketValue').html("<font color='red'>Please enter the number.</font>")
                return result1;
            }

        }

    function AddMotorVehicle(tabId, tableId) {
        var registration = $('#Registration').serialize();
        var informationId = $('#AnswerSheetId').serialize();
        $.ajax({
            // change back once mono decides to fix
            url: '@Url.FixedAction("AddVehicle", "Services")',
            type: "POST",
            data: $.grep([$(tabId + " :input").serialize(), registration, informationId], Boolean).join("&")
        })
            .done(function (data) {
                debugger;
                console.log(data);
                vdate = data.Year;
                vmake = data.Make;
                vmodel = data.VehicleModel;
            var vid = "";
            if (data.Validated===true) {
                vid = data.Registration;
            } else {
                vid = data.FleetNumber;
            };

            $.smallBox({
                title: "Vehicle (" + vdate + " " + vmake + " " + vmodel +") has been saved",
                color: "#5F895F",
                iconSmall: "fa fa-check bounce animated",
                timeout: 4000
            });
            // reload grid
            $(tableId).trigger( 'reloadGrid' );
            $('#tblCeasedRegisteredMV').trigger( 'reloadGrid' );
                $('#tblTransferedRegisteredMV').trigger('reloadGrid');
                $('#tblUnRegisteredMV').trigger('reloadGrid');


            $('#Registration').val("");
            $(tabId + " :input").val("");
            $(tabId + ', #InterestedParties').val('').trigger('chosen:updated');
                $(tabId + ', #InterestedParties2').val('').trigger('chosen:updated');

                if (data.Registration == null) {
                        $('#BoatTrailer.b').append($('<option>', { value: data.VehicleId, text: data.Year + ", " + data.Make + ", " + data.VehicleModel }));
                        $("#BoatTrailer.b [value='add']").remove();
                        $('#BoatTrailer.b').append($('<option>', { value: "add", text: "Add Trailer" }));
                        $('#BoatTrailer.b').val(data.VehicleId);
                        $('#AddBoatTrailer.b').append($('<option>', { value: data.VehicleId, text: data.Year + ", " + data.Make + ", " + data.VehicleModel }));
                        $("#AddBoatTrailer.b [value='add']").remove();
                        $('#AddBoatTrailer.b').append($('<option>', { value: "add", text: "Add Trailer" }));
                        $('#AddBoatTrailer.b').val(data.VehicleId);
                    } else {
                        $('#BoatTrailer.b').append($('<option>', { value: data.VehicleId, text:  data.Year + ", " + data.Make + ", " + data.VehicleModel + ", " + data.Registration}));
                        $("#BoatTrailer.b [value='add']").remove();
                        $('#BoatTrailer.b').append($('<option>', { value: "add", text: "Add Trailer" }));
                        $('#BoatTrailer.b').val(data.VehicleId);
                        $('#AddBoatTrailer.b').append($('<option>', { value: data.VehicleId, text:  data.Year + ", " + data.Make + ", " + data.VehicleModel + ", " + data.Registration}));
                        $("#AddBoatTrailer.b [value='add']").remove();
                        $('#AddBoatTrailer.b').append($('<option>', { value: "add", text: "Add Trailer" }));
                        $('#AddBoatTrailer.b').val(data.VehicleId);

                    }

        })
            .fail(function (jqXHR, textStatus, errorThrown) {
                debugger;
            alert("There was an error while trying to save the Vehicle.");
        });
    };
    @*</script>*@