@model TechCertain.WebUI.Models.DocumentViewModel
@*<script src="~/ckeditor/ckeditor5-build-classic/build/ckeditor.js"></script>*@

<div id="content" style="background-color: #A6E2EF">
    <!-- widget grid -->
    <section id="widget-grid" class="">
        <!-- row -->
        <div class="row">
            <!-- NEW WIDGET START -->
            <article class="col-sm-12 col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2">
                <!-- Widget ID (each widget will need unique ID)-->
                <div id="container">
                    <div class="jarviswidget" id="wid-id-1" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false"
                         data-widget-deletebutton="false" data-widget-custombutton="false" data-widget-sortable="false">

                        <header style="background-color:#EF4E45; color:white">
                            <h2>Document</h2>
                        </header>


                        <div role="content">
                            <!-- widget content -->

                            <div class="widget-body">
                                <form action="#" id="wizard-1" role="form" data-toggle="validator" method="post" accept-charset="utf-8" novalidate="true">

                                    <!-- SmartWizard html -->
                                    <div id="CreateDocsmartwizard" class="sw-main sw-theme-circles">
                                        <ul class="nav nav-tabs step-anchor">
                                            <li class="nav-item active"><a href="#tab1" class="nav-link">1<br><small>Start</small></a></li>
                                            <li class="nav-item"><a href="#tab2" class="nav-link">2<br><small>Review</small></a></li>
                                            <li class="nav-item"><a href="#tab3" class="nav-link">3<br><small>Agree</small></a></li>

                                        </ul>

                                        <div class="sw-container tab-content">
                                            <div id="tab1" class="tab-pane step-content" style="display: block;">
                                                <h3><strong>Details </strong> - Complete Information</h3>
                                                @Html.HiddenFor(m => m.DocumentId)
                                                <br />
                                                <h3><strong>Setup </strong></h3>
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i class="fa fa-file-text fa-lg fa-fw"></i></span>
                                                                @Html.TextBoxFor(m => m.Name)
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i class="fa fa-file-text fa-lg fa-fw"></i></span>
                                                                @Html.TextAreaFor(m => m.Description)
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <span class="input-group-addon"><i class="fa fa-file-text fa-lg fa-fw"></i></span>
                                                                <select id="documentType" name="DocumentType" class="form-control input-lg">
                                                                    <option value="" selected="">-- Select --</option>
                                                                    <option value="0">Wording</option>
                                                                    <option value="1">Certificate</option>
                                                                    <option value="2">Schedule</option>
                                                                    <option value="3">Payment Confirmation</option>
                                                                    <option value="4">Invoice</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div id="tab2" class="tab-pane step-content">
                                                <h3><strong>Review </strong></h3>
                                                @Html.TextAreaFor(m => m.Content)



                                            </div>
                                            <div id="tab3" class="tab-pane step-content">
                                                <div>
                                                    <div class="page-body">
                                                        <div class="head">
                                                            <h3 style="align-content:center">Document Has Been Saved</h3>
                                                            <a class="btn btn-success btn-xs" href="@Url.Action("ManageDocuments", "File")"><i class="fa fa-arrow-circle-left"></i>Back </a>
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>

                                        </div>

                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </article>
        </div>
    </section>
</div>

@section pagespecific {
    @*<script src="/Scripts/plugin/bootstrap-wizard/jquery.bootstrap.wizard.min.js"></script>
        <script src="~/Scripts/plugin/bootstrap-progressbar/bootstrap-progressbar.js" defer></script>
        <script src="~/smartwizard/js/jquery.smartWizard.min.js" defer></script>
        <link href="~/smartwizard/cc/smart_wizard_theme_circles.css" rel="stylesheet" />
        <script src="~/twitter-bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="~/lib/popper.js/umd/popper.js"></script>*@

    @*<script src="~/smartwizard/js/jquery.smartWizard.min.js" defer></script>
        <link href="~/smartwizard/cc/smart_wizard_theme_circles.css" rel="stylesheet" />
        <script src="~/lib/popper.js/umd/popper.js"></script>*@


    <script src="~/jquery/jquery.js"></script>
    <script src="~/jqueryui/jquery-ui.js"></script>
    <link href="~/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min.js"></script>
    <script src="~/twitter-bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/3.0.0/js/bootstrap-datetimepicker.min.js"></script>
    <script src="~/smartwizard/js/jquery.smartWizard.min.js" defer></script>
    <link href="~/smartwizard/cc/smart_wizard_theme_circles.css" rel="stylesheet" />
    <script src="~/ckeditor/ckeditor5-build-classic/build/ckeditor.js"></script>
    @*<script src="https ://cdn.ckeditor.com/ckeditor5/15.0.0/classic/ ckeditor.js"></script>*@
    <script type="text/javascript">

// DO NOT REMOVE : GLOBAL FUNCTIONS!
                                                            let editor;
                                                   ClassicEditor
                                                               .create( document.querySelector( '#Content' ) )
                                                               .then( newEditor => {
                                                                editor = newEditor;
                                                               } )
                                                                 .catch( error => {
                                                                 console.error( error );
                                                                  } );
$(document).ready(function () {

           $('#CreateDocsmartwizard').smartWizard({
            selected: 0,  // Initial selected step, 0 = first step
            keyNavigation:true, // Enable/Disable keyboard navigation(left and right keys are used if enabled)
            autoAdjustHeight:false, // Automatically adjust content height
            cycleSteps: false, // Allows to cycle the navigation of steps
            backButtonSupport: true, // Enable the back button support
            useURLhash: true, // Enable selection of the step based on url hash
            lang: {  // Language variables
                next: 'Next',
                previous: 'Previous'
            },
            toolbarSettings: {
                toolbarPosition: 'bottom', // none, top, bottom, both
                toolbarButtonPosition: 'right', // left, right
                showNextButton: true, // show/hide a Next button
                showPreviousButton: true, // show/hide a Previous button

            },
            anchorSettings: {
                anchorClickable: true, // Enable/Disable anchor navigation
                enableAllAnchors: false, // Activates all anchors clickable all times
                markDoneStep: true, // add done css
                enableAnchorOnDoneStep: true // Enable/Disable the done steps navigation
            },
            contentURL: null, // content url, Enables Ajax content loading. can set as data data-content-url on anchor
            disabledSteps: [],    // Array Steps disabled
            errorSteps: [],    // Highlight step with errors
            theme: 'dots',
            transitionEffect: 'fade', // Effect on navigation, none/slide/fade
            transitionSpeed: '400'
           });

     $("#CreateDocsmartwizard").on("leaveStep", function (e, anchorObject, stepNumber, stepDirection) {
           debugger;
           var informationsheetstatus = $('#Status').val();
           var clientInformationSheet = $('#AnswerSheetId').val();


        if (stepNumber === 1) {
                          debugger;

             if (confirm("Are you sure you want to submit this document?")) {
                 console.log("submitted!");


                      const body = editor.getData();
                 var bodyElement = $("#@Html.IdFor(m => m.Content)");
			// hack because jquery will only escape text inside an element, so we'll store the text, & get the escaped text, and then resave that
			// using hack because escape(...) was deprecated

                 bodyElement.text(bodyElement.text(body).html());




                 var content = document.getElementById("editor");


                 $.ajax({
                     type: "POST",
                     url: '@Url.Action("CreateDocument", "File")',
                     data: $("#wizard-1").serialize() ,
                 })
                     .done(function (json) {
                         //var model = JSON.parse(json);
                         debugger;
                         $("#productAutoReview")
                         console.log(json);
                     })
                     .fail(function (err, ajaxOptions, thrownError) {
                         debugger;
                         alert("Unable to save." + err.responseText);
                         console.log(err);
                         console.log(ajaxOptions);
                         console.log(thrownError);
                     });
             } else {
                 return false;
             }
         }
     });

        @*$('#Submit').on('click', function () {
        debugger;
    	if (confirm("Are you sure you want to submit this document?"))
    	{
	        console.log("submitted!");

			$.ajax({
				type: "POST",
				url: '@Url.Action("CreateDocument", "File")',
				data: $("#wizard-1").serialize() // serializes the form's elements.
			})
	        .done(function (json) {
	        	//var model = JSON.parse(json);
                debugger;
				$("#productAutoReview")
				console.log(json);
	        })
                .fail(function (err, ajaxOptions, thrownError) {
                    debugger;
				alert("Unable to save." + err.responseText );
				console.log(err);
				console.log(ajaxOptions);
				console.log(thrownError);
	        });
        }
    });*@

});



    </script>

}