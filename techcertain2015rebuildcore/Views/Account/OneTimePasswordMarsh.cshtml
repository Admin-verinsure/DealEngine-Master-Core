@model techcertain2015rebuildcore.Models.ViewModels.Account.RsaOneTimePasswordModel
@{
    ViewBag.PageId = "extr-page";
    ViewBag.PageClass = "animated fadeInDown";
}
@section topright{
    @*<span id="extr-page-header-space"> <span class="hidden-mobile">Need an account?</span> <a href="~/Account/Register" class="btn btn-danger">Create account</a> </span>*@
    @*TODO Change back when mono 4.3 or later is installed*@
    @*<span id="extr-page-header-space"> <span class="hidden-mobile">Need an account?</span> <a href="@Url.Action("register", "account")" class="btn btn-danger">Create account</a> </span>*@
}

<style>

</style>
<div id="content" class="container">
    <div class="row">
        @{ await Html.RenderPartialAsync("_LoginText"); }
        <div class="col-xs-12 col-sm-12 col-md-5 col-lg-4">
            <div class="well no-padding smart-form client-form">
                <header>
                    Notice
                </header>
                <fieldset>
                    <section>
                        <label>Your sign in requires additional validation. We have emailed you a code to complete this extra step. Please check your email and enter the code below.</label>
                    </section>
                </fieldset>
            </div>
            <div class="well no-padding">
                <form action="~/Account/LoginMarsh" method="POST" id="login-form" class="smart-form client-form">
                    @*TODO Change back when mono 4.3 or later is installed*@
                    @*<form action="@Url.Action("login", "account")" method="POST" id="login-form" class="smart-form client-form">*@
                    <header>
                        Sign In
                    </header>
                    @*@Html.HiddenFor(m => m.ReturnUrl)*@
                    @Html.AntiForgeryToken()
                    <fieldset>
                        <input id="deviceprint" class="hidden" type="text" name="deviceprint" value="" />
                        <input id="sessionId" class="hidden" type="text" name="sessionId" value="" />
                        <input id="transactionId" class="hidden" type="text" name="transactionId" value="" />
                        <input id="userId" class="hidden" type="text" name="userId" value="" />

                        <section>
                            @*<label class="label">Password</label>*@
                            <label class="input">
                                <i class="icon-append fa fa-lock"></i>
                                <input type="text" name="optcode" placeholder="Code" value="" autocomplete="off">
                                <b class="tooltip tooltip-top-right"><i class="fa fa-lock txt-color-teal"></i> Enter your validation code</b>
                            </label>
                        </section>
                    </fieldset>
                    <footer>
                        <button type="submit" id="submitButton" class="btn btn-primary">
                            Sign in
                        </button>
                    </footer>
                </form>
                <div class="modal" id="loginModal" tabindex="-1" role="dialog" data-backdrop="static">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-body">
                                <p><img src="/Content/img/loading.gif" /> Submitting code. Please wait...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @*@{if (Html.DemoEnvironment()) { Html.RenderPartial("_SocialMedia"); }
            }*@
        </div>
    </div>
</div>
@section pagespecific {
<script src="~/Scripts/externalparty/rsa.js"></script>
<script src="~/Scripts/externalparty/hashtable.js"></script>
<script type="text/javascript">
    $(function () {
        // Validation
        $("#login-form").validate({
            // Rules for form validation
            rules: {
                username: {
                    required: true,
                    email: false
                },
                password: {
                    required: true,
                    minlength: 8,
                    maxlength: 128
                }
            },

            // Messages for form validation
            messages: {
                username: {
                    required: 'Please enter your username',
                    username: 'Please enter a VALID username'
                },
                password: {
                    required: 'Please enter your password'
                }
            },

            // Do not change code below
            errorPlacement: function (error, element) {
                error.insertAfter(element.parent());
            }
        });
    });
    // display wait modal when we login
    $("#submitButton").click(function () {
        var $valid = $("#login-form").valid();
        if ($valid) {
       		$('#loginModal').modal('show');
        }
	});

</script>
}
